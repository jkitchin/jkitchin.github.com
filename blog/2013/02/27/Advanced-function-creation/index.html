

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Kitchin Research Group</title>
  <meta name="google-site-verification" content="CGcacJdHc2YoZyI0Vey9XRA5qwhhFDzThKJezbRFcJ4" />
  <meta name="description" content="Chemical Engineering at Carnegie Mellon University">
  <meta name="author" content="John Kitchin">
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="/blog/feed/atom" />
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/base.css?v=1">
  <link rel="stylesheet" href="/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld" href="/css/handheld.css?v=1">
  <link rel="stylesheet" href="/css/pygments_murphy.css" type="text/css" />

  <script src="/js/libs/modernizr-1.7.min.js"></script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  <link rel="stylesheet" href="/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
<div id="header" class="header_gradient theme_font">
<table><tr><td>
    <h1><a href="/">The Kitchin Research Group</a></h1>
    <h2>Chemical Engineering at Carnegie Mellon University</h2>
</td>
<td colspan=100%><div style="float:right;width:100%;text-align:right;"> <span id='badgeCont737515' style='width:126px'><script src='http://labs.researcherid.com/mashlets?el=badgeCont737515&mashlet=badge&showTitle=false&className=a&rid=A-2363-2010'></script></span></div>
</td></tr>
</table>
</div>
  <div id="navigation" class="grid_12">

    <ul class="theme_font">
      <li><a href="/blog"
             class="">Blog</a></li>

      <li><a href="/blog/archive"
             class="">Archives</a></li>

      <li><a href="http://www.researcherid.com/rid/A-2363-2010" target="_new">Publications</a></li>

      <li><a href="/research.html"
             class="">Research</a></li>

      <li><a href="/group.html"
             class="">Group</a></li>

      <li><a href="/categories.html"
             class="">Categories</a></li>

      <li><a href="/about.html"
             class="">About us</a></li>
    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_8">
            






<article>
  <div class="blog_post">
    <header>
      <div id="Advanced-function-creation"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/02/27/Advanced-function-creation/" rel="bookmark" title="Permanent Link to Advanced function creation">Advanced function creation</a></h2>
      <p><small><span class="blog_post_date">Posted February 27, 2013 at 02:49 PM</span> | categories: 
        <span class="blog_post_categories"><a href='/blog/category/python/'>python</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2013/02/27/Advanced-function-creation#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated March 06, 2013 at 06:28 PM</span>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
Python has some nice features in creating functions. You can create default values for variables, have optional variables and optional keyword variables.
In this function f(a,b), <code>a</code> and <code>b</code> are called positional arguments, and they are required, and must be provided in the same order as the function defines.
</p>

<p>
If we provide a default value for an argument, then the argument is called a keyword argument, and it becomes optional. You can combine positional arguments and keyword arguments, but positional arguments must come first. Here is an example.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">def</span> <span style="color: #8b2323;">func</span>(a, n=2):
    <span style="color: #228b22;">"compute the nth power of a"</span>
    <span style="color: #8b0000;">return</span> a**n

<span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">three different ways to call the function</span>
<span style="color: #8b0000;">print</span> func(2)
<span style="color: #8b0000;">print</span> func(2, 3)
<span style="color: #8b0000;">print</span> func(2, n=4)
</pre>
</div>

<pre class="example">
4
8
16
</pre>

<p>
In the first call to the function, we only define the argument <code>a</code>, which is a mandatory, positional argument. In the second call, we define <code>a</code> and <code>n</code>, in the order they are defined in the function. Finally, in the third call, we define <code>a</code> as a positional argument, and <code>n</code> as a keyword argument.
</p>

<p>
If all of the arguments are optional, we can even call the function with no arguments. If you give arguments as positional arguments, they are used in the order defined in the function. If you use keyword arguments, the order is arbitrary.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">def</span> <span style="color: #8b2323;">func</span>(a=1, n=2):
    <span style="color: #228b22;">"compute the nth power of a"</span>
    <span style="color: #8b0000;">return</span> a**n

<span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">three different ways to call the function</span>
<span style="color: #8b0000;">print</span> func()
<span style="color: #8b0000;">print</span> func(2, 4)
<span style="color: #8b0000;">print</span> func(n=4, a=2)
</pre>
</div>

<pre class="example">
1
16
16
</pre>

<p>
It is occasionally useful to allow an arbitrary number of arguments in a function. Suppose we want a function that can take an arbitrary number of positional arguments and return the sum of all the arguments. We use the syntax <code>*args</code> to indicate arbitrary positional arguments. Inside the function the variable <code>args</code> is a tuple containing all of the arguments passed to the function. 
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">def</span> <span style="color: #8b2323;">func</span>(*args):
    <span style="color: #8b0000;">sum</span> = 0
    <span style="color: #8b0000;">for</span> arg <span style="color: #8b0000;">in</span> args:
        <span style="color: #8b0000;">sum</span> += arg
    <span style="color: #8b0000;">return</span> <span style="color: #8b0000;">sum</span>

<span style="color: #8b0000;">print</span> func(1, 2, 3, 4)
</pre>
</div>

<pre class="example">
10
</pre>

<p>
A more &ldquo;functional programming&rdquo; version of the last function is given here. This is an advanced approach that is less readable to new users, but more compact and likely more efficient for large numbers of arguments.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> operator
<span style="color: #8b0000;">def</span> <span style="color: #8b2323;">func</span>(*args):
    <span style="color: #8b0000;">return</span> <span style="color: #8b0000;">reduce</span>(operator.add, args)
<span style="color: #8b0000;">print</span> func(1, 2, 3, 4)
</pre>
</div>

<pre class="example">
10
</pre>

<p>
It is possible to have arbitrary keyword arguments. This is a common pattern when you call another function within your function that takes keyword arguments. We use <code>**kwargs</code> to indicate that arbitrary keyword arguments can be given to the function. Inside the function, kwargs is variable containing a dictionary of the keywords and values passed in.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">def</span> <span style="color: #8b2323;">func</span>(**kwargs):
    <span style="color: #8b0000;">for</span> kw <span style="color: #8b0000;">in</span> kwargs:
        <span style="color: #8b0000;">print</span> <span style="color: #228b22;">'{0} = {1}'</span>.format(kw, kwargs[kw])

func(t1=6, color=<span style="color: #228b22;">'blue'</span>)
</pre>
</div>

<pre class="example">
color = blue
t1 = 6
</pre>

<p>
A typical example might be:
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> matplotlib.pyplot <span style="color: #8b0000;">as</span> plt

<span style="color: #8b0000;">def</span> <span style="color: #8b2323;">myplot</span>(x, y, fname=<span style="color: #8b0000;">None</span>, **kwargs):
    <span style="color: #228b22;">"make plot of x,y. save to fname if not None. provide kwargs to plot"</span>
    plt.plot(x, y, **kwargs)
    plt.xlabel(<span style="color: #228b22;">'X'</span>)
    plt.ylabel(<span style="color: #228b22;">'Y'</span>)
    plt.title(<span style="color: #228b22;">'My plot'</span>)
    <span style="color: #8b0000;">if</span> fname:
        plt.savefig(fname)
    <span style="color: #8b0000;">else:</span>
        plt.show()

x = [1, 3, 4, 5]
y = [3, 6, 9, 12]

myplot(x, y, <span style="color: #228b22;">'images/myfig.png'</span>, color=<span style="color: #228b22;">'orange'</span>, marker=<span style="color: #228b22;">'s'</span>)

<span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">you can use a dictionary as kwargs</span>
d = {<span style="color: #228b22;">'color'</span>:<span style="color: #228b22;">'magenta'</span>,
     <span style="color: #228b22;">'marker'</span>:<span style="color: #228b22;">'d'</span>}

myplot(x, y, <span style="color: #228b22;">'images/myfig2.png'</span>, **d)
</pre>
</div>

<p><img src="/img/./images/myfig.png"><p>

<p><img src="/img/./images/myfig2.png"><p>

<p>
In that example we wrap the matplotlib plotting commands in a function, which we can call the way we want to, with arbitrary optional arguments. In this example, you cannot pass keyword arguments that are illegal to the plot command or you will get an error.
</p>

<p>
It is possible to combine all the options at once. I admit it is hard to imagine where this would be really useful, but it can be done!
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> numpy <span style="color: #8b0000;">as</span> np

<span style="color: #8b0000;">def</span> <span style="color: #8b2323;">func</span>(a, b=2, *args, **kwargs):
    <span style="color: #228b22;">"return a**b + sum(args) and print kwargs"</span>
    <span style="color: #8b0000;">for</span> kw <span style="color: #8b0000;">in</span> kwargs:
        <span style="color: #8b0000;">print</span> <span style="color: #228b22;">'kw: {0} = {1}'</span>.format(kw, kwargs[kw])

    <span style="color: #8b0000;">return</span> a**b + np.sum(args)

<span style="color: #8b0000;">print</span> func(2, 3, 4, 5, mysillykw=<span style="color: #228b22;">'hahah'</span>)
</pre>
</div>

<pre class="example">
kw: mysillykw = hahah
17
</pre>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/02/27/Advanced-function-creation.org">org-mode source</a><p>

    </div>
  </div>
</article>



<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_url = "http://jkitchin.github.io/blog/2013/02/27/Advanced-function-creation";
</script>
<script type="text/javascript" src="http://disqus.com/forums/kitchinresearchgroup/embed.js"></script>
<noscript><a href="http://kitchinresearchgroup.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

          </div>
          <div id="sidebar" class="grid_4">
            <aside>
<section>
Search
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:kitchingroup.cheme.cmu.edu" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
</section>


  <section>
    <h1 class="post_header_gradient theme_font">Links</h1>
    <ul>
    <li><a href="http://enthought.com">Enthought Python</a></li>
    <li><a href="/pycse">Pycse</a></li>
    <li><a href="/dft-book">DFT-book</a></li>
    </ul>
  </section>

  <section>
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/blog/2014/02/20/New-publication-in-RSC-Advances/">New publication in RSC Advances</a></li>
      <li><a href="/blog/2014/02/19/Extracting-bibtex-file-from-an-org-buffer/">Extracting bibtex file from an org-buffer</a></li>
      <li><a href="/blog/2014/02/17/yasnippets-for-jasp-ase-and-python/">yasnippets for jasp, ase and python</a></li>
      <li><a href="/blog/2014/02/16/A-dynamic-snippet-for-a-task-due-7-days-from-now/">A dynamic snippet for a task due 7 days from now</a></li>
      <li><a href="/blog/2014/02/10/Merging-bibtex-files-and-avoiding-duplicates/">Merging bibtex files and avoiding duplicates</a></li>
    </ul>
  </section>

  <section>
 <h1 class="post_header_gradient theme_font"><a href="http://www.citeulike.org/user/jkitchin" class="external text" title="http://www.citeulike.org/user/jkitchin" rel="nofollow">CiteULike</a> Reading List</h1>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

var d = new Date();
curr_year = d.getFullYear();

$.getJSON('http://www.citeulike.org/json/user/jkitchin/,,?callback=?&per_page=5',
function(data) {
  var items = [];
  year=curr_year
  $.each(data, function(i) {
    year=data[i].published[0];
    var cit='<li id="' + i + '">' + '<a class="pap" href="http://dx.doi.org/'+data[i].doi+'">'+ data[i].title + '</a><br>';
    cit+='</li>';
    items.push( cit )      
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('#papers2');
});
});
</script>

<div id="papers2"></div>

  </section>

<section>
<h1 class="post_header_gradient theme_font">Latest GitHub Repos</h1>
  <a href="https://github.com/jkitchin">@jkitchin</a> on GitHub.
<ul id="my-github-projects">
    <li class="loading">Status updating&#8230;</li>
  </ul>

</section>
</aside>

          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/blog/feed/index.xml">RSS</a>
        <a href="http://kitchinresearchgroup.disqus.com/latest.rss">Comments RSS Feed</a>.
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2014
        John Kitchin
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery.tweet.js"></script>  
  <script src="/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
  <script>
      var _gaq=[['_setAccount','UA-35731398-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
  <script>
  (function() {
      var links = document.getElementsByTagName('a');
      var query = '?';
      for(var i = 0; i < links.length; i++) {
          if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
      }
      document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/kitchinresearchgroup/get_num_replies.js' + query + '"></' + 'script>');
  })();
  </script>

  </body>
</html>






<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/js/git.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
     $("#my-github-projects").loadRepositories("jkitchin");
    });
</script>



