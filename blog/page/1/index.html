

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Kitchin Research Group</title>
  <meta name="google-site-verification" content="CGcacJdHc2YoZyI0Vey9XRA5qwhhFDzThKJezbRFcJ4" />
  <meta name="description" content="Chemical Engineering at Carnegie Mellon University">
  <meta name="author" content="John Kitchin">
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="/blog/feed/atom" />
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/base.css?v=1">
  <link rel="stylesheet" href="/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld" href="/css/handheld.css?v=1">
  <link rel="stylesheet" href="/css/pygments_murphy.css" type="text/css" />

  <script src="/js/libs/modernizr-1.7.min.js"></script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  <link rel="stylesheet" href="/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
<div id="header" class="header_gradient theme_font">
<table><tr><td>
    <h1><a href="/">The Kitchin Research Group</a></h1>
    <h2>Chemical Engineering at Carnegie Mellon University</h2>
</td>
<td colspan=100%><div style="float:right;width:100%;text-align:right;"> <span id='badgeCont737515' style='width:126px'><script src='http://labs.researcherid.com/mashlets?el=badgeCont737515&mashlet=badge&showTitle=false&className=a&rid=A-2363-2010'></script></span></div>
</td></tr>
</table>
</div>
  <div id="navigation" class="grid_12">

    <ul class="theme_font">
      <li><a href="/blog"
             class="">Blog</a></li>

      <li><a href="/blog/archive"
             class="">Archives</a></li>

      <li><a href="/publications/index.html">Publications</a></li>
      <li><a href="/group.html">Group</a></li>

      <li><a href="/research.html"
             class="">Research</a></li>

      <li><a href="/categories.html"
             class="">Categories</a></li>

      <li><a href="/about.html"
             class="">About us</a></li>

      <li><a href="/subscribe.html">Subscribe</a></li>

    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_8">
            
  





<article>
  <div class="blog_post">
    <header>
      <div id="A-callable-plist-data-structure-for-Emacs"></div>
      <h2 class="blog_post_title"><a href="/blog/2017/04/16/A-callable-plist-data-structure-for-Emacs/" rel="bookmark" title="Permanent Link to A callable plist data structure for Emacs">A callable plist data structure for Emacs</a></h2>
      <p><small><span class="blog_post_date">Posted April 16, 2017 at 04:44 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/elisp/'>elisp</a>, <a href='/blog/category/macro/'>macro</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2017/04/16/A-callable-plist-data-structure-for-Emacs#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
Emacs lisp has a few data structures that store key-value pairs. Here are some canonical examples of these data structures and the way to get data out of them.
</p>

<ul class="org-ul">
<li>a-lists</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let</span> ((data '((key1 . 4)
              (key2 . <span style="color: #008000;">"tree"</span>))))
  (cdr (assoc 'key2 data)))
</pre>
</div>

<ul class="org-ul">
<li>p-lists</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let</span> ((data '(<span style="color: #006FE0;">:key1</span> 4 <span style="color: #006FE0;">:key2</span> <span style="color: #008000;">"tree"</span>)))
  (plist-get data <span style="color: #006FE0;">:key2</span>))
</pre>
</div>

<ul class="org-ul">
<li>A hash table</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let</span> ((data #s(hash-table data (key1 4 key2 <span style="color: #008000;">"tree"</span>))))
  (gethash 'key2 data))
</pre>
</div>

<p>
Each of these uses some function to get data out of them. I have been learning about closures today, and realized a way you can make a "callable" data structure using them. In a closure, the data is stored as part of a function. We will use a <a href="http://letoverlambda.com">"let over lambda"</a> with a defalias in a lexical environment to achieve this. I will wrap a p-list with this approach, but it could work with any of the examples above. We will make the function have a few behaviors that allow us to see the whole data structure with no args, to get a value with one arg that is a key, and to set a value if there are more than two args add them as key-val pairs to the data structure. This block binds the function to the symbol "d" which is then a callable function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let</span> ((data '(<span style="color: #006FE0;">:key1</span> 4 <span style="color: #006FE0;">:key2</span> <span style="color: #008000;">"tree"</span>)))
  (<span style="color: #0000FF;">defalias</span> '<span style="color: #006699;">d</span>
    (<span style="color: #0000FF;">lambda</span> (<span style="color: #6434A3;">&amp;rest</span> key-vals)
      (<span style="color: #0000FF;">cond</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">no args, return data</span>
       ((= 0 (length key-vals))
        data)
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">just a key, get val</span>
       ((= 1 (length key-vals))
        (plist-get data (car key-vals)))
       (t
        (<span style="color: #0000FF;">loop</span> for key in (-slice key-vals 0 nil 2)
              for val in (-slice key-vals 1 nil 2)
              do
              (plist-put data key val))
        data)))))
</pre>
</div>

<p>
Now we can use it like to get some data out:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d <span style="color: #006FE0;">:key2</span>)
</pre>
</div>

<p>
And add new values like:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d <span style="color: #006FE0;">:key3</span> <span style="color: #008000;">"oak"</span>)
</pre>
</div>

<p>
You can update a value with this too:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d <span style="color: #006FE0;">:key3</span> <span style="color: #008000;">"pine"</span>)
</pre>
</div>

<p>
or add multiple values like this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d <span style="color: #006FE0;">:key4</span> 0 <span style="color: #006FE0;">:key5</span> 9)
</pre>
</div>

<p>
And see the whole plist with no args:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d)
</pre>
</div>

<p>
Pretty nice! It seems like there ought to be a macro to facilitate creating those. Here is one.
This macro basically expands to the same code as above, but for fun I add a default value option.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defmacro</span> <span style="color: #006699;">default-dict</span> (var <span style="color: #6434A3;">&amp;optional</span> default <span style="color: #6434A3;">&amp;rest</span> key-vals)
  <span style="color: #036A07;">"Bind a callable plist to VAR that contains KEY-VALS."</span>
  (<span style="color: #0000FF;">let</span> ()
    `<span style="color: #D0372D;">(let ((data </span>',key-vals))
       (<span style="color: #0000FF;">defalias</span> ',var
         (<span style="color: #0000FF;">lambda</span> (<span style="color: #6434A3;">&amp;rest</span> key-vals)
           (message <span style="color: #008000;">"%s"</span> key-vals)
           (<span style="color: #0000FF;">cond</span>
            <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">no args, return data</span>
            ((= 0 (length key-vals))
             data)
            <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">just a key, get val</span>
            ((= 1 (length key-vals))
             (<span style="color: #0000FF;">or</span>  (plist-get data (car key-vals)) ,default))
            (t
             (<span style="color: #0000FF;">loop</span> for key in (-slice key-vals 0 nil 2)
                   for val in (-slice key-vals 1 nil 2)
                   do
                   (plist-put data key val))
             data)))))))
</pre>
</div>

<p>
Here is an instance of it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">default-dict</span> d2 <span style="color: #008000;">"None"</span> <span style="color: #006FE0;">:key1</span> 4 <span style="color: #006FE0;">:key2</span> <span style="color: #008000;">"tree"</span>)
</pre>
</div>

<p>
And here it is in use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d2 <span style="color: #006FE0;">:key1</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(d2 <span style="color: #006FE0;">:new-key</span>)
</pre>
</div>

<p>
Not bad. If you come from Python, you might find this style of data structure to be more similar to what you are used to seeing. It sure seems less verbose than the usual plist boilerplate I have used before.
</p>
<p>Copyright (C) 2017 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p>
<p><a href="/org/2017/04/16/A-callable-plist-data-structure-for-Emacs.org">org-mode source</a></p>
<p>Org-mode version = 9.0.5</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2017/04/16/A-callable-plist-data-structure-for-Emacs#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="A-new-org-mode-exporter-to-Word-for-scimax"></div>
      <h2 class="blog_post_title"><a href="/blog/2017/04/15/A-new-org-mode-exporter-to-Word-for-scimax/" rel="bookmark" title="Permanent Link to A new org-mode exporter to Word for scimax">A new org-mode exporter to Word for scimax</a></h2>
      <p><small><span class="blog_post_date">Posted April 15, 2017 at 04:19 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/orgmode/'>orgmode</a>, <a href='/blog/category/export/'>export</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2017/04/15/A-new-org-mode-exporter-to-Word-for-scimax#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated April 15, 2017 at 04:21 PM</span>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
I am continuing to chip away to getting a reasonable export behavior for org-mode to MS Word. I have previously made some progress with Pandoc <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/01/29/Export-org-mode-to-docx-with-citations-via-pandoc/">here</a> and <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/06/11/ox-pandoc-org-mode-+-org-ref-to-docx-with-bibliographies/">here</a>, but those solutions never stuck with me. So here is another go. Here I leverage Pandoc again, but use a path through LaTeX to get citations without modifying the org-ref cite link syntax. The code for this can be found here: <a href="https://github.com/jkitchin/scimax/blob/master/ox-word.el">https://github.com/jkitchin/scimax/blob/master/ox-word.el</a>. The gist is you use org-ref like you always do, and you specify the bibliography style for Pandoc like this:
</p>

<p>
<img src="/media/date-15-04-2017-time-16-06-53.png"> 
</p>

<p>
You can download other csl files at <a href="https://www.zotero.org/styles">https://www.zotero.org/styles</a>. Then you can simply export the org-doc to a Word document with the key-binding C-c C-e w p.
</p>

<p>
Here is an example document to illustrate the exporter. I have written about data sharing in catalysis <a class='org-ref-reference' href="#kitchin-2015-examp">kitchin-2015-examp</a> and surface science <a class='org-ref-reference' href="#kitchin-2015-data-surfac-scien">kitchin-2015-data-surfac-scien</a>.
</p>

<p>
Here is an example source block.
</p>

<div class="org-src-container">
<pre class="src src-ipython">%matplotlib inline
<span style="color: #0000FF;">import</span> matplotlib.pyplot <span style="color: #0000FF;">as</span> plt

plt.plot([1, 2, 3, 4, 5, 6])
</pre>
</div>

<p>
<img src="/media/ob-ipython-b8591826ba9e316738705d03264316a5.png"> 
</p>

<p>
See Ref. <a href="#fig:line">fig:line</a> for example. These do not work. That might require additional pre-processing to replace them with numbers.
</p>

<p>
Here is the Word document that is generated: <a href="/media/2017-04-15.docx">2017-04-15.docx</a> 
</p>

<p>
As a penultimate result it might be ok. The references are reasonably formatted, but not compatible with Endnote, or other bibliography manager software. There are still some issues with Figure numbering and cross-references, but it is not too bad. The main benefit of this seems to be that one source generates HTML and the Word document.
</p>

<p>

<h1 class='org-ref-bib-h1'>Bibliography</h1>
<ul class='org-ref-bib'><li><a id="kitchin-2015-examp">[kitchin-2015-examp] Kitchin, Examples of Effective Data Sharing in Scientific Publishing, <i>ACS Catalysis</i>, <b>5(6)</b>, 3894-3899 (2015). <a href=" http://dx.doi.org/10.1021/acscatal.5b00538 ">link</a>. <a href="http://dx.doi.org/10.1021/acscatal.5b00538">doi</a>.</a></li>
<li><a id="kitchin-2015-data-surfac-scien">[kitchin-2015-data-surfac-scien] "John Kitchin", Data Sharing in Surface Science, <i>"Surface Science "</i>, <b>647</b>, 103-107 (2016). <a href="http://www.sciencedirect.com/science/article/pii/S0039602815001326">link</a>. <a href="http://dx.doi.org/10.1016/j.susc.2015.05.007">doi</a>.</a></li>
</ul>
</p>
<p>Copyright (C) 2017 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p>
<p><a href="/org/2017/04/15/A-new-org-mode-exporter-to-Word-for-scimax.org">org-mode source</a></p>
<p>Org-mode version = 9.0.5</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2017/04/15/A-new-org-mode-exporter-to-Word-for-scimax#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Autoformatting-ordinal-numbers-and-fractions-in-orgmode"></div>
      <h2 class="blog_post_title"><a href="/blog/2017/04/11/Autoformatting-ordinal-numbers-and-fractions-in-orgmode/" rel="bookmark" title="Permanent Link to Autoformatting ordinal numbers and fractions in orgmode">Autoformatting ordinal numbers and fractions in orgmode</a></h2>
      <p><small><span class="blog_post_date">Posted April 11, 2017 at 03:05 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/orgmode/'>orgmode</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2017/04/11/Autoformatting-ordinal-numbers-and-fractions-in-orgmode#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
MS Word has a <i>few</i> things I like. One of them is the ability to autoformat things to make an ordinal number string like 1st to the superscripted version 1<sup>st</sup> while you type or a 1/2 to ½.  I thought it would be pretty easy to implement that for org-mode. It turns out it was not so easy!
</p>

<p>
There does not appear to be a way to specify a regexp pattern as an abbreviation, or an abbrev that starts with a number. What we need for ordinal numbers is to recognize a sequence of numbers followed by "st", "nd", "rd" or "th" followed by a space or punctuation, and then superscript the letters. In case you didn't want the replacement to occur, you should be able to undo it and get back the original string. This addition was a little hard won, so I am sharing the lessons here.
</p>

<p>
The logic I used is to put a function in the post-self-insert-hook. The function only works in org-mode, when not in a codeblock and when looking back at a regexp that matches a pattern to be replaced. Getting it to undo was trickier than expected. Eventually I worked out that you put an undo boundary in place before the change, and then it seems like you can undo the changes. I created a minor mode so it is easy to toggle this on and off.
</p>

<p>
Here is the implementation:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defcustom</span> <span style="color: #BA36A5;">scimax-autoformat-ordinals</span> t
  <span style="color: #036A07;">"Determines if scimax autoformats ordinal numbers."</span>
  <span style="color: #006FE0;">:group</span> 'scimax)

(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">scimax-org-autoformat-ordinals</span> ()
  <span style="color: #036A07;">"Expand ordinal words to superscripted versions in org-mode.</span>
<span style="color: #036A07;">1st to 1^{st}.</span>
<span style="color: #036A07;">2nd to 2^{nd}</span>
<span style="color: #036A07;">3rd to 3^{rd}</span>
<span style="color: #036A07;">4th to 4^{th}"</span>
  (<span style="color: #0000FF;">interactive</span>)
  (<span style="color: #0000FF;">when</span> (<span style="color: #0000FF;">and</span> scimax-autoformat-ordinals
             (eq major-mode 'org-mode)
             (not (org-in-src-block-p))
             (looking-back <span style="color: #008000;">"</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(?3:</span><span style="color: #008000;">\\&lt;</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(?1:</span><span style="color: #008000;">[0-9]+</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(?2:</span><span style="color: #008000;">st</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">nd</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">rd</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">th</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">\\&gt;</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(?:</span><span style="color: #008000;">[[:punct:]]</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">[[:space:]]</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">"</span>
                           (line-beginning-position)))
    (undo-boundary)
    (<span style="color: #0000FF;">save-excursion</span>
      (replace-match <span style="color: #008000;">"\\1^{\\2}"</span> nil nil nil 3))))


(<span style="color: #0000FF;">defcustom</span> <span style="color: #BA36A5;">scimax-autoformat-fractions</span> t
  <span style="color: #036A07;">"Determines if scimax autoformats fractions."</span>
  <span style="color: #006FE0;">:group</span> 'scimax)


(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">scimax-org-autoformat-fractions</span> ()
  <span style="color: #036A07;">"Expand fractions to take up space."</span>
  (<span style="color: #0000FF;">interactive</span>)
  (<span style="color: #0000FF;">when</span> (<span style="color: #0000FF;">and</span> scimax-autoformat-fractions
             (eq major-mode 'org-mode)
             (not (org-in-src-block-p))
             (looking-back <span style="color: #008000;">"</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(?3:</span><span style="color: #008000;">\\&lt;</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(</span><span style="color: #008000;">1/4</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">1/2</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">3/4</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">\\&gt;</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(?:</span><span style="color: #008000;">[[:punct:]]</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">[[:space:]]</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">"</span>
                           (line-beginning-position)))
    (undo-boundary)
    (<span style="color: #0000FF;">save-excursion</span>
      (replace-match (cdr (assoc (match-string 3) '((<span style="color: #008000;">"1/4"</span> . <span style="color: #008000;">"&#188;"</span>)
                                                    (<span style="color: #008000;">"1/2"</span> . <span style="color: #008000;">"&#189;"</span>)
                                                    (<span style="color: #008000;">"3/4"</span> . <span style="color: #008000;">"&#190;"</span>))))
                     nil nil nil 3))))

(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">scimax-org-autoformat</span> ()
  <span style="color: #036A07;">"Autoformat functions."</span>
  (scimax-org-autoformat-ordinals)
  (scimax-org-autoformat-fractions))

(<span style="color: #0000FF;">define-minor-mode</span> <span style="color: #006699;">scimax-autoformat-mode</span>
  <span style="color: #036A07;">"Toggle `</span><span style="color: #D0372D;">scimax-autoformat-mode</span><span style="color: #036A07;">'.  Converts 1st to 1^{st} as you type."</span>
  <span style="color: #006FE0;">:init-value</span> nil
  <span style="color: #006FE0;">:lighter</span> (<span style="color: #008000;">" om"</span>)
  (<span style="color: #0000FF;">if</span> scimax-ordinal-mode
      (add-hook 'post-self-insert-hook #'scimax-org-autoformat nil 'local)
    (remove-hook 'post-self-insert-hook #'scimax-org-autoformat 'local)))
</pre>
</div>

<p>
This is now a feature in scimax. This marks the 500<sup>th</sup> blog post! That is ½ way to 1000. At the current rate of posting, it will be at least 5 years until I hit that!
</p>
<p>Copyright (C) 2017 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p>
<p><a href="/org/2017/04/11/Autoformatting-ordinal-numbers-and-fractions-in-orgmode.org">org-mode source</a></p>
<p>Org-mode version = 9.0.5</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2017/04/11/Autoformatting-ordinal-numbers-and-fractions-in-orgmode#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="A-better-return-in-org-mode"></div>
      <h2 class="blog_post_title"><a href="/blog/2017/04/09/A-better-return-in-org-mode/" rel="bookmark" title="Permanent Link to A better return in org-mode">A better return in org-mode</a></h2>
      <p><small><span class="blog_post_date">Posted April 09, 2017 at 10:56 AM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/orgmode/'>orgmode</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2017/04/09/A-better-return-in-org-mode#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated April 15, 2017 at 01:42 PM</span>
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga3d5369">1. a subheading</a></li>
<li><a href="#orgfdefee8">2. another Subheading</a></li>
</ul>
</div>
</div>
<p>
Over on <a href="http://emacs.stackexchange.com/questions/24574/org-mode-default-to-alt-enter-for-bullets">Stackoverflow</a> someone wanted a better return in org-mode. They wanted return to add items in a list (instead of M-Ret). Someone posted a partial solution, and here I improve on it to add new items to lists, new headings after a heading, and new rows to tables. In each case, a double return on an empty item, headline or table row will delete that line, and terminate the list, headlines or table. You can still use M-Ret, and this function falls through to org-return like it did before. You can use a prefix arg to get a regular return if you want one (e.g. you want to press enter on a headline to push it down).
</p>

<p>
Here is the function. Give it a try. It is a small but helpful addition I think. I have not used it for long, so if you come across issues leave a comment!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">org-inlinetask</span>)

(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">scimax/org-return</span> (<span style="color: #6434A3;">&amp;optional</span> ignore)
  <span style="color: #036A07;">"Add new list item, heading or table row with RET.</span>
<span style="color: #036A07;">A double return on an empty element deletes it.</span>
<span style="color: #036A07;">Use a prefix arg to get regular RET. "</span>
  (<span style="color: #0000FF;">interactive</span> <span style="color: #008000;">"P"</span>)
  (<span style="color: #0000FF;">if</span> ignore
      (org-return)
    (<span style="color: #0000FF;">cond</span>
     ((eq 'line-break (car (org-element-context)))
      (org-return-indent))
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Open links like usual</span>
     ((eq 'link (car (org-element-context)))
      (org-open-at-point-global))
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">It doesn't make sense to add headings in inline tasks. Thanks Anders</span>
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Johansson!</span>
     ((org-inlinetask-in-task-p)
      (org-return))
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">add checkboxes</span>
     ((org-at-item-checkbox-p)
      (org-insert-todo-heading nil))
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">lists end with two blank lines, so we need to make sure we are also not</span>
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">at the beginning of a line to avoid a loop where a new entry gets</span>
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">created with only one blank line.</span>
     ((<span style="color: #0000FF;">and</span> (org-in-item-p) (not (bolp)))
      (<span style="color: #0000FF;">if</span> (org-element-property <span style="color: #006FE0;">:contents-begin</span> (org-element-context))
          (org-insert-heading)
        (beginning-of-line)
        (<span style="color: #0000FF;">setf</span> (buffer-substring
               (line-beginning-position) (line-end-position)) <span style="color: #008000;">""</span>)
        (org-return)))
     ((org-at-heading-p)
      (<span style="color: #0000FF;">if</span> (not (string= <span style="color: #008000;">""</span> (org-element-property <span style="color: #006FE0;">:title</span> (org-element-context))))
          (<span style="color: #0000FF;">progn</span> (org-end-of-meta-data)
                 (org-insert-heading))
        (beginning-of-line)
        (<span style="color: #0000FF;">setf</span> (buffer-substring
               (line-beginning-position) (line-end-position)) <span style="color: #008000;">""</span>)))
     ((org-at-table-p)
      (<span style="color: #0000FF;">if</span> (-any?
           (<span style="color: #0000FF;">lambda</span> (x) (not (string= <span style="color: #008000;">""</span> x)))
           (nth
            (- (org-table-current-dline) 1)
            (org-table-to-lisp)))
          (org-return)
        <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">empty row</span>
        (beginning-of-line)
        (<span style="color: #0000FF;">setf</span> (buffer-substring
               (line-beginning-position) (line-end-position)) <span style="color: #008000;">""</span>)
        (org-return)))
     (t
      (org-return)))))


(define-key org-mode-map (kbd <span style="color: #008000;">"RET"</span>)
  'scimax/org-return)
</pre>
</div>

<p>
Here are a few tests:
</p>


<ol class="org-ol">
<li>numbered item</li>
<li>second item
<ol class="org-ol">
<li>nested number</li>
<li>second number</li>
</ol></li>
</ol>


<ul class="org-ul">
<li>unordered 1</li>
<li>unordered 2
<ul class="org-ul">
<li>nested</li>
<li>nested 2
<ul class="org-ul">
<li>nested with link: <a href="http://emacs.stackexchange.com">http://emacs.stackexchange.com</a></li>
</ul></li>
</ul></li>
</ul>


<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> check 1</li>
<li class="off"><code>[&#xa0;]</code> check 2</li>
<li class="off"><code>[&#xa0;]</code> check 3</li>
</ul>


<div class="inlinetask">
<b>an inline task</b><br />
<p>
With some content
</p>
</div>


<div id="outline-container-orga3d5369" class="outline-2">
<h2 id="orga3d5369"><span class="section-number-2">1</span> a subheading</h2>
</div>

<div id="outline-container-orgfdefee8" class="outline-2">
<h2 id="orgfdefee8"><span class="section-number-2">2</span> another Subheading</h2>
</div>
<p>Copyright (C) 2017 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p>
<p><a href="/org/2017/04/09/A-better-return-in-org-mode.org">org-mode source</a></p>
<p>Org-mode version = 9.0.5</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2017/04/09/A-better-return-in-org-mode#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Object-oriented-font-locking-in-emacs-lisp"></div>
      <h2 class="blog_post_title"><a href="/blog/2017/04/07/Object-oriented-font-locking-in-emacs-lisp/" rel="bookmark" title="Permanent Link to Object-oriented font-locking in emacs-lisp">Object-oriented font-locking in emacs-lisp</a></h2>
      <p><small><span class="blog_post_date">Posted April 07, 2017 at 03:00 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/fontlock/'>fontlock</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2017/04/07/Object-oriented-font-locking-in-emacs-lisp#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga752041">1. Font-locking the elements</a></li>
<li><a href="#org4b6ed31">2. Summary</a></li>
</ul>
</div>
</div>
<p>
I have been interested in functional text for a long time. With functional text you can read it, but also interact with it <a class='org-ref-reference' href="#kitchin-2015-examp">kitchin-2015-examp</a>. Lately I have been thinking about how to use some features of object-oriented programming to functional text. The premise is to use an object hierarchy to encapsulate some knowledge, and provide <i>functionality</i> on the objects. We can use inheritance to customize some of this knowledge and functionality.
</p>

<p>
The example I will work out here is to provide functional text for chemical elements. The goal is to define some objects that represent elements, and construct font-lock rules from the objects to make the text functional in Emacs. Functional here means it stands out so we know there is something special about it, it has a tooltip to get some information (like what type of element it is, and its atomic mass), and it is clickable to get more functionality.
</p>

<p>
This post will make a lot more sense in this video: <a href="https://www.youtube.com/watch?v=IWxCj5cr8rY">https://www.youtube.com/watch?v=IWxCj5cr8rY</a>
</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/IWxCj5cr8rY" frameborder="0" allowfullscreen></iframe>

<p>
First, we create a base class of an Element. I use an instance tracker for this to make book keeping easy later. The base class will have a name, synonyms for the name, and a default face to color it. We define a few methods to get an atomic mass and search google for the element. Finally, we provide a function to generate a tooltip, and a font-lock rule.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">atomic-masses</span> '((<span style="color: #008000;">"Hydrogen"</span> . 1.008)
                        (<span style="color: #008000;">"Argon"</span> . 39.948)
                        (<span style="color: #008000;">"Sodium"</span> . 22.989)
                        (<span style="color: #008000;">"Palladium"</span> . 106.42))
  <span style="color: #036A07;">"a-list of atomic masses."</span>)

(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">elements</span> '() <span style="color: #036A07;">"List of known elements"</span>)
(<span style="color: #0000FF;">setq</span> elements '()) <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">this is to start over</span>

(<span style="color: #0000FF;">defclass</span> <span style="color: #6434A3;">element</span> (eieio-instance-tracker)
  ((tracking-symbol <span style="color: #006FE0;">:initform</span> elements
                    <span style="color: #006FE0;">:documentation</span> <span style="color: #036A07;">"Variable that holds all class instances."</span>)
   (name <span style="color: #006FE0;">:initarg</span> <span style="color: #006FE0;">:name</span>
         <span style="color: #006FE0;">:documentation</span> <span style="color: #036A07;">"The name of the element"</span>)
   (synonyms <span style="color: #006FE0;">:initarg</span> <span style="color: #006FE0;">:synonyms</span> <span style="color: #006FE0;">:initform</span> '()
             <span style="color: #006FE0;">:documentation</span> <span style="color: #036A07;">"List of regular expressions that match the element."</span>)
   (face <span style="color: #006FE0;">:initarg</span> <span style="color: #006FE0;">:face</span> <span style="color: #006FE0;">:initform</span> 'font-lock-type-face
         <span style="color: #006FE0;">:documentation</span> <span style="color: #036A07;">"The face to use with font-lock."</span>))
  <span style="color: #036A07;">"Base class for a chemical element."</span>)

(<span style="color: #0000FF;">defmethod</span> <span style="color: #006699;">element-atomic-mass</span> ((x element))
  <span style="color: #036A07;">"Return atomic mass from `</span><span style="color: #D0372D;">atomic-masses</span><span style="color: #036A07;">'."</span>
  (cdr (assoc (<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:name</span>) atomic-masses)))

(<span style="color: #0000FF;">defmethod</span> <span style="color: #006699;">element-help-echo</span> ((x element))
  <span style="color: #036A07;">"A tooltip for the element.</span>
<span style="color: #036A07;">It will look like class (inherited classes) mass=atomic-mass"</span>
  (format <span style="color: #008000;">"%s %s: mass=%s"</span>
          (eieio-object-class x)
          (mapcar 'eieio-class-name (eieio-class-parents (eieio-object-class x)))
          (<span style="color: #0000FF;">or</span> (element-atomic-mass x) <span style="color: #008000;">"unknown"</span>)))

(<span style="color: #0000FF;">defmethod</span> <span style="color: #006699;">element-search</span> ((x element))
  <span style="color: #036A07;">"Search google for the element"</span>
  (google-this-string nil (<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:name</span>) t))

(<span style="color: #0000FF;">defmethod</span> <span style="color: #006699;">element-font-lock-rule</span> ((x element))
  <span style="color: #036A07;">"Return font-lock rule for the element."</span>
  (<span style="color: #0000FF;">let</span> ((map (make-sparse-keymap)))
    (define-key map [mouse-1]
      (<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #036A07;">"Construct the object and run `</span><span style="color: #D0372D;">element-search</span><span style="color: #036A07;">' on it."</span>
        (<span style="color: #0000FF;">interactive</span>)
        (element-search
         (eieio-instance-tracker-find
          (get-text-property (point) 'element-name)
          <span style="color: #006FE0;">:name</span> 'elements))))

    (list
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Construct the pattern to match</span>
     (rx-to-string `(: bow
                       (<span style="color: #0000FF;">or</span>  ,(<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:name</span>)
                            ,@(<span style="color: #0000FF;">loop</span> for sy in (<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:synonyms</span>)
                                    collect `(regexp ,sy)))
                       eow))
     0  <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">font-lock the whole match</span>
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">These are the properties to put on the matches</span>
     `(<span style="color: #0000FF;">quote</span> (face ,(<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:face</span>)
                   element-name ,(<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:name</span>)
                   local-map ,map
                   mouse-face 'highlight
                   help-echo ,(element-help-echo x))))))
</pre>
</div>

<p>
Now, we can define some sub-classes. These are families of elements. For a metal, we change the face. For noble gases, we override the help-echo function, and for alkali metals we override the search function. The point is that we can customize the behavior for different classes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defclass</span> <span style="color: #6434A3;">metal</span> (element)
  ((face <span style="color: #006FE0;">:initform</span> '(<span style="color: #006FE0;">:foreground</span> <span style="color: #008000;">"orange"</span> <span style="color: #006FE0;">:underline</span> t)))
  <span style="color: #036A07;">"Metal"</span>)

(<span style="color: #0000FF;">defclass</span> <span style="color: #6434A3;">noble-gas</span> (element)
  ()
  <span style="color: #036A07;">"A noble gas"</span>)

(<span style="color: #0000FF;">defmethod</span> <span style="color: #006699;">element-help-echo</span> ((x noble-gas))
  <span style="color: #036A07;">"I am not a common element."</span>)

(<span style="color: #0000FF;">defclass</span> <span style="color: #6434A3;">alkali</span> (element metal)
  ()
  <span style="color: #036A07;">"Alkali metal"</span>)

(<span style="color: #0000FF;">defmethod</span> <span style="color: #006699;">element-search</span> ((x alkali))
  (<span style="color: #0000FF;">let</span> ((visible-bell t))
    (beep)
    (message <span style="color: #008000;">"You clicked on an alkali metal: %s."</span> (<span style="color: #0000FF;">oref</span> x <span style="color: #006FE0;">:name</span>))))
</pre>
</div>

<p>
Now we can define some elements. These are all instances of each class. For some, we define synonyms, and alternate appearances. Note the synonyms are regular expressions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(element <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"Hydrogen"</span> <span style="color: #006FE0;">:synonyms</span> '(<span style="color: #008000;">"H"</span> <span style="color: #008000;">"[hH]ydrogen"</span>))

(noble-gas <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"Argon"</span> <span style="color: #006FE0;">:synonyms</span> '(<span style="color: #008000;">"Ar"</span>))

(alkali <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"Sodium"</span> <span style="color: #006FE0;">:synonyms</span> '(<span style="color: #008000;">"Na"</span> <span style="color: #008000;">"[nN]atrium"</span>))
(alkali <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"Potassium"</span> <span style="color: #006FE0;">:synonyms</span> '(<span style="color: #008000;">"K"</span>) <span style="color: #006FE0;">:face</span> '(<span style="color: #006FE0;">:foreground</span> <span style="color: #008000;">"red"</span>))

(metal <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"Palladium"</span>)
</pre>
</div>

<p>
The instance tracker shows us the defined objects.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">elements
</pre>
</div>

<div id="outline-container-orga752041" class="outline-2">
<h2 id="orga752041"><span class="section-number-2">1</span> Font-locking the elements</h2>
<div class="outline-text-2" id="text-1">
<p>
Here we generate font-lock rules from the set of objects. Each object will return its font-lock rule, so we just map over each object to get the list of rules.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(font-lock-add-keywords
 nil
 (mapcar 'element-font-lock-rule elements))

(font-lock-fontify-buffer)
</pre>
</div>


<p>
Now any time we have Palladium or Hydrogen it will be highlighted.  And Sodium and Argon.
</p>

<p>
Here are some synonyms: hydrogen H Natrium natrium.
</p>

<p>
Potassium has a different color than Na.
</p>
</div>
</div>

<div id="outline-container-org4b6ed31" class="outline-2">
<h2 id="org4b6ed31"><span class="section-number-2">2</span> Summary</h2>
<div class="outline-text-2" id="text-2">
<p>
This seems like a pretty useful way to encapsulate functionality for functional text. Clearly most of the work should go in the base class, and the inheritance model, so you do not have to repeat things unnecessarily. Some features are missing, like conveniently adding synonyms and regenerating the font-lock rules. It is also the case that we do not persist these objects. They could be written to disk so that they can be reloaded later.
</p>

<p>
The actions you can use on a highlighted word are pretty limited in this implementation. It would be nice if you got a menu of options that was user extendable and dynamic. Either a popup menu, or a hydra would be fine.
</p>
</div>
</div>
<p>Copyright (C) 2017 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p>
<p><a href="/org/2017/04/07/Object-oriented-font-locking-in-emacs-lisp.org">org-mode source</a></p>
<p>Org-mode version = 9.0.5</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2017/04/07/Object-oriented-font-locking-in-emacs-lisp#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
 <a href="../2">Next Page »</a>

          </div>
          <div id="sidebar" class="grid_4">
            <aside>
<section>
<script>
  (function() {
    var cx = '002533177287215655227:l7uvu35ssbc';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</section>

<section>
    <h1 class="post_header_gradient theme_font">Twitter</h1>
    <a class="twitter-timeline" href="https://twitter.com/johnkitchin" data-widget-id="545217643582881792">Tweets by @johnkitchin</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


  <section>
    <h1 class="post_header_gradient theme_font">Links</h1>
    <ul>
      <li><a href="https://www.continuum.io">Anaconda Python</a></li>
      <li><a href="/pycse">Pycse</a></li>
      <li><a href="/dft-book">DFT-book</a></li>
    </ul>
  </section>

  <section>
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/blog/2017/04/16/A-callable-plist-data-structure-for-Emacs/">A callable plist data structure for Emacs</a></li>
      <li><a href="/blog/2017/04/15/A-new-org-mode-exporter-to-Word-for-scimax/">A new org-mode exporter to Word for scimax</a></li>
      <li><a href="/blog/2017/04/11/Autoformatting-ordinal-numbers-and-fractions-in-orgmode/">Autoformatting ordinal numbers and fractions in orgmode</a></li>
      <li><a href="/blog/2017/04/09/A-better-return-in-org-mode/">A better return in org-mode</a></li>
      <li><a href="/blog/2017/04/07/Object-oriented-font-locking-in-emacs-lisp/">Object-oriented font-locking in emacs-lisp</a></li>
    </ul>
  </section>

<section>
<h1 class="post_header_gradient theme_font">Latest GitHub Repos</h1>
  <a href="https://github.com/jkitchin">@jkitchin</a> on GitHub.
  <ul id="my-github-projects">
        <li class="loading">Status updating&#8230;</li>
  </ul>

</section>
</aside>

          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/blog/feed/index.xml">RSS</a>
        <a href="http://kitchinresearchgroup.disqus.com/latest.rss">Comments RSS Feed</a>.
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2017
        John Kitchin
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery.tweet.js"></script>  
  <script src="/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
  <script>
      var _gaq=[['_setAccount','UA-35731398-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
  <script>
  (function() {
      var links = document.getElementsByTagName('a');
      var query = '?';
      for(var i = 0; i < links.length; i++) {
          if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
      }
      document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/kitchinresearchgroup/get_num_replies.js' + query + '"></' + 'script>');
  })();
  </script>

  </body>
</html>






<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/js/git.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
     $("#my-github-projects").loadRepositories("jkitchin");
    });
</script>



