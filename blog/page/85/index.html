

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Kitchin Research Group</title>
  <meta name="google-site-verification" content="CGcacJdHc2YoZyI0Vey9XRA5qwhhFDzThKJezbRFcJ4" />
  <meta name="description" content="Chemical Engineering at Carnegie Mellon University">
  <meta name="author" content="John Kitchin">
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="/blog/feed/atom" />
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/base.css?v=1">
  <link rel="stylesheet" href="/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld" href="/css/handheld.css?v=1">
  <link rel="stylesheet" href="/css/pygments_murphy.css" type="text/css" />

  <script src="/js/libs/modernizr-1.7.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
  <link rel="stylesheet" href="/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
<div id="header" class="header_gradient theme_font">
<table><tr><td>
    <h1><a href="/">The Kitchin Research Group</a></h1>
    <h2>Chemical Engineering at Carnegie Mellon University</h2>
</td>
<td colspan=100%><div style="float:right;width:100%;text-align:right;"> <span id='badgeCont737515' style='width:126px'><script src='http://labs.researcherid.com/mashlets?el=badgeCont737515&mashlet=badge&showTitle=false&className=a&rid=A-2363-2010'></script></span></div>
</td></tr>
</table>
</div>
  <div id="navigation" class="grid_12">

    <ul class="theme_font">
      <li><a href="/blog"
             class="">Blog</a></li>

      <li><a href="/blog/archive"
             class="">Archives</a></li>

      <li><a href="/publications.html">Publications</a></li>

      <li><a href="/research.html"
             class="">Research</a></li>

      <li><a href="/categories.html"
             class="">Categories</a></li>

      <li><a href="/about.html"
             class="">About us</a></li>

      <li><a href="/subscribe.html">Subscribe</a></li>

    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_8">
            
  





<article>
  <div class="blog_post">
    <header>
      <div id="Git-archives-for-data-sharing"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/10/26/Git-archives-for-data-sharing/" rel="bookmark" title="Permanent Link to Git archives for data sharing">Git archives for data sharing</a></h2>
      <p><small><span class="blog_post_date">Posted October 26, 2013 at 06:49 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/data/'>data</a></span> | tags: 
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. A molecule</a></li>
<li><a href="#sec-2">2. A bulk calculation</a></li>
<li><a href="#sec-3">3. Analysis via the JSON files</a></li>
<li><a href="#sec-4">4. Create the archive file</a></li>
<li><a href="#sec-5">5. Summary</a></li>
</ul>
</div>
</div>
<p>
in some past posts we have looked at <a href="http://jkitchin.github.io/blog/2013/10/22/Sharing-data-via-JSON-files/">constructing</a> JSON files for data sharing. While functional, that approach requires some extra work to create the data files for sharing, and may not be useful for all sorts of data. For instance you may not want to store electron density in a JSON file. 
</p>

<p>
Here we consider using <a href="http://git-scm.com/book/ch5-3.html#Preparing-a-Release">git archives</a> for packaging exactly the data you used in the same hierarchy as on your file system. The idea is to store your work in a git repository. You commit any data files you would want to share, and then create an archive of that data. This enables you to control what gets shared, while keeping the data that should not be shared out of the archive. 
</p>

<p>
We will run a few VASP calculations, and summarize each one in a JSON file. We will commit those JSON files to the git repository, and finally make a small archive that contains them.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> A molecule</h2>
<div class="outline-text-2" id="text-1">
<p>
Calculate the total energy of a CO molecule.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">from</span> ase <span style="color: #8b0000;">import</span> Atoms, Atom
<span style="color: #8b0000;">from</span> jasp <span style="color: #8b0000;">import</span> *
<span style="color: #8b0000;">import</span> numpy <span style="color: #8b0000;">as</span> np
<span style="color: #8b0000;">import</span> json
np.set_printoptions(precision=3, suppress=<span style="color: #cd0000;">True</span>)

<span style="color: #8b008b;">co</span> = Atoms([Atom(<span style="color: #228b22;">'C'</span>,[0,   0, 0]),
            Atom(<span style="color: #228b22;">'O'</span>,[1.2, 0, 0])],
            cell=(6., 6., 6.))

<span style="color: #8b0000;">with</span> jasp(<span style="color: #228b22;">'molecules/simple-co'</span>, <span style="color: #ff0000; font-weight: bold;">#</span><span style="color: #ff0000; font-weight: bold;">output dir</span>
          xc=<span style="color: #228b22;">'PBE'</span>,  <span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">the exchange-correlation functional</span>
          nbands=6,  <span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">number of bands</span>
          encut=350, <span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">planewave cutoff</span>
          ismear=1,  <span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">Methfessel-Paxton smearing</span>
          sigma=0.01,<span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">very small smearing factor for a molecule</span>
          atoms=co) <span style="color: #8b0000;">as</span> calc:
    <span style="color: #8b0000;">print</span> <span style="color: #228b22;">'energy = {0} eV'</span>.<span style="color: #cd0000;">format</span>(co.get_potential_energy())
    <span style="color: #8b0000;">print</span> co.get_forces()
    <span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'JSON'</span>, <span style="color: #228b22;">'wb'</span>) <span style="color: #8b0000;">as</span> f:
        f.write(json.dumps(calc.<span style="color: #cd0000;">dict</span>))
    os.system(<span style="color: #228b22;">'git add JSON'</span>)
</pre>
</div>

<pre class="example">
energy = -14.687906 eV
[[ 5.095  0.     0.   ]
 [-5.095  0.     0.   ]]
</pre>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> A bulk calculation</h2>
<div class="outline-text-2" id="text-2">
<p>
Now we run a bulk calculation
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">from</span> jasp <span style="color: #8b0000;">import</span> *

<span style="color: #8b0000;">from</span> ase <span style="color: #8b0000;">import</span> Atom, Atoms

<span style="color: #8b008b;">atoms</span> = Atoms([Atom(<span style="color: #228b22;">'Cu'</span>,  [0.000,      0.000,      0.000])],
              cell=  [[ 1.818,  0.000,  1.818],
                      [ 1.818,  1.818,  0.000],
                      [ 0.000,  1.818,  1.818]])

<span style="color: #8b0000;">with</span> jasp(<span style="color: #228b22;">'bulk/alloy/cu'</span>,
          xc=<span style="color: #228b22;">'PBE'</span>,
          encut=350,
          kpts=(13,13,13),
          nbands=9,
          ibrion=2,
          isif=4,
          nsw=10,
          atoms=atoms) <span style="color: #8b0000;">as</span> calc:
    <span style="color: #8b0000;">print</span> atoms.get_potential_energy()
    <span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'JSON'</span>, <span style="color: #228b22;">'wb'</span>) <span style="color: #8b0000;">as</span> f:
        f.write(json.dumps(calc.<span style="color: #cd0000;">dict</span>))
    os.system(<span style="color: #228b22;">'git add JSON'</span>)
</pre>
</div>

<pre class="example">
-3.723306
</pre>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Analysis via the JSON files</h2>
<div class="outline-text-2" id="text-3">
<p>
This analysis is independent of <code>jasp</code> and therefore is portable
</p>

<p>
We can retrieve the bulk data
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> json

<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'bulk/alloy/cu/JSON'</span>, <span style="color: #228b22;">'rb'</span>) <span style="color: #8b0000;">as</span> f:
    <span style="color: #8b008b;">d</span> = json.loads(f.read())
    <span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'data'</span>][<span style="color: #228b22;">'total_energy'</span>]
</pre>
</div>

<pre class="example">
-3.723306
</pre>

<p>
Or the molecule data:
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> json

<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'molecules/simple-co/JSON'</span>, <span style="color: #228b22;">'rb'</span>) <span style="color: #8b0000;">as</span> f:
    <span style="color: #8b008b;">d</span> = json.loads(f.read())
    <span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'data'</span>][<span style="color: #228b22;">'total_energy'</span>]
</pre>
</div>

<pre class="example">
-14.687906
</pre>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Create the archive file</h2>
<div class="outline-text-2" id="text-4">
<p>
As you do your work, you add and commit files as needed. For this project all that needs to be shared are the JSON files, and the scripts (which are in this document) that we used to run the calculations and do the analysis. If we are satisfied with the state of the git repository, we create an archive like this:
</p>

<div class="org-src-container">

<pre class="src src-sh">git archive --format zip HEAD -o archive.zip
</pre>
</div>

<p>
Here is the result: <a href="/media/2013-10-26-Git-archives-for-data-sharing/archive.zip">archive.zip</a> .
</p>

<p>
You can download the zip file, unzip it, and rerun the analysis to extract the total energies on any system with a modern Python installation.
</p>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Summary</h2>
<div class="outline-text-2" id="text-5">
<p>
This seems to be an easy way to share data from a single project, i.e. a single git repository. It isn't obvious how you would package data from multiple projects, or how you would run multiple projects in a single directory.
</p>
</div>
</div>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/10/26/Git-archives-for-data-sharing.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Share on Twitter</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<a href="https://twitter.com/search?q=https://kitchingroup.cheme.cmu.edu/blog/2013/10/26/Git-archives-for-data-sharing">Discuss on Twitter</a>

  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Hatched-symbols-in-matplotlib"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/10/26/Hatched-symbols-in-matplotlib/" rel="bookmark" title="Permanent Link to Hatched symbols in matplotlib">Hatched symbols in matplotlib</a></h2>
      <p><small><span class="blog_post_date">Posted October 26, 2013 at 02:35 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/plotting/'>plotting</a></span> | tags: 
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
I learned something new about matplotlib today: How to make hatched (patterned) symbols in a plot. Well, sort of. The scatter plot in matplotlib has a hatch keyword argument that specifies a pattern on the marker. Below, is an example that runs through a handful of hatch patterns, on randomly selected symbols.
</p>

<p>
Curiously, hatch is not a kwarg of the scatter function, but of <a href="http://matplotlib.org/api/collections_api.html#matplotlib.collections.Collection.set_hatch">collections</a> . Anyway, let us see how to get the hatched symbols.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> random
<span style="color: #8b0000;">import</span> numpy <span style="color: #8b0000;">as</span> np
<span style="color: #8b0000;">import</span> matplotlib.pyplot <span style="color: #8b0000;">as</span> plt

<span style="color: #8b008b;">patterns</span> = (<span style="color: #228b22;">'-'</span>, <span style="color: #228b22;">'+'</span>, <span style="color: #228b22;">'x'</span>, <span style="color: #228b22;">'\\'</span>, <span style="color: #228b22;">'*'</span>, <span style="color: #228b22;">'o'</span>, <span style="color: #228b22;">'O'</span>, <span style="color: #228b22;">'.'</span>, <span style="color: #228b22;">'/'</span>)
<span style="color: #8b008b;">markers</span> = <span style="color: #228b22;">'os&lt;^&gt;p*'</span>
<span style="color: #8b0000;">for</span> pattern <span style="color: #8b0000;">in</span> patterns:
    plt.scatter(np.random.uniform(size=(3,1)), np.random.uniform(size=(3,1)), s=1000,
                marker=random.choice(markers),
                facecolor=<span style="color: #228b22;">'white'</span>,
                hatch=3*pattern, label=pattern)

plt.legend(scatterpoints=1, loc=<span style="color: #228b22;">'best'</span>)
plt.savefig(<span style="color: #228b22;">'images/hatched-symbols.png'</span>)
</pre>
</div>


<div class="figure">
<p><img src="/media/2013-10-26-Hatched-symbols-in-matplotlib/hatched-symbols.png"> 
</p>
</div>

<p>
There are some other interesting things you can do with <a href="http://matplotlib.org/examples/pylab_examples/filledmarker_demo.html">filled markers</a> , <a href="http://matplotlib.org/examples/pylab_examples/contourf_hatching.html">hatched contours</a> and with <a href="http://matplotlib.org/examples/pylab_examples/hatch_demo.html">hatched bar graphs</a> . Note this hatching is specific to plt.scatter. It does not work with plt.plot.
</p>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/10/26/Hatched-symbols-in-matplotlib.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Share on Twitter</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<a href="https://twitter.com/search?q=https://kitchingroup.cheme.cmu.edu/blog/2013/10/26/Hatched-symbols-in-matplotlib">Discuss on Twitter</a>

  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Writing-exams-in-org-mode"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/10/23/Writing-exams-in-org-mode/" rel="bookmark" title="Permanent Link to Writing exams in org-mode">Writing exams in org-mode</a></h2>
      <p><small><span class="blog_post_date">Posted October 23, 2013 at 03:54 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a></span> | tags: 
      <p><small><span class="blog_post_date">Updated October 23, 2013 at 06:26 PM</span></small>
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. The exam section</a>
<ul>
<li><a href="#sec-1-1">1.1. Do you get it?</a></li>
<li><a href="#sec-1-2">1.2. Multipart question</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. Circle the best answer</a></li>
<li><a href="#sec-1-2-2">1.2.2. Describe a cat.</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Essay question</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Back to the grade table construction</a></li>
<li><a href="#sec-3">3. building the pdf</a></li>
</ul>
</div>
</div>
<p>
There are a few aspects of writing exams that are tedious the way I normally do it. Typically I write exams in Word because I can easily see the layout, how much whitespace there is to write answers in, etc&#x2026; I like to put a gradesheet on the final page which lists each problem, the points it is worth, and a blank to put the grade for that problem into.  It is tedious to go back through 10 pages of questions to look up all the points, enter them in, add them up, etc&#x2026; And if I decide to renumber the questions or move them, it must be repeated.
</p>

<p>
Construction of the grade sheet ought to be automated. That is not going to happen in my hands in MS Word. I have seen this done in LaTeX in the Acrotex educational package, but I don't see myself hacking LaTeX any  time soon either. Enter org-mode. I could see writing the exam in org-mode, and writing some code to construct the grade table. 
</p>


<p>
The idea is that we would store the points in a PROPERTY of an org-heading. Then, to create the table, we just loop through the headlines, gather the levels and points, and then construct a table to put in the exported LaTeX. The next section contains some exam questions that will form the basis of this post.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> The exam section</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Do you get it?</h3>
<div class="outline-text-3" id="text-1-1">
<p>
What is the answer to the universe?
 \vspace{2cm} 
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Multipart question</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Circle the best answer</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
What is 1 + 1?
a) 2
b) 3
c) 4
</p>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Describe a cat.</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
\vspace{2cm} 
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Essay question</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Expound on the meaning of life.
 \vspace{3cm} 
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Back to the grade table construction</h2>
<div class="outline-text-2" id="text-2">
<p>
We will parse the buffer to get the headlines, and then extract some properties from each headline. For each headline that has points we will print the title and points it is worth,  and finally the total number of points.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq total-points 0)    <span style="color: #ff0000; font-weight: bold;">; </span><span style="color: #ff0000; font-weight: bold;">counter for the total points</span>

<span style="color: #ff0000; font-weight: bold;">;; </span><span style="color: #ff0000; font-weight: bold;">now loop over headlines</span>
(org-element-map 
    (org-element-parse-buffer 'headline) 'headline 
  <span style="color: #ff0000; font-weight: bold;">;; </span><span style="color: #ff0000; font-weight: bold;">function to print headline title and points</span>
  (<span style="color: #8b0000;">lambda</span> (headline) 
    (<span style="color: #8b0000;">let</span> ((points (org-element-property <span style="color: #cd0000;">:POINTS</span> headline))
          (title  (org-element-property <span style="color: #cd0000;">:title</span> headline)))
      (<span style="color: #8b0000;">if</span> points (<span style="color: #8b0000;">progn</span>
                   (setq total-points (+ total-points (string-to-number points)))
                   (princ (format <span style="color: #228b22;">"title=%s\nPOINTS=%s\n\n"</span> title points)))))))

(princ (format <span style="color: #228b22;">"Total points = %s"</span> total-points))
</pre>
</div>

<pre class="example">
title=Do you get it?
POINTS=5

title=Circle the best answer
POINTS=10

title=Describe a cat.
POINTS=4

title=Essay question
POINTS=25

Total points = 44
</pre>

<p>
That is the foundation for the grade table. What I would like is the grade table to be structured like this:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">problem</td>
<td class="left">Points</td>
<td class="left">grade</td>
</tr>

<tr>
<td class="left">ref to heading</td>
<td class="left">#points</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Where the <code>ref to heading</code> is the same number as the actual heading. During the export, labels are generated for each section, which we could refer to. To take advantage of this we need to figure out what the labels are, so we can refer to them. 
</p>

<p>
After quite a bit of hackery, I figured out how to access this information <sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>. It is not readily apparent this is how to do it, but it works!
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8b0000;">let*</span> ((info (org-export-collect-tree-properties (org-element-parse-buffer 'headline) '()))
       (headline-numbering (plist-get info <span style="color: #cd0000;">:headline-numbering</span>)))
(org-element-map (plist-get info <span style="color: #cd0000;">:parse-tree</span>) 'headline
  (<span style="color: #8b0000;">lambda</span> (headline) 
    (format <span style="color: #228b22;">"\\ref{sec-%s}"</span> (mapconcat 
                      (<span style="color: #8b0000;">lambda</span> (x) (format <span style="color: #228b22;">"%s"</span> x)) (cdr (assoc headline headline-numbering)) <span style="color: #228b22;">"-"</span>)))))
</pre>
</div>

<pre class="example">
("\\ref{sec-1}" "\\ref{sec-2}" "\\ref{sec-2-1}" "\\ref{sec-2-2}" "\\ref{sec-2-2-1}" "\\ref{sec-2-2-2}" "\\ref{sec-2-3}" "\\ref{sec-3}" "\\ref{sec-}")
</pre>


<p>
So, let us try putting this all together <sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq total-points 0)    <span style="color: #ff0000; font-weight: bold;">; </span><span style="color: #ff0000; font-weight: bold;">counter for the total points</span>
(princ <span style="color: #228b22;">"#+caption: The grade table\n"</span>)
(princ <span style="color: #228b22;">"#+attr_latex: :align |c|c|c|\n"</span>)
(princ <span style="color: #228b22;">"|-\n"</span>)
(princ <span style="color: #228b22;">"|Problem|Possible Points|Points earned|\n|-\n"</span>)
(<span style="color: #8b0000;">let*</span> ((info (org-export-collect-tree-properties (org-element-parse-buffer 'headline) '()))
       (headline-numbering (plist-get info <span style="color: #cd0000;">:headline-numbering</span>)))
  (org-element-map (plist-get info <span style="color: #cd0000;">:parse-tree</span>) 'headline
    (<span style="color: #8b0000;">lambda</span> (headline) 
      (<span style="color: #8b0000;">let</span> ((ref (format <span style="color: #228b22;">"\\ref{sec-%s}"</span> (mapconcat 
                                          (<span style="color: #8b0000;">lambda</span> (x) (format <span style="color: #228b22;">"%s"</span> x)) (cdr (assoc headline headline-numbering)) <span style="color: #228b22;">"-"</span>)))
            (points (org-element-property <span style="color: #cd0000;">:POINTS</span> headline)))
        (<span style="color: #8b0000;">if</span> points (<span style="color: #8b0000;">progn</span>
                     (setq total-points (+ total-points (string-to-number points)))
                     (princ (format <span style="color: #228b22;">"|%s|%s|  |\n|-\n"</span> ref points))))))))

(princ (format <span style="color: #228b22;">"| |Total points| %s|\n"</span> total-points))
(princ <span style="color: #228b22;">"|-\n"</span>)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 1:</span> The grade table</caption>

<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Problem</th>
<th scope="col" class="right">Possible Points</th>
<th scope="col" class="left">Points earned</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">\ref{sec-1-1-1}</td>
<td class="right">5</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">\ref{sec-1-1-2-1}</td>
<td class="right">10</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">\ref{sec-1-1-2-2}</td>
<td class="right">4</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">\ref{sec-1-1-3}</td>
<td class="right">25</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="right">Total points</td>
<td class="left">44</td>
</tr>
</tbody>
</table>

<p>
Note this table gets munged by Mathjax in HTML. I am not sure that is fixable. You can open the <a href="/media/2013-10-23-Writing-exams-in-org-mode/writing-exams-in-orgmode.pdf">pdf</a> and see the results.
</p>

<p>
This works ok. There is still some work to be done. For example the boxes in the grade table are not very large. The references are a little odd in this case, but that is an artifact of the fact that you cannot nest a section deeper than 3 levels in LaTeX without some work, and I nested my exam section in a second level heading so it would appear in the blog post. A real application of this would not have all these other sections, and would not export the build section. It is a tad tedious to hand build the table, but not too bad. 
</p>

<p>
It might be better to use CUSTOM_ID labels in the sections, rather than try to build up the references. You still need to think about what the labels would be, and we are used to seeing numbers!
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> building the pdf</h2>
<div class="outline-text-2" id="text-3">
<p>
I have gotten in the habit of building the latex file from commands, and manually running them with C-c C-c.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8b0000;">let</span> ((org-latex-default-packages-alist
       '((<span style="color: #228b22;">""</span> <span style="color: #228b22;">"minted"</span> nil)
         (<span style="color: #228b22;">"linktocpage,</span>
<span style="color: #228b22;">  pdfstartview=FitH,</span>
<span style="color: #228b22;">  colorlinks,</span>
<span style="color: #228b22;">  linkcolor=blue,</span>
<span style="color: #228b22;">  anchorcolor=blue,</span>
<span style="color: #228b22;">  citecolor=blue,</span>
<span style="color: #228b22;">  filecolor=blue,</span>
<span style="color: #228b22;">  menucolor=blue,</span>
<span style="color: #228b22;">  urlcolor=blue"</span> <span style="color: #228b22;">"hyperref"</span> t)))
      (async nil)
      (subtreep nil)
      (visible-only nil)
      (body-only nil))

  (org-latex-export-to-latex async subtreep visible-only body-only '()))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8b0000;">progn</span>
  (shell-command <span style="color: #228b22;">"pdflatex -shell-escape writing-exams-in-orgmode"</span>)
  (shell-command <span style="color: #228b22;">"pdflatex -shell-escape writing-exams-in-orgmode"</span>))
</pre>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p>
This code does not generate correct labels for headlines with TODO in them, or for footnotes.
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p>
Note this table gets munged by Mathjax in HTML.
</p></div>


</div>
</div><p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/10/23/Writing-exams-in-org-mode.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Share on Twitter</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<a href="https://twitter.com/search?q=https://kitchingroup.cheme.cmu.edu/blog/2013/10/23/Writing-exams-in-org-mode">Discuss on Twitter</a>

  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Sharing-data-via-JSON-files"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/10/22/Sharing-data-via-JSON-files/" rel="bookmark" title="Permanent Link to Sharing data via JSON files">Sharing data via JSON files</a></h2>
      <p><small><span class="blog_post_date">Posted October 22, 2013 at 02:39 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/dft/'>dft</a>, <a href='/blog/category/ase/'>ase</a></span> | tags: 
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Summary</a></li>
</ul>
</div>
</div>
<p>
In a previous <a href="http://jkitchin.github.io/blog/2013/10/19/Serializing-jasp-calculations-as-json-data/">post</a> I discussed how to represent a single DFT calculation in a JSON file that could easily be shared, and reanalyzed. Here I look at sharing a series of calculations. I had previously run calculations to analyze an equation of state for Cu. Here we create a list of the JSON representations of each calculation, and save it in one overall JSON file. We will give the data some structure and documentation. JSON represents dictionaries very well, so we build a dictionary of the results and then "dump" that dictionary to a JSON file.
</p>


<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">from</span> jasp <span style="color: #8b0000;">import</span> *

<span style="color: #8b008b;">LC</span> = [3.5, 3.55, 3.6, 3.65, 3.7, 3.75]

<span style="color: #8b008b;">data</span> = {<span style="color: #228b22;">'doc'</span>:<span style="color: #228b22;">'JSON file containing a set of calculations for the equation of state of Cu'</span>}

<span style="color: #8b008b;">data</span>[<span style="color: #228b22;">'calculations'</span>] = []

<span style="color: #8b0000;">for</span> a <span style="color: #8b0000;">in</span> LC:
    <span style="color: #8b0000;">with</span> jasp(<span style="color: #228b22;">'../bulk/Cu-{0}'</span>.<span style="color: #cd0000;">format</span>(a)) <span style="color: #8b0000;">as</span> calc:
        data[<span style="color: #228b22;">'calculations'</span>].append(calc.<span style="color: #cd0000;">dict</span>)

<span style="color: #8b0000;">import</span> json
<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'eos.json'</span>, <span style="color: #228b22;">'wb'</span>) <span style="color: #8b0000;">as</span> f:
    f.write(json.dumps(data))
</pre>
</div>

<p>
Now, you can view this <a href="/media/2013-10-22-Sharing-data-via-JSON-files/eos.json">eos.json</a> file, and analyze it yourself as follows. In python we read the file in and convert it to a data structure using the <code>json</code> module.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> json

<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'eos.json'</span>, <span style="color: #228b22;">'rb'</span>) <span style="color: #8b0000;">as</span> f:
    <span style="color: #8b008b;">d</span> = json.loads(f.read())

<span style="color: #8b008b;">volumes</span> =  [entry[<span style="color: #228b22;">'data'</span>][<span style="color: #228b22;">'volume'</span>] <span style="color: #8b0000;">for</span> entry <span style="color: #8b0000;">in</span> d[<span style="color: #228b22;">'calculations'</span>]]
<span style="color: #8b008b;">energies</span> = [entry[<span style="color: #228b22;">'data'</span>][<span style="color: #228b22;">'total_energy'</span>] <span style="color: #8b0000;">for</span> entry <span style="color: #8b0000;">in</span> d[<span style="color: #228b22;">'calculations'</span>]]

<span style="color: #8b0000;">import</span> matplotlib.pyplot <span style="color: #8b0000;">as</span> plt
plt.plot(volumes, energies)
plt.xlabel(<span style="color: #228b22;">'Volume ($\AA$)'</span>)
plt.ylabel(<span style="color: #228b22;">'Total energy (eV)'</span>)
plt.savefig(<span style="color: #228b22;">'eos-from-json.png'</span>)
plt.show()
</pre>
</div>

<p>
If you wanted to do further analysis you could. Suppose you wanted to know more detail about how that calculation was done? You can retrieve the INCAR, KPOINT, and POTCAR details for each calculation. Any parameter not listed here was not specified in the calculations.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> json

<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'eos.json'</span>, <span style="color: #228b22;">'rb'</span>) <span style="color: #8b0000;">as</span> f:
    <span style="color: #8b008b;">d</span> = json.loads(f.read())

<span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">print details for the first calculation in the list</span>
<span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'incar'</span>]
<span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'input'</span>]
<span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'potcar'</span>]
</pre>
</div>

<pre class="example">
{u'doc': u'INCAR parameters', u'nbands': 9, u'encut': 350.0, u'prec': u'Normal'}
{u'kpts': [8, 8, 8], u'reciprocal': False, u'xc': u'PBE', u'kpts_nintersections': None, u'setups': None, u'txt': u'-', u'gamma': False}
[[u'Cu', u'potpaw_PBE/Cu/POTCAR', u'a44c591415026f53deb16a99ca3f06b1e69be10b']]
</pre>

<p>
The POTCAR information contains the species, the path to the POTCAR, and a git-hash of the POTCAR file. That way you can tell if you used exactly the same file that I did. You can compute a git hash like <a href="http://git-scm.com/book/en/Git-Internals-Git-Objects#Object-Storage">this</a> :
</p>

<div class="org-src-container">

<pre class="src src-sh">cat /home-research/jkitchin/src/vasp/potpaw_PBE/Cu/POTCAR | git hash-object --stdin
</pre>
</div>

<pre class="example">
a44c591415026f53deb16a99ca3f06b1e69be10b
</pre>

<p>
If you want to get the details of the geometry of some calculation, you do it this way:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> json

<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'eos.json'</span>, <span style="color: #228b22;">'rb'</span>) <span style="color: #8b0000;">as</span> f:
    <span style="color: #8b008b;">d</span> = json.loads(f.read())

<span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'atoms'</span>].keys()
<span style="color: #8b0000;">print</span> <span style="color: #228b22;">'cell = '</span>, d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'atoms'</span>][<span style="color: #228b22;">'cell'</span>]
<span style="color: #8b0000;">print</span> <span style="color: #228b22;">'syms = '</span>, d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'atoms'</span>][<span style="color: #228b22;">'symbols'</span>]
<span style="color: #8b0000;">print</span> <span style="color: #228b22;">'cpos = '</span>, d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'atoms'</span>][<span style="color: #228b22;">'positions'</span>]
</pre>
</div>

<pre class="example">
[u'cell', u'symbols', u'positions', u'pbc', u'tags']
cell =  [[1.75, 1.75, 0.0], [0.0, 1.75, 1.75], [1.75, 0.0, 1.75]]
syms =  [u'Cu']
cpos =  [[0.0, 0.0, 0.0]]
</pre>

<p>
You can do further analysis from there.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Summary</h2>
<div class="outline-text-2" id="text-1">
<p>
This looks ok as a data sharing mechanism. The json file here is pretty small (6.8 kb), and pretty easy to work with. Clearly some thought must go into how the data is structured so you know what to get, and how you get it. That could even be documented in the json file itself. For instance, each calculator has a doc element that describes what is in it. The json file we made above also has that data. 
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> json

<span style="color: #8b0000;">with</span> <span style="color: #cd0000;">open</span>(<span style="color: #228b22;">'eos.json'</span>, <span style="color: #228b22;">'rb'</span>) <span style="color: #8b0000;">as</span> f:
    <span style="color: #8b008b;">d</span> = json.loads(f.read())

<span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'doc'</span>]
<span style="color: #8b0000;">print</span>
<span style="color: #8b0000;">print</span> d[<span style="color: #228b22;">'calculations'</span>][0][<span style="color: #228b22;">'doc'</span>]
</pre>
</div>

<pre class="example">
JSON file containing a set of calculations for the equation of state of Cu

JSON representation of a VASP calculation.

energy is in eV
forces are in eV/\AA
stress is in GPa (sxx, syy, szz,  syz, sxz, sxy)
magnetic moments are in Bohr-magneton
The density of states is reported with E_f at 0 eV.
Volume is reported in \AA^3
Coordinates and cell parameters are reported in \AA

If atom-projected dos are included they are in the form:
{ados:{energy:data, {atom index: {orbital : dos}}}
</pre>

<p>
For archival purposes you may want to put a creation date, contact data, etc&#x2026; in the file too.
</p>
</div>
</div>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/10/22/Sharing-data-via-JSON-files.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Share on Twitter</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<a href="https://twitter.com/search?q=https://kitchingroup.cheme.cmu.edu/blog/2013/10/22/Sharing-data-via-JSON-files">Discuss on Twitter</a>

  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Enabling-right-clicks-in-org-mode-links"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/10/21/Enabling-right-clicks-in-org-mode-links/" rel="bookmark" title="Permanent Link to Enabling right-clicks in org-mode links">Enabling right-clicks in org-mode links</a></h2>
      <p><small><span class="blog_post_date">Posted October 21, 2013 at 07:58 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a></span> | tags: 
      <p><small><span class="blog_post_date">Updated October 21, 2013 at 08:45 PM</span></small>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
Out of the box you can click on org-mode links to make the do things. On my machine, all clicks are equal, left mouse, middle mouse, and right mouse all act as a "click". I was curious about whether I could get different behavior on a link with a left or right mouse click. It is easy enough to <a href="http://orgmode.org/manual/Adding-hyperlink-types.html">define a new link type</a> . You define a function that is run when you click on the link.
</p>

<p>
To figure out what to do here, I looked into the events handling in emacs. According to this <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Click-Events.html">page</a> , there are click events. So, after we click on a link, there should be a click event which was the last input event. We can get that, figure out which button was pressed, and run code accordingly. We will make the code add some lines to the buffer after the link about what happened.
</p>

<p>
Here is my link definition. 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq counter 1)
(org-add-link-type
 <span style="color: #228b22;">"test"</span>
 <span style="color: #ff0000; font-weight: bold;">;; </span><span style="color: #ff0000; font-weight: bold;">this function is run when you click</span>
 (<span style="color: #8b0000;">lambda</span> (link-string) 
   (<span style="color: #8b0000;">let</span> ((button (car last-input-event)))
     (<span style="color: #8b0000;">cond</span> ((eq button 'mouse-1) 
            (end-of-line)
            (insert (format <span style="color: #228b22;">"\nclick %s. mouse-1 pressed %s\n"</span> counter last-input-event))
            (setq counter (+ counter 1)))
           ((eq button 'mouse-2) 
            (end-of-line) 
            (insert (format <span style="color: #228b22;">"\nclick %s. mouse-2 pressed %s\n"</span> counter last-input-event))
            (setq counter (+ counter 1)))
           ((eq button 'mouse-3) 
            (end-of-line)
            (insert (format <span style="color: #228b22;">"\nclick %s. mouse-3 pressed %s\n"</span> counter last-input-event))
            (setq counter (+ counter 1))))))
 <span style="color: #ff0000; font-weight: bold;">;; </span><span style="color: #ff0000; font-weight: bold;">formatting</span>
(<span style="color: #8b0000;">lambda</span> (keyword desc format)
   (<span style="color: #8b0000;">cond</span>
    ((eq format 'html) (format <span style="color: #228b22;">"&lt;pre&gt;%s:%s&lt;/pre&gt;"</span> keyword desc)))))
</pre>
</div>


<p>
Here we make a link. When you click on it, it adds lines right after the link telling you what was clicked on. I left-clicked, middle-clicked and right-clicked. The right-clicked result is the first line.
</p>

<p>
<pre>test:which-button</pre> 
click 3. mouse-3 pressed (mouse-3 (#&lt;window 46 on blog.org&gt; 56959 (57 . 456) -320964819 nil 56959 (7 . 28) nil (1 . 8) (8 . 16)))
</p>

<p>
click 2. mouse-2 pressed (mouse-2 (#&lt;window 46 on blog.org&gt; 56959 (57 . 456) -320965724 nil 56959 (7 . 28) nil (1 . 8) (8 . 16)))
</p>

<p>
click 1. mouse-2 pressed (mouse-2 (#&lt;window 46 on blog.org&gt; 56959 (57 . 456) -320966660 nil 56959 (7 . 28) nil (1 . 8) (8 . 16)))
</p>


<p>
Curiously, this only shows that mouse-2 (for left or middle mouse) or mouse-3 (for right click) was pressed, never mouse-1. I am not sure what causes that. If I try to capture an event it does show mouse-1 is active.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(princ (read-event))
</pre>
</div>

<pre class="example">
(down-mouse-1 (#&lt;window 34 on blog.org&gt; 56437 (253 . 308) -322917920 nil 56437 (31 . 19) nil (93 . 4) (8 . 16)))
</pre>

<p>
Anyway, it looks conceivable that you could have different link actions occur for different mouse clicks. I could see using this in a citation link, where a left click might open the citation in my bibtex file, and right clicking would open a pdf of the citation if it existed. 
</p>

<p>
I have not figured out how flexible this might be, for example could you use modifier keys with mouse clicks? This code suggests that it is possible in emacs, but so far none of these make it into the last-input-event in the org-link clicks.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(princ (read-event))
</pre>
</div>

<pre class="example">
(S-down-mouse-1 (#&lt;window 34 on blog.org&gt; 56725 (1 . 299) -322897656 nil 56725 (0 . 18) nil (1 . 11) (8 . 16)))
</pre>

<p>
It might be difficult remembering all the modifiers and clicks, but it would be cool if it was possible!
</p>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/10/21/Enabling-right-clicks-in-org-mode-links.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Share on Twitter</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<a href="https://twitter.com/search?q=https://kitchingroup.cheme.cmu.edu/blog/2013/10/21/Enabling-right-clicks-in-org-mode-links">Discuss on Twitter</a>

  <hr class="interblog" />
 <a href="../84">« Previous Page</a>
  --  
 <a href="../86">Next Page »</a>

          </div>
          <div id="sidebar" class="grid_4">
            <aside>
<section>
<script>
  (function() {
    var cx = '002533177287215655227:l7uvu35ssbc';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</section>

<section>
    <h1 class="post_header_gradient theme_font">Twitter</h1>
    <a class="twitter-timeline" href="https://twitter.com/johnkitchin" data-widget-id="545217643582881792">Tweets by @johnkitchin</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


  <section>
    <h1 class="post_header_gradient theme_font">Links</h1>
    <ul>
      <li><a href="https://www.continuum.io">Anaconda Python</a></li>
      <li><a href="/pycse">Pycse</a></li>
      <li><a href="/dft-book">DFT-book</a></li>
    </ul>
  </section>

  <section>
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/blog/2025/10/02/New-publication-How-Electrolyte-pH-Affects-the-Oxygen-Reduction-Reaction/">New publication - How Electrolyte pH Affects the Oxygen Reduction Reaction</a></li>
      <li><a href="/blog/2025/09/27/New-publication-Uncertainty-Quantification-in-Graph-Neural-Networks-With-Shallow-Ensembles/">New publication - Uncertainty Quantification in Graph Neural Networks With    Shallow Ensembles</a></li>
      <li><a href="/blog/2025/09/16/New-publication-Towards-Agentic-Science-for-Advancing-Scientific-Discovery/">New publication - Towards Agentic Science for Advancing Scientific Discovery</a></li>
      <li><a href="/blog/2025/07/31/New-publication-Mapping-uncertainty-using-differentiable-programming/">New publication - Mapping uncertainty using differentiable programming</a></li>
      <li><a href="/blog/2025/07/17/New-publication-Spin-informed-universal-graph-neural-networks-for-simulating-magnetic-ordering/">New publication - Spin-informed universal graph neural networks for simulating magnetic ordering</a></li>
    </ul>
  </section>

<section>
<h1 class="post_header_gradient theme_font">Latest GitHub Repos</h1>
  <a href="https://github.com/jkitchin">@jkitchin</a> on GitHub.
  <ul id="my-github-projects">
        <li class="loading">Status updating&#8230;</li>
  </ul>

</section>
</aside>

          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/blog/feed/index.xml">RSS</a>
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2025
        John Kitchin
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery.tweet.js"></script>  
  <script src="/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
 
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PH8NF4F0RE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PH8NF4F0RE');
</script>


  </body>
</html>






<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/js/git.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
     $("#my-github-projects").loadRepositories("jkitchin");
    });
</script>



