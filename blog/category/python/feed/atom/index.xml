<?xml version="1.0" encoding="UTF-8"?>
<feed
  xmlns="http://www.w3.org/2005/Atom"
  xmlns:thr="http://purl.org/syndication/thread/1.0"
  xml:lang="en"
   >
  <title type="text">The Kitchin Research Group</title>
  <subtitle type="text">Chemical Engineering at Carnegie Mellon University</subtitle>

  <updated>2016-01-06T21:53:58Z</updated>
  <generator uri="http://blogofile.com/">Blogofile</generator>

  <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog" />
  <id>http://jkitchin.github.io/blog/feed/atom/</id>
  <link rel="self" type="application/atom+xml" href="http://jkitchin.github.io/blog/feed/atom/" />
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Asynchronously running python blocks in org-mode]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/11/20/Asynchronously-running-python-blocks-in-org-mode" />
    <id>http://jkitchin.github.io/blog/2015/11/20/Asynchronously-running-python-blocks-in-org-mode</id>
    <updated>2015-11-20T19:30:57Z</updated>
    <published>2015-11-20T11:46:45Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="orgmode" />
    <category scheme="http://jkitchin.github.io/blog" term="emacs" />
    <summary type="html"><![CDATA[Asynchronously running python blocks in org-mode]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/11/20/Asynchronously-running-python-blocks-in-org-mode"><![CDATA[


<p>
If you run long Python blocks from org-mode, you might want to keep working while it runs. Currently Emacs gets blocked and you have to wait patiently.  In this post we consider some ways to avoid this that run our code asynchronously, but still put results where they belong in the org-buffer.
</p>

<p>
This is a long post. You may want to see the video: <a href="https://www.youtube.com/watch?v=VDyoN8yipSE">https://www.youtube.com/watch?v=VDyoN8yipSE</a> , or skip to the <a href="#sec-3">end</a> where the best and final version is shown.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> The async module</h2>
<div class="outline-text-2" id="text-1">
<p>
Here we consider an approach that uses <a href="https://github.com/jwiegley/emacs-async">https://github.com/jwiegley/emacs-async</a> module. The idea is to tangle the Python block at point to a temp file, then asynchronously run it. We capture the output and put it back in the buffer. We use a uuid to find the place to put the results in org-mode format. Here is the code that implements this idea.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">async</span>)

(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-babel-async-execute</span> ()
  <span style="color: #036A07;">"Run a python block at point asynchrously."</span>
  (<span style="color: #0000FF;">interactive</span>)

  (<span style="color: #0000FF;">let</span> ((current-file (buffer-file-name))
        (uuid (org-id-uuid))
        (temporary-file-directory <span style="color: #008000;">"./"</span>)
        (tempfile (make-temp-file <span style="color: #008000;">"py-"</span>)))

    (org-babel-tangle '(4) tempfile)
    (org-babel-remove-result)
    (<span style="color: #0000FF;">save-excursion</span>
      (re-search-forward <span style="color: #008000;">"#\\+END_SRC"</span>)
      (insert (format
               <span style="color: #008000;">"\n\n#+RESULTS: %s\n: %s"</span>
               (<span style="color: #0000FF;">or</span> (org-element-property <span style="color: #006FE0;">:name</span> (org-element-context))
                   <span style="color: #008000;">""</span>)
               uuid)))

    (<span style="color: #0000FF;">async-start</span>
     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">what to start</span>
     `(<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">now we run the command then cleanup</span>
        (<span style="color: #0000FF;">prog1</span>
            (shell-command-to-string (format <span style="color: #008000;">"python %s"</span> ,tempfile))
          (delete-file ,tempfile)))

     `(<span style="color: #0000FF;">lambda</span> (result)
        <span style="color: #036A07;">"Code that runs when the async function finishes."</span>
        (<span style="color: #0000FF;">save-window-excursion</span>
          (<span style="color: #0000FF;">save-excursion</span>
            (<span style="color: #0000FF;">save-restriction</span>
              (<span style="color: #0000FF;">with-current-buffer</span> (find-file-noselect ,current-file)
                (goto-char (point-min))
                (re-search-forward ,uuid)
                (beginning-of-line)
                (kill-line)
                (insert (mapconcat
                         (<span style="color: #0000FF;">lambda</span> (x)
                           (format <span style="color: #008000;">": %s"</span> x))
                         (butlast (s-split <span style="color: #008000;">"\n"</span> result))
                         <span style="color: #008000;">"\n"</span>))))))))))
</pre>
</div>

<pre class="example">
org-babel-async-execute
</pre>

<p>
Here is a block to test it on. We can run the block, and keep on working while the code runs. The results seem to get inserted correctly at the right point even if I am in another window or frame! We don't get easy access to continuous output of the command. This wouldn't work if we close Emacs, but who does that?
</p>


<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">print</span> <span style="color: #008000;">'hello world'</span>
<span style="color: #0000FF;">import</span> time
time.sleep(5)

<span style="color: #0000FF;">import</span> os
<span style="color: #0000FF;">print</span> os.getcwd()
<span style="color: #0000FF;">print</span> time.asctime()
</pre>
</div>

<pre class="example">
hello world
/Users/jkitchin/blogofile-jkitchin.github.com/_blog
Fri Nov 20 10:17:53 2015
</pre>

<p>
There are some limitations to this approach. One of them is it assumes the src block is a stand-alone block that will run on its own. That is usually how I run mine, but I could see having other modules that should be tangled out of a file too. I think the script is being run in the current working directory, so it probably will find any local imports it needs.
</p>

<p>
You don't get any intermediate feedback on this process. It seems to be possible to do that with a different approach that puts some output in a new buffer, e.g. with start-process. But, you still need some clever code like the async model to know when to insert the results back into this buffer. We consider Emacs processes and sentinels next.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Emacs process approach with tangling</h2>
<div class="outline-text-2" id="text-2">
<p>
We can start a process in Emacs, and attach a sentinel function to it that runs after the process completes. Here is an example of that. We still tangle the src-block here.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-babel-async-execute</span> ()
  (<span style="color: #0000FF;">interactive</span>)
  (<span style="color: #0000FF;">let*</span> ((current-file (buffer-file-name))
        (uuid (org-id-uuid))
        (temporary-file-directory <span style="color: #008000;">"./"</span>)
        (tempfile (make-temp-file <span style="color: #008000;">"py-"</span>))
        (pbuffer (format <span style="color: #008000;">"*%s*"</span> uuid))
        process)

    (org-babel-tangle '(4) tempfile)
    (org-babel-remove-result)

    (<span style="color: #0000FF;">save-excursion</span>
      (re-search-forward <span style="color: #008000;">"#\\+END_SRC"</span>)
      (insert (format
               <span style="color: #008000;">"\n\n#+RESULTS: %s\n: %s"</span>
               (<span style="color: #0000FF;">or</span> (org-element-property <span style="color: #006FE0;">:name</span> (org-element-context))
                   <span style="color: #008000;">""</span>)
               uuid)))

    (<span style="color: #0000FF;">setq</span> process (start-process
                   uuid
                   pbuffer
                   <span style="color: #008000;">"python"</span>
                   tempfile))

    (set-process-sentinel
     process
     `(<span style="color: #0000FF;">lambda</span> (process event)
        (<span style="color: #0000FF;">when</span> (string= <span style="color: #008000;">"finished\n"</span> event)
          (delete-file ,tempfile)
          (<span style="color: #0000FF;">save-window-excursion</span>
            (<span style="color: #0000FF;">save-excursion</span>
              (<span style="color: #0000FF;">save-restriction</span>
                (<span style="color: #0000FF;">with-current-buffer</span> (find-file-noselect ,current-file)
                  (goto-char (point-min))
                  (re-search-forward ,uuid)
                  (beginning-of-line)
                  (kill-line)
                  (insert (mapconcat
                           (<span style="color: #0000FF;">lambda</span> (x)
                             (format <span style="color: #008000;">": %s"</span> x))
                           (split-string
                            (<span style="color: #0000FF;">with-current-buffer</span> ,pbuffer (buffer-string))
                            <span style="color: #008000;">"\n"</span>)
                           <span style="color: #008000;">"\n"</span>)))))))
        (kill-buffer ,pbuffer)))))
</pre>
</div>

<pre class="example">
org-babel-async-execute
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">print</span> <span style="color: #008000;">'hello world'</span>
<span style="color: #0000FF;">import</span> time
time.sleep(10)

<span style="color: #0000FF;">import</span> os
<span style="color: #0000FF;">print</span> os.getcwd()
<span style="color: #0000FF;">print</span> time.asctime()
</pre>
</div>

<pre class="example">
hello world
/Users/jkitchin/blogofile-jkitchin.github.com/_blog
Fri Nov 20 10:20:01 2015
</pre>

<p>
That works well from what I can see. There are some limitations. I doubt this will work if you use variables in the src block header. Next we consider an approach that does not do the tangling, and that will show us code output as it goes.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-D8F2CBB5-31B2-4477-A363-E3C0063214DE" name="ID-D8F2CBB5-31B2-4477-A363-E3C0063214DE"></a><span class="section-number-2">3</span> Emacs process approach with no tangling</h2>
<div class="outline-text-2" id="text-3">
<p>
As an alternative to tangling to a file, here we just copy the code to a file and then run it. This allows us to use :var in the header to pass data in at run time. At the moment, this code only supports printed output from code blocks, not the value for :results.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-babel-async-execute:python</span> ()
  <span style="color: #036A07;">"Execute the python src-block at point asynchronously.</span>
<span style="color: #036A07;">:var headers are supported.</span>
<span style="color: #036A07;">:results output is all that is supported for output.</span>

<span style="color: #036A07;">A new window will pop up showing you the output as it appears,</span>
<span style="color: #036A07;">and the output in that window will be put in the RESULTS section</span>
<span style="color: #036A07;">of the code block."</span>
  (<span style="color: #0000FF;">interactive</span>)
  (<span style="color: #0000FF;">let*</span> ((current-file (buffer-file-name))
         (uuid (org-id-uuid))
         (code (org-element-property <span style="color: #006FE0;">:value</span> (org-element-context)))
         (temporary-file-directory <span style="color: #008000;">"."</span>)
         (tempfile (make-temp-file <span style="color: #008000;">"py-"</span>))
         (pbuffer (format <span style="color: #008000;">"*%s*"</span> uuid))
         (varcmds (org-babel-variable-assignments:python
                   (nth 2 (org-babel-get-src-block-info))))
         process)

    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">get rid of old results, and put a place-holder for the new results to</span>
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">come.</span>
    (org-babel-remove-result)

    (<span style="color: #0000FF;">save-excursion</span>
      (re-search-forward <span style="color: #008000;">"#\\+END_SRC"</span>)
      (insert (format
               <span style="color: #008000;">"\n\n#+RESULTS: %s\n: %s"</span>
               (<span style="color: #0000FF;">or</span> (org-element-property <span style="color: #006FE0;">:name</span> (org-element-context))
                   <span style="color: #008000;">""</span>)
               uuid)))

    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">open the results buffer to see the results in.</span>
    (switch-to-buffer-other-window pbuffer)

    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Create temp file containing the code.</span>
    (<span style="color: #0000FF;">with-temp-file</span> tempfile
      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">if there are :var headers insert them.</span>
      (<span style="color: #0000FF;">dolist</span> (cmd varcmds)
        (insert cmd)
        (insert <span style="color: #008000;">"\n"</span>))
      (insert code))

    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">run the code</span>
    (<span style="color: #0000FF;">setq</span> process (start-process
                   uuid
                   pbuffer
                   <span style="color: #008000;">"python"</span>
                   tempfile))

    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">when the process is done, run this code to put the results in the</span>
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">org-mode buffer.</span>
    (set-process-sentinel
     process
     `(<span style="color: #0000FF;">lambda</span> (process event)
        (<span style="color: #0000FF;">save-window-excursion</span>
          (<span style="color: #0000FF;">save-excursion</span>
            (<span style="color: #0000FF;">save-restriction</span>
              (<span style="color: #0000FF;">with-current-buffer</span> (find-file-noselect ,current-file)
                (goto-char (point-min))
                (re-search-forward ,uuid)
                (beginning-of-line)
                (kill-line)
                (insert
                 (mapconcat
                  (<span style="color: #0000FF;">lambda</span> (x)
                    (format <span style="color: #008000;">": %s"</span> x))
                  (butlast (split-string
                            (<span style="color: #0000FF;">with-current-buffer</span>
                                ,pbuffer
                              (buffer-string))
                            <span style="color: #008000;">"\n"</span>))
                  <span style="color: #008000;">"\n"</span>))))))
        <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">delete the results buffer then delete the tempfile.</span>
        <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">finally, delete the process.</span>
        (<span style="color: #0000FF;">when</span> (get-buffer ,pbuffer)
          (kill-buffer ,pbuffer)
          (delete-window))
        (delete-file ,tempfile)
        (delete-process process)))))
</pre>
</div>

<pre class="example">
org-babel-async-execute:python
</pre>

<p>
Let us try it out again.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">print</span> <span style="color: #008000;">'hello world'</span>
<span style="color: #0000FF;">import</span> time
time.sleep(1)

<span style="color: #0000FF;">for</span> i <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">range</span>(5):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> i

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   time.sleep(0.5)


<span style="color: #0000FF;">import</span> os
<span style="color: #0000FF;">print</span> os.getcwd()
<span style="color: #0000FF;">print</span> time.asctime()

<span style="color: #0000FF;">print</span> data

<span style="color: #0000FF;">raise</span> <span style="color: #6434A3;">IOError</span>(<span style="color: #008000;">'No file!'</span>)
</pre>
</div>

<pre class="example">
hello world
0
1
2
3
4
/Users/jkitchin/blogofile-jkitchin.github.com/_blog
Fri Nov 20 19:30:16 2015
[1, 3]
Traceback (most recent call last):
  File "/Users/jkitchin/blogofile-jkitchin.github.com/_blog/py-84344aa1", line 18, in &lt;module&gt;
    raise IOError('No file!')
IOError: No file!
</pre>

<p>
It works fine for this simple example. We get to see the output as the code executes, which is a pleasant change from the usual way of running python blocks. There is some support for some header arguments, notably the :var header. I don't use :results value in Python, so for now only output is supported. We even support Exceptions in the output finally!
</p>

<p>
Maybe some org-moder's out there can try this and run it through some more rigorous paces?
</p>
</div>
</div>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/11/20/Asynchronously-running-python-blocks-in-org-mode.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[A framework for automated feedback with Python and org-mode]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/10/03/A-framework-for-automated-feedback-with-Python-and-org-mode" />
    <id>http://jkitchin.github.io/blog/2015/10/03/A-framework-for-automated-feedback-with-Python-and-org-mode</id>
    <updated>2015-10-03T20:29:00Z</updated>
    <published>2015-10-03T20:23:29Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="emacs" />
    <summary type="html"><![CDATA[A framework for automated feedback with Python and org-mode]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/10/03/A-framework-for-automated-feedback-with-Python-and-org-mode"><![CDATA[



<p>
<a href="http://docs.autolab.cs.cmu.edu">Autolab</a> is an autograding service that automatically grades code assignments. It uses a program to evaluate a program on a secure virtual system. Using this requires you to run a server, and run code from students. I have never liked that because it is hard to sandbox code well enough to prevent malicious code from doing bad things. Autolab does it well, but it is a heavy solution. Here we explore a local version, one that is used to test for correctness, and not for grading. Here, if you are malicious, you reap what you sow&#x2026;
</p>

<p>
The basic idea I am working towards is that Emacs will provide content to be learned (through org-mode) with active exercises. The exercises will involve a code block, and the user will run a command on their code (or an advised C-c C-c) that checks the solution for correctness. A user will be able to see the solution, and maybe get hints.
</p>

<p>
Suppose we have a problem to solve \(e^x = 3\). This is a simple problem to solve, and here is a solution.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scipy.optimize <span style="color: #0000FF;">import</span> fsolve
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">def</span> <span style="color: #006699;">objective</span>(x):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> np.exp(x) - 3

<span style="color: #0000FF;">def</span> <span style="color: #006699;">solve</span>():
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> fsolve(objective, 3)

<span style="color: #0000FF;">print</span> solve()
</pre>
</div>

<pre class="example">
[ 1.09861229]
</pre>

<p>
We would like to test this for correctness. We code this in a function-based form because we will later use the function <code>solve</code> to test for correctness. Let's see how we could test it with a test function. We will use exec on a string representing our code to get it into our namespace. I don't see a security issue here. You are writing the code! Eventually, we will be passing code to the test framework this way from an org-mode source block.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> unittest
<span style="color: #BA36A5;">TOLERANCE</span> = 1e-5

<span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'''from scipy.optimize import fsolve</span>
<span style="color: #008000;">import numpy as np</span>

<span style="color: #008000;">def objective(x):</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #008000;">   return np.exp(x) - 3</span>

<span style="color: #008000;">def solve():</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #008000;">   return fsolve(objective, 3)[0]</span>

<span style="color: #008000;">print solve()'''</span>

<span style="color: #0000FF;">def</span> <span style="color: #006699;">test_solve</span>(s):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">exec</span> s <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">globals</span>()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> (<span style="color: #006FE0;">abs</span>(np.log(3) - solve()) &lt;= TOLERANCE):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Correct'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'incorrect'</span>)

test_solve(s)
</pre>
</div>

<pre class="example">
1.09861228867
Correct
</pre>

<p>
Next, we need to think about how we could generate an import statement from a code block name, import in python, and run a test function. We can assume that the test code will be in a file called "test_%s.py" on your python path. Here are the contents of test_solve.py.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np
<span style="color: #BA36A5;">TOLERANCE</span> = 1e-5

<span style="color: #0000FF;">def</span> <span style="color: #006699;">solve_solution</span>():
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">from</span> scipy. optimize <span style="color: #0000FF;">import</span> fsolve
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">def</span> <span style="color: #006699;">objective</span>(x):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> np.exp(x) - 3

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> fsolve(objective, 3)[0]


<span style="color: #0000FF;">def</span> <span style="color: #006699;">test_solve</span>(s):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">exec</span> s <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">globals</span>()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> (<span style="color: #006FE0;">abs</span>(solve_solution() - solve()) &lt;= TOLERANCE):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Correct!'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Incorrect'</span>)
</pre>
</div>

<p>
Now, we can import that, and use the functions. Here is the Python script we need to run to test it.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> test_solve
test_solve.test_solve(<span style="color: #036A07;">'''</span>
<span style="color: #036A07;">from scipy. optimize import fsolve</span>
<span style="color: #036A07;">import numpy as np</span>

<span style="color: #036A07;">def objective(x):</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #036A07;">   return np.exp(x) - 3</span>

<span style="color: #036A07;">def solve():</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #036A07;">   return fsolve(objective, 3)[0]</span>

<span style="color: #036A07;">print solve()'''</span>)
</pre>
</div>

<pre class="example">
1.09861228867
Correct!
</pre>

<p>
Now, an elisp block to do that. One way to do this is to just run a shell command passing the string to a python interpreter. This is a short way away from an Emacs command now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let*</span> ((string <span style="color: #008000;">"import test_solve</span>
<span style="color: #008000;">test_solve.test_solve('''</span>
<span style="color: #008000;">from scipy. optimize import fsolve</span>
<span style="color: #008000;">import numpy as np</span>

<span style="color: #008000;">def objective(x):</span>
<span style="color: #008000;">    return np.exp(x) - 3</span>

<span style="color: #008000;">def solve():</span>
<span style="color: #008000;">    return fsolve(objective, 3)[0]</span>

<span style="color: #008000;">print solve()''')"</span>))
  (shell-command-to-string (format <span style="color: #008000;">"python -c \"%s\""</span> string)))
</pre>
</div>

<pre class="example">
1.09861228867
Correct!
</pre>

<p>
Ok, now to wrap it all up in a function we can run from Emacs in a code block to test it. With the cursor in a code block, we get the name, and build the python code, and run it. The function is more complex than I anticipated because I end up  running the code block essentially twice, once to get a results block and once to get the test results. For short problems this is not an issue. I also add the test results in a way that is compatible with the current results.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">check</span> ()
  (<span style="color: #0000FF;">interactive</span>)
  (<span style="color: #0000FF;">let*</span> ((src-block (org-element-context))
         (name (org-element-property <span style="color: #006FE0;">:name</span> src-block))
         (code (org-element-property <span style="color: #006FE0;">:value</span> src-block))
         (end (org-element-property <span style="color: #006FE0;">:end</span> src-block))
         (results)
         (template (format <span style="color: #008000;">"import test_%s</span>
<span style="color: #008000;">test_%s.test_%s('''%s''')"</span> name name name code))
         (output (format
                  <span style="color: #008000;">"\n%s\n"</span>
                  (s-join
                   <span style="color: #008000;">"\n"</span>
                   (mapcar
                    (<span style="color: #0000FF;">lambda</span> (s)
                      (<span style="color: #0000FF;">if</span> (s-starts-with? <span style="color: #008000;">":"</span> s)
                          s
                        (concat <span style="color: #008000;">": "</span> s)))
                    (s-split
                     <span style="color: #008000;">"\n"</span>
                     (shell-command-to-string
                      (format <span style="color: #008000;">"python -c \"%s\""</span> template))))))))
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">execute block as normal</span>
    (org-babel-execute-src-block)
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">and add some output to the Results block</span>
    (<span style="color: #0000FF;">if</span> (org-babel-where-is-src-block-result)
        (<span style="color: #0000FF;">progn</span>
          (goto-char (org-babel-where-is-src-block-result))
          (<span style="color: #0000FF;">setq</span> results (org-element-context))
          <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">delete results line</span>
          (kill-line)
          <span style="color: #8D8D84;">;;  </span><span style="color: #8D8D84; font-style: italic;">delete the results</span>
          (<span style="color: #0000FF;">setf</span> (buffer-substring (org-element-property <span style="color: #006FE0;">:begin</span> results)
                                  (org-element-property <span style="color: #006FE0;">:post-affiliated</span> results))
                <span style="color: #008000;">""</span>)
          <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">paste results line back</span>
          (yank)
          <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">and the output from your code</span>
          (insert output))
      (message <span style="color: #008000;">"%s"</span> output))))
</pre>
</div>

<pre class="example">
check
</pre>

<p>
Now, we use a named src-block so we can call M-x check in it, and check the answer.
</p>

<div class="org-src-container">

<pre class="src src-python" id="solve"><span style="color: #0000FF;">from</span> scipy.optimize <span style="color: #0000FF;">import</span> fsolve
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">def</span> <span style="color: #006699;">objective</span>(x):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> np.exp(x) - 3

<span style="color: #0000FF;">def</span> <span style="color: #006699;">solve</span>():
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> fsolve(objective, 3)

<span style="color: #0000FF;">print</span> solve()
</pre>
</div>

<pre class="example">
[ 1.09861229]
Correct!
</pre>

<p>
I would like to be able to provide a solution function that would show a user my solution they were tested against. Python provides the <code>inspect</code> module that can do this. Here is how we get the code in Python.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> inspect
<span style="color: #0000FF;">import</span> test_solve

<span style="color: #0000FF;">print</span> inspect.getsource(test_solve.solve_solution)
</pre>
</div>

<pre class="example">
def solve_solution():
    from scipy. optimize import fsolve
    import numpy as np

    def objective(x):
        return np.exp(x) - 3

    return fsolve(objective, 3)[0]
</pre>

<p>
This makes it easy to wrap up a function in emacs that will show this from at src block. We just get the block name, and build the python code and execute it here.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">show-solution</span> ()
  (<span style="color: #0000FF;">interactive</span>)
  (<span style="color: #0000FF;">let*</span> ((src-block (org-element-context))
         (name (org-element-property <span style="color: #006FE0;">:name</span> src-block))
         (template (format  <span style="color: #008000;">"import inspect</span>
<span style="color: #008000;">import test_%s</span>

<span style="color: #008000;">print inspect.getsource(test_%s.%s_solution)"</span> name name name)))
    (switch-to-buffer-other-window (get-buffer-create <span style="color: #008000;">"solution"</span>))
    (erase-buffer)
    (insert (shell-command-to-string
             (format <span style="color: #008000;">"python -c \"%s\""</span> template)))
    (python-mode)))
</pre>
</div>

<pre class="example">
show-solution
</pre>

<p>
That summarizes the main features. It allows me to write a test module that has some name conventions to define a solution function, and a test function. Emacs can generate some boilerplate code for different problem names, and run the test to give the user some feedback. Most of the code in this post would not be directly visible to a user, it would be buried in a python module somewhere on the path, and in elisp files providing the glue. I am not sure how much obfuscation you can put in the python files, e.g. just providing byte-compiled code, so it is less easy to just read it. That is not as big a deal when it is just a study guide/feedback system.
</p>

<p>
From an authoring point of view, this seems pretty good to me. It is feasible I think to write an org-source document like this with tangling for the test modules, and an export to org that does not have the solutions in it. The only subtle point might be needing to alter Python paths to find the test modules if they aren't installed via something like pip.
</p>


<p>
I think this is pretty flexible, and could handle problems that take arguments, e.g. write a function that sorts a list. Here is a simple example of that. First we write the test_sort.py file with a solution, and some tests.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">sort_solution</span>(LIST):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> LIST.sort()

<span style="color: #0000FF;">def</span> <span style="color: #006699;">test_sort</span>(s):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">exec</span> s <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">globals</span>()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> sort([3, 4, 2]) == [2, 3, 4]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'passed test 1'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> sort([<span style="color: #008000;">'z'</span>, <span style="color: #008000;">'b'</span>]) == [<span style="color: #008000;">'b'</span>, <span style="color: #008000;">'z'</span>]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'passed test 2'</span>)
</pre>
</div>


<div class="org-src-container">

<pre class="src src-python" id="sort"><span style="color: #0000FF;">def</span> <span style="color: #006699;">sort</span>(LIST):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #006FE0;">sorted</span>(LIST)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s
</pre>
</div>
<pre class="example">
passed test 1
passed test 2
</pre>

<p>
Maybe it would make sense to use unittests, or nose or some other testing framework if it makes writing the tests easier. Another day.
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/10/03/A-framework-for-automated-feedback-with-Python-and-org-mode.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Pyparsing meets Emacs to find chemical formulas]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/07/02/Pyparsing-meets-Emacs-to-find-chemical-formulas" />
    <id>http://jkitchin.github.io/blog/2015/07/02/Pyparsing-meets-Emacs-to-find-chemical-formulas</id>
    <updated>2015-07-02T12:38:04Z</updated>
    <published>2015-07-02T12:22:57Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="emacs" />
    <summary type="html"><![CDATA[Pyparsing meets Emacs to find chemical formulas]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/07/02/Pyparsing-meets-Emacs-to-find-chemical-formulas"><![CDATA[



<p>
see the video: <a href="https://www.youtube.com/watch?v=sjxS9m8QCoo">https://www.youtube.com/watch?v=sjxS9m8QCoo</a> 
</p>

<p>
Today we expand the concepts of clickable text and merge an idea from Python with Emacs. Here we will use Python to find chemical formulas in the buffer, and then highlight them with Emacs.  We will use pyparsing to find the chemical formulas and then use them to create a pattern for button-lock. I chose this approach because regular expressions are hard to use on the most general kinds of chemical formulas, and a (possibly recursive) parser should be better equipped to handle this. I adapted an <a href="https://pyparsing.wikispaces.com/file/view/chemicalFormulas.py/31041705/chemicalFormulas.py">example</a> grammar to match simple chemical formulas, i.e. ones that do not have any parentheses, or charges different than + or -. I think something like this could be done in Emacs, but I am not as familiar with this kind of parsing in Emacs.
</p>

<p>
Basically, we treat a formula as a group of one or more Elements that have an optional number following them. Spoiler alert: This mostly works, but in the end I conclude there is a clear benefit to a markup language for chemical formulas. Here is an example usage of a parser:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">adapted from [[https://pyparsing.wikispaces.com/file/view/chemicalFormulas.py/31041705/chemicalFormulas.py]]</span>

<span style="color: #0000FF;">from</span> pyparsing <span style="color: #0000FF;">import</span> *

<span style="color: #BA36A5;">element</span> = oneOf( <span style="color: #008000;">"""H He Li Be B C N O F Ne Na Mg Al Si P S Cl</span>
<span style="color: #008000;">            Ar K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge</span>
<span style="color: #008000;">            As Se Br Kr Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag</span>
<span style="color: #008000;">            Cd In Sn Sb Te I Xe Cs Ba Lu Hf Ta W Re Os</span>
<span style="color: #008000;">            Ir Pt Au Hg Tl Pb Bi Po At Rn Fr Ra Lr Rf</span>
<span style="color: #008000;">            Db Sg Bh Hs Mt Ds Rg Uub Uut Uuq Uup Uuh Uus</span>
<span style="color: #008000;">            Uuo La Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm</span>
<span style="color: #008000;">            Yb Ac Th Pa U Np Pu Am Cm Bk Cf Es Fm Md No"""</span> )

<span style="color: #BA36A5;">integer</span> = Word(nums)
<span style="color: #BA36A5;">elementRef</span> = Group(element + Optional(integer))
<span style="color: #BA36A5;">chemicalFormula</span> = (WordStart(alphas.upper())
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      + OneOrMore(elementRef).leaveWhitespace()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      + Optional(Or([Literal(<span style="color: #008000;">"-"</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     Literal(<span style="color: #008000;">"+"</span>)]))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      + WordEnd(alphas + nums + <span style="color: #008000;">"-+"</span>))


<span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'''Water is  H2O or OH2  not h2O, methane is CH4 and of course there is PtCl4.</span>
<span style="color: #008000;">What about H+ and OH-? and carbon or Carbon or H2SO4?</span>

<span style="color: #008000;">Is this C6H6? or C2H5OH?</span>

<span style="color: #008000;">and a lot of elements:</span>
<span style="color: #008000;">H He Li Be B C N O F Ne Na Mg Al Si P S Cl</span>
<span style="color: #008000;">            Ar K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge</span>
<span style="color: #008000;">            As Se Br Kr Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag</span>
<span style="color: #008000;">            Cd In Sn Sb Te I Xe Cs Ba Lu Hf Ta W Re Os</span>
<span style="color: #008000;">            Ir Pt Au Hg Tl Pb Bi Po At Rn Fr Ra Lr Rf</span>
<span style="color: #008000;">            Db Sg Bh Hs Mt Ds Rg Uub Uut Uuq Uup Uuh Uus</span>
<span style="color: #008000;">            Uuo La Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm</span>
<span style="color: #008000;">            Yb Ac Th Pa U Np Pu Am Cm Bk Cf Es Fm Md No'''</span>

<span style="color: #BA36A5;">matches</span> = []
<span style="color: #0000FF;">for</span> match, start, stop <span style="color: #0000FF;">in</span> chemicalFormula.scanString(s):
   matches.append(s[start:stop])

<span style="color: #0000FF;">print</span> <span style="color: #006FE0;">sorted</span>(matches, key=<span style="color: #0000FF;">lambda</span> x: <span style="color: #006FE0;">len</span>(x), reverse=<span style="color: #D0372D;">True</span>)
</pre>
</div>
<pre class="example">
['C2H5OH', 'PtCl4', 'H2SO4', 'C6H6', 'H2O', 'OH2', 'CH4', 'OH-', 'Uub', 'Uut', 'Uuq', 'Uup', 'Uuh', 'Uus', 'Uuo', 'H+', 'He', 'Li', 'Be', 'Ne', 'Na', 'Mg', 'Al', 'Si', 'Cl', 'Ar', 'Ca', 'Sc', 'Ti', 'Cr', 'Mn', 'Fe', 'Co', 'Ni', 'Cu', 'Zn', 'Ga', 'Ge', 'As', 'Se', 'Br', 'Kr', 'Rb', 'Sr', 'Zr', 'Nb', 'Mo', 'Tc', 'Ru', 'Rh', 'Pd', 'Ag', 'Cd', 'In', 'Sn', 'Sb', 'Te', 'Xe', 'Cs', 'Ba', 'Lu', 'Hf', 'Ta', 'Re', 'Os', 'Ir', 'Pt', 'Au', 'Hg', 'Tl', 'Pb', 'Bi', 'Po', 'At', 'Rn', 'Fr', 'Ra', 'Lr', 'Rf', 'Db', 'Sg', 'Bh', 'Hs', 'Mt', 'Ds', 'Rg', 'La', 'Ce', 'Pr', 'Nd', 'Pm', 'Sm', 'Eu', 'Gd', 'Tb', 'Dy', 'Ho', 'Er', 'Tm', 'Yb', 'Ac', 'Th', 'Pa', 'Np', 'Pu', 'Am', 'Cm', 'Bk', 'Cf', 'Es', 'Fm', 'Md', 'No', 'O', 'H', 'B', 'C', 'N', 'O', 'F', 'P', 'S', 'K', 'V', 'Y', 'I', 'W', 'U']
</pre>

<p>
That is pretty good. If the string was actually our buffer, we could use those to create a regexp to put text-properties on them. The trick is how to get the buffer string to the Python function, and then get back usable information in lisp. We actually explored this <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/05/16/Python-data-structures-to-lisp/">before</a> ! Rather than use that, we will just create the lisp output manually since this is a simple list of strings.
</p>

<p>
The first thing we should do is work out a Python script that will output the lisp results we want, which are the found formulas (I tried getting the start and stop positions, but I don't think they map onto the buffer positions very well). Here it is. We set it up as a command line tool that takes a string. We use set to get a unique list, then sort the list by length so we try matching the longest patterns first. There are a few subtle differences in this script and the example above because of some odd false hits I unsuccessfully tried to get rid of.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> sys
<span style="color: #0000FF;">from</span> pyparsing <span style="color: #0000FF;">import</span> *

<span style="color: #BA36A5;">element_string</span> =  <span style="color: #008000;">"""H He Li Be B C N O F Ne Na Mg Al Si P S Cl</span>
<span style="color: #008000;">            Ar K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge</span>
<span style="color: #008000;">            As Se Br Kr Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag</span>
<span style="color: #008000;">            Cd In Sn Sb Te I Xe Cs Ba Lu Hf Ta W Re Os</span>
<span style="color: #008000;">            Ir Pt Au Hg Tl Pb Bi Po At Rn Fr Ra Lr Rf</span>
<span style="color: #008000;">            Db Sg Bh Hs Mt Ds Rg Uub Uut Uuq Uup Uuh Uus</span>
<span style="color: #008000;">            Uuo La Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm</span>
<span style="color: #008000;">            Yb Ac Th Pa U Np Pu Am Cm Bk Cf Es Fm Md No"""</span>
<span style="color: #BA36A5;">element</span> = oneOf([x <span style="color: #0000FF;">for</span> x <span style="color: #0000FF;">in</span> element_string.split()])

<span style="color: #BA36A5;">integer</span> = Word(nums)
<span style="color: #BA36A5;">elementRef</span> = Group(element + Optional(integer))
<span style="color: #BA36A5;">chemicalFormula</span> = (WordStart(alphas.upper()).leaveWhitespace()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      + OneOrMore(elementRef).leaveWhitespace()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      + Optional(Or([Literal(<span style="color: #008000;">"-"</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     Literal(<span style="color: #008000;">"+"</span>)])).leaveWhitespace()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      + WordEnd(alphas + alphas.lower() + nums + <span style="color: #008000;">"-+"</span>).leaveWhitespace())

<span style="color: #BA36A5;">s</span> = sys.stdin.read().strip()

<span style="color: #BA36A5;">matches</span> = []
<span style="color: #0000FF;">for</span> match, start, stop <span style="color: #0000FF;">in</span> chemicalFormula.scanString(s):
   matches.append(s[start:stop])
<span style="color: #BA36A5;">matches</span> = <span style="color: #006FE0;">list</span>(<span style="color: #006FE0;">set</span>(matches))
matches.sort(key=<span style="color: #0000FF;">lambda</span> x: <span style="color: #006FE0;">len</span>(x), reverse=<span style="color: #D0372D;">True</span>)

<span style="color: #0000FF;">print</span> <span style="color: #008000;">"'("</span> + <span style="color: #008000;">' '</span>.join([<span style="color: #008000;">"\"{}\""</span>.<span style="color: #006FE0;">format</span>(m) <span style="color: #0000FF;">for</span> m <span style="color: #0000FF;">in</span> matches]) + <span style="color: #008000;">')'</span>
</pre>
</div>

<p>
Now we can test this:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Water is H2O, methane is CH4 and of course PtCl4, what about H+ and OH-? and carbon or Carbon. Water is H2O not h2o or mH2o, methane is CH4 and of course PtCl4, what about H+ and OH-? carbon, Carbon and SRC, or H2SO4? Is this C6H6? Ethanol is C2H5OH in a sentence.</span>

<span style="color: #008000;"> C2H5OH firs con</span>

<span style="color: #008000;">This is CH3OH</span>

<span style="color: #008000;">H He Li Be B C N O F Ne Na Mg Al Si P S Cl</span>
<span style="color: #008000;">            Ar K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge</span>
<span style="color: #008000;">            As Se Br Kr Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag</span>
<span style="color: #008000;">            Cd In Sn Sb Te I Xe Cs Ba Lu Hf Ta W Re Os</span>
<span style="color: #008000;">            Ir Pt Au Hg Tl Pb Bi Po At Rn Fr Ra Lr Rf</span>
<span style="color: #008000;">            Db Sg Bh Hs Mt Ds Rg Uub Uut Uuq Uup Uuh Uus</span>
<span style="color: #008000;">            Uuo La Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm</span>
<span style="color: #008000;">            Yb Ac Th Pa U Np Pu Am Cm Bk Cf Es Fm Md No</span>
<span style="color: #008000;">"</span> | ./parse_chemical_formulas.py
</pre>
</div>
<pre class="example">
'("C2H5OH" "CH3OH" "PtCl4" "H2SO4" "C6H6" "CH4" "OH-" "Uub" "Uuq" "Uup" "Uus" "Uuo" "Uuh" "H2O" "Uut" "Ru" "Re" "Rf" "Rg" "Ra" "Rb" "Rn" "Rh" "Be" "Ba" "Bh" "Bi" "Bk" "Br" "Ho" "Os" "Es" "Hg" "Ge" "Gd" "Ga" "Pr" "Pt" "Pu" "Pb" "Pa" "Pd" "Cd" "Po" "Pm" "Hs" "Hf" "He" "Md" "Mg" "Mo" "Mn" "Mt" "Zn" "H+" "Eu" "Zr" "Er" "Ni" "No" "Na" "Nb" "Nd" "Ne" "Np" "Fr" "Fe" "Fm" "Sr" "Kr" "Si" "Sn" "Sm" "Sc" "Sb" "Sg" "Se" "Co" "Cm" "Cl" "Ca" "Cf" "Ce" "Xe" "Tm" "Cs" "Cr" "Cu" "La" "Li" "Tl" "Lu" "Lr" "Th" "Ti" "Te" "Tb" "Tc" "Ta" "Yb" "Db" "Dy" "Ds" "Ac" "Ag" "Ir" "Am" "Al" "As" "Ar" "Au" "At" "In" "H" "P" "C" "K" "O" "S" "W" "B" "F" "N" "V" "I" "U" "Y")
</pre>

<p>
That seems to work great. Now, we have a list of chemical formulas. Now, the Emacs side to call that function. We do not use regexp-opt here because I found it optimizes too much, and doesn't always match the formulas. We want explicit matches on each formula.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">shell-command-on-region-to-string</span> (start end command)
  (<span style="color: #0000FF;">with-output-to-string</span>
    (shell-command-on-region start end command standard-output)))

(read (shell-command-on-region-to-string
        (point-min) (point-max)
        <span style="color: #008000;">"./parse_chemical_formulas.py"</span>))
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">quote</td>
<td class="left">(C2H5OH ext; t CH3OH PtCl4 H2SO4 the   fir C6H6 CH4 OH- OH2 Uub  co Uuq Uup Uus Uuo Uuh ord H2O Uut Ru Re Rf Rg Ra Rb Rn Rh Be Ba Bh Bi Bk Br Ho Os Es Hg Ge Gd Ga Pr  t Pt Pu Pb Pa Pd Cd Po Pm Hs Hf He Md Mg Mo Mn Mt Zn H+ Eu Zr Er Ni No Na Nb Nd Ne Np Fr Fe Fm Sr Kr Si Sn Sm Sc Sb Sg Se Co Cm Cl Ca Cf Ce Xe Tm Cs Cr Cu La Li Tl Lu Lr Th Ti Te Tb Tc as Ta Yb Db Dy Ds In Ac Ag Ir Am Al As Ar Au At n H P l t C r K O S W w B F N V   I U Y e i)</td>
</tr>
</tbody>
</table>


<p>
That is certainly less than perfect, you can see a few false hits that are not too easy to understand, e.g. why is "fir" or "the " or "as"  in the list? They don't even start with an uppercase letter. One day maybe I will figure it out. I assume it is a logic flaw in my parser. Until then, let's go ahead and make the text functional, so it looks up the formula in the NIST webbook. The regexp is a little funny, we have to add word-boundaries to each formula to avoid some funny, bad matches.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">chemical-formula-button</span> nil <span style="color: #036A07;">"store button for removal later."</span>)

(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">nist-webbook</span>)
(<span style="color: #0000FF;">setq</span> chemical-formula-button
      (button-lock-set-button
       (mapconcat
        (<span style="color: #0000FF;">lambda</span> (formula)
          (concat <span style="color: #008000;">"\\&lt;"</span> (regexp-quote formula) <span style="color: #008000;">"\\&gt;"</span>))
        (eval (read (shell-command-on-region-to-string
                     (point-min) (point-max)
                     <span style="color: #008000;">"./parse_chemical_formulas.py"</span>)))
        <span style="color: #008000;">"</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">"</span>)
       (<span style="color: #0000FF;">lambda</span> () (<span style="color: #0000FF;">interactive</span>)
         (nist-webbook-formula
          (get-surrounding-text-with-property
           'chemical-formula)))
       <span style="color: #006FE0;">:face</span> '((<span style="color: #006FE0;">:underline</span> t) (<span style="color: #006FE0;">:background</span> <span style="color: #008000;">"gray80"</span>))
       <span style="color: #006FE0;">:help-echo</span> <span style="color: #008000;">"A chemical formula"</span>
       <span style="color: #006FE0;">:additional-property</span> 'chemical-formula))
</pre>
</div>

<p>
Here are a few tests: CH4, C2H5OH, C6H6. C(CH3)4. C6H6 is benzene. As you can see our pattern lacks context; the first word of the sentence is "as" not the symbol for arsenic. Also, our parser does not consider formulas with parentheses in them. Whenever I refer to myself, I mean myself, and not the element iodine. There are a few weird matchs I just don't understand, like firs d t x rn lac? These do not seem to match anything, and I wonder how they are getting in the list. I think this really shows that it would be useful to use some light markup for chemical formulas which would a) provide context, and b) enhance parsing accuracy. In LaTeX you would use \ce{I} to indicate that is iodine, and not a reference to myself. That is more clear than saying I use I in chemical reactions ;) And it also clarifies sentences like the letter W is used to represent tungsten as the symbol \ce{W}.
</p>

<p>
Nevertheless, we can click on the formulas, and get something to happen that is potentially useful. Is this actually useful? Conceptually yes, I think it could be, but clearly the parsing is not recognizing formulas perfectly. Sending the buffer to a dedicated program that can return a list of matches to highlight in Emacs is a good idea, especially if it is not easy to build in Emacs, or if a proven solution already exists.
</p>


<p>
Finally, we can remove the highlighted text like this. That was the reason for saving the button earlier!
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">when</span> chemical-formula-button
  (button-lock-unset-button chemical-formula-button)
  (<span style="color: #0000FF;">setq</span> chemical-formula-button nil))
</pre>
</div>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/07/02/Pyparsing-meets-Emacs-to-find-chemical-formulas.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Serializing an Atoms object in xml]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/06/28/Serializing-an-Atoms-object-in-xml" />
    <id>http://jkitchin.github.io/blog/2015/06/28/Serializing-an-Atoms-object-in-xml</id>
    <updated>2015-06-28T12:26:00Z</updated>
    <published>2015-06-28T12:26:00Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="xml" />
    <category scheme="http://jkitchin.github.io/blog" term="ase" />
    <summary type="html"><![CDATA[Serializing an Atoms object in xml]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/06/28/Serializing-an-Atoms-object-in-xml"><![CDATA[


<p>
I have a future need to serialize an Atoms object from <a href="https://wiki.fysik.dtu.dk/ase/">ase</a> as XML. I would use json usually, but I want to use a program that will index xml. I have previously used <a href="https://pypi.python.org/pypi/pyxser/1.5.2-r2">pyxser</a> for this, but I recall it being difficult to install, and it does not pip install on my Mac. So, here we look at <a href="https://pypi.python.org/pypi/xmlwitch/0.2.1">xmlwitch</a> which does pip install ;). This package does some serious magic with context managers.
</p>

<p>
One thing I am not sure about here is the best way to represent numbers and lists/arrays. I am using repr here, and assuming you would want to read this back in to Python where this could simply be eval'ed. Some alternatives would be to convert them to lists, or save them as arrays of xml elements.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> ase.data.g2 <span style="color: #0000FF;">import</span> data
<span style="color: #0000FF;">from</span> ase.structure <span style="color: #0000FF;">import</span> molecule
<span style="color: #0000FF;">import</span> xmlwitch

<span style="color: #BA36A5;">atoms</span> = molecule(<span style="color: #008000;">'H2O'</span>)

<span style="color: #0000FF;">def</span> <span style="color: #006699;">serialize_atoms</span>(atoms):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #008000;">'Return an xml string of an ATOMS object.'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">xml</span> = xmlwitch.Builder(version=<span style="color: #008000;">'1.0'</span>, encoding=<span style="color: #008000;">'utf-8'</span>)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">with</span> xml.atoms():
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> atom <span style="color: #0000FF;">in</span> atoms:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">with</span> xml.atom(index=<span style="color: #006FE0;">repr</span>(atom.index)):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.symbol(atom.symbol)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.position(<span style="color: #006FE0;">repr</span>(atom.position))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.magmom(<span style="color: #006FE0;">repr</span>(atom.magmom))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.mass(<span style="color: #006FE0;">repr</span>(atom.mass))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.momentum(<span style="color: #006FE0;">repr</span>(atom.momentum))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.number(<span style="color: #006FE0;">repr</span>(atom.number))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.cell(<span style="color: #006FE0;">repr</span>(atoms.cell))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xml.pbc(<span style="color: #006FE0;">repr</span>(atoms.pbc))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> xml

<span style="color: #BA36A5;">atoms_xml</span> = serialize_atoms(atoms)
<span style="color: #0000FF;">print</span> atoms_xml

<span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(<span style="color: #008000;">'atoms.xml'</span>, <span style="color: #008000;">'w'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   f.write(<span style="color: #006FE0;">str</span>(atoms_xml))
</pre>
</div>

<pre class="example">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;atoms&gt;
  &lt;atom index="0"&gt;
    &lt;symbol&gt;O&lt;/symbol&gt;
    &lt;position&gt;array([ 0.      ,  0.      ,  0.119262])&lt;/position&gt;
    &lt;magmom&gt;0.0&lt;/magmom&gt;
    &lt;mass&gt;15.9994&lt;/mass&gt;
    &lt;momentum&gt;array([ 0.,  0.,  0.])&lt;/momentum&gt;
    &lt;number&gt;8&lt;/number&gt;
  &lt;/atom&gt;
  &lt;atom index="1"&gt;
    &lt;symbol&gt;H&lt;/symbol&gt;
    &lt;position&gt;array([ 0.      ,  0.763239, -0.477047])&lt;/position&gt;
    &lt;magmom&gt;0.0&lt;/magmom&gt;
    &lt;mass&gt;1.0079400000000001&lt;/mass&gt;
    &lt;momentum&gt;array([ 0.,  0.,  0.])&lt;/momentum&gt;
    &lt;number&gt;1&lt;/number&gt;
  &lt;/atom&gt;
  &lt;atom index="2"&gt;
    &lt;symbol&gt;H&lt;/symbol&gt;
    &lt;position&gt;array([ 0.      , -0.763239, -0.477047])&lt;/position&gt;
    &lt;magmom&gt;0.0&lt;/magmom&gt;
    &lt;mass&gt;1.0079400000000001&lt;/mass&gt;
    &lt;momentum&gt;array([ 0.,  0.,  0.])&lt;/momentum&gt;
    &lt;number&gt;1&lt;/number&gt;
  &lt;/atom&gt;
  &lt;cell&gt;array([[ 1.,  0.,  0.],
       [ 0.,  1.,  0.],
       [ 0.,  0.,  1.]])&lt;/cell&gt;
  &lt;pbc&gt;array([False, False, False], dtype=bool)&lt;/pbc&gt;
&lt;/atoms&gt;
</pre>

<p>
Now, we can try reading that file. I am going to use emacs-lisp here for fun, and compute the formula.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let*</span> ((xml (car (xml-parse-file <span style="color: #008000;">"atoms.xml"</span>)))
       (atoms (xml-get-children xml 'atom))
       (symbol-elements (mapcar (<span style="color: #0000FF;">lambda</span> (atom)
                                  (car (xml-get-children atom 'symbol)))
                                atoms))
       (symbols (mapcar (<span style="color: #0000FF;">lambda</span> (x)
                          (car (xml-node-children x)))
                        symbol-elements)))
  (mapconcat (<span style="color: #0000FF;">lambda</span> (c)
               (format <span style="color: #008000;">"%s%s"</span> (car c)
                       (<span style="color: #0000FF;">if</span> (= 1 (cdr c))
                           <span style="color: #008000;">""</span>
                         (cdr c))))
             (<span style="color: #0000FF;">loop</span> for sym in (-uniq symbols)
                   collect (cons
                            sym
                            (-count (<span style="color: #0000FF;">lambda</span> (x) (string= x sym)) symbols)))
             <span style="color: #008000;">""</span>))
</pre>
</div>

<pre class="example">
OH2
</pre>

<p>
Here is a (misleadingly) concise way to do this in Python. It is so short thanks to there being a Counter that does what we want, and some pretty nice list comprehension!
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> xml.etree.ElementTree <span style="color: #0000FF;">as</span> ET
<span style="color: #0000FF;">from</span> collections <span style="color: #0000FF;">import</span> Counter
<span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(<span style="color: #008000;">'atoms.xml'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">xml</span> = ET.fromstring(f.read())

<span style="color: #BA36A5;">counts</span> = Counter([el.text <span style="color: #0000FF;">for</span> el <span style="color: #0000FF;">in</span> xml.findall(<span style="color: #008000;">'atom/symbol'</span>)])

<span style="color: #0000FF;">print</span> <span style="color: #008000;">''</span>.join([<span style="color: #008000;">'{0}{1}'</span>.<span style="color: #006FE0;">format</span>(a,b) <span style="color: #0000FF;">if</span> b&gt;1 <span style="color: #0000FF;">else</span> a <span style="color: #0000FF;">for</span> a,b <span style="color: #0000FF;">in</span> counts.iteritems()])
</pre>
</div>

<pre class="example">
H2O
</pre>

<p>
And finally a test on reading a unit cell.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> xml.etree.ElementTree <span style="color: #0000FF;">as</span> ET
<span style="color: #0000FF;">from</span> numpy <span style="color: #0000FF;">import</span> array

<span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(<span style="color: #008000;">'atoms.xml'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">xml</span> = ET.fromstring(f.read())

<span style="color: #0000FF;">print</span> <span style="color: #006FE0;">eval</span>(xml.find(<span style="color: #008000;">'cell'</span>).text)
</pre>
</div>

<pre class="example">
[[ 1.  0.  0.]
 [ 0.  1.  0.]
 [ 0.  0.  1.]]
</pre>

<p>
That seems to work but, yeah, you won't want to read untrusted xml with that! See <a href="http://stupidpythonideas.blogspot.com/2013/11/repr-eval-bad-idea.html">http://stupidpythonideas.blogspot.com/2013/11/repr-eval-bad-idea.html</a> . It might be better (although not necessarily more secure) to use pickle or some other serialization strategy for this.
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/06/28/Serializing-an-Atoms-object-in-xml.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[A python version of the s-exp bibtex entry]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/06/11/A-python-version-of-the-s-exp-bibtex-entry" />
    <id>http://jkitchin.github.io/blog/2015/06/11/A-python-version-of-the-s-exp-bibtex-entry</id>
    <updated>2015-06-11T10:02:33Z</updated>
    <published>2015-06-11T10:02:33Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="bibtex" />
    <category scheme="http://jkitchin.github.io/blog" term="ref" />
    <summary type="html"><![CDATA[A python version of the s-exp bibtex entry]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/06/11/A-python-version-of-the-s-exp-bibtex-entry"><![CDATA[



<p>
In this <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/06/10/A-sexp-version-of-a-bibtex-entry/">post</a> we explored representing a bibtex entry in lisp s-exp notation, and showed interesting things that enables. Here, I explore something similar in Python. The s-exp notation in Python is really more like tuples. It looks almost identical, except we need a lot of commas for the Python syntax. One significant difference in Python is we need to define the functions in advance because otherwise the function symbols are undefined. Similar to lisp, we can define the field functions at run-time in a loop. We have to use an eval statement, which some Pythonistas find distasteful, but it is not that different to me than what we did in lisp.
</p>

<p>
The syntax for "executing" the data structure is quite different than in lisp, because this data is <i>not</i> code in Python. Instead, we have to deconstruct the data, knowing that the function is the first object, and it takes the remaining arguments in the tuple.
</p>

<p>
Here is the proof of concept:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">article</span>(bibtex_key, *args):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #008000;">"Return the bibtex formatted entry"</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">',\n'</span>.join([<span style="color: #008000;">'@article{{{0}}}'</span>.<span style="color: #006FE0;">format</span>(bibtex_key)] +[arg[0](arg[1]) <span style="color: #0000FF;">for</span> arg <span style="color: #0000FF;">in</span> args[0]] + [<span style="color: #008000;">'}'</span>])

<span style="color: #BA36A5;">fields</span> = (<span style="color: #008000;">"author"</span>, <span style="color: #008000;">"title"</span>, <span style="color: #008000;">"journal"</span>, <span style="color: #008000;">"pages"</span>, <span style="color: #008000;">"number"</span>, <span style="color: #008000;">"doi"</span>, <span style="color: #008000;">"url"</span>, <span style="color: #008000;">"eprint"</span>, <span style="color: #008000;">"year"</span>)

<span style="color: #0000FF;">for</span> f <span style="color: #0000FF;">in</span> fields:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #006FE0;">locals</span>()[f] = <span style="color: #006FE0;">eval</span> (<span style="color: #008000;">'lambda x: "  {0} = {{{1}}}".format("'</span> + f + <span style="color: #008000;">'", x)'</span>)

<span style="color: #BA36A5;">entry</span> = (article, <span style="color: #008000;">"hallenbeck-2013-effec-o2"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    (author, <span style="color: #008000;">"Hallenbeck, Alexander P. and Kitchin, John R."</span>),
         (title, <span style="color: #008000;">"Effects of \ce{O_2} and \ce{SO_2} on the capture capacity of a primary-amine based polymeric \ce{CO_2} sorbent"</span>),
         (journal, <span style="color: #008000;">"Industrial \&amp; Engineering Chemistry Research"</span>),
         (pages, <span style="color: #008000;">"10788-10794"</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    (year, 2013),
         (number, 31),
         (doi, <span style="color: #008000;">"10.1021/ie400582a"</span>),
         (url, <span style="color: #008000;">"http://pubs.acs.org/doi/abs/10.1021/ie400582a"</span>),
         (eprint, <span style="color: #008000;">"http://pubs.acs.org/doi/pdf/10.1021/ie400582a"</span>))


<span style="color: #0000FF;">print</span> entry[0](entry[1], entry[2:])
</pre>
</div>

<pre class="example">
@article{hallenbeck-2013-effec-o2},
  author = {Hallenbeck, Alexander P. and Kitchin, John R.},
  title = {Effects of \ce{O_2} and \ce{SO_2} on the capture capacity of a primary-amine based polymeric \ce{CO_2} sorbent},
  journal = {Industrial \&amp; Engineering Chemistry Research},
  pages = {10788-10794},
  year = {2013},
  number = {31},
  doi = {10.1021/ie400582a},
  url = {http://pubs.acs.org/doi/abs/10.1021/ie400582a},
  eprint = {http://pubs.acs.org/doi/pdf/10.1021/ie400582a},
}
</pre>

<p>
We can still get specific fields out. Since we used a tuple here, it is not quite as nice as using a dictionary, but it is neither too bad, and it can be wrapped in a reasonably convenient function.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">article</span>(bibtex_key, *args):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #008000;">"Return the bibtex formatted entry"</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">',\n'</span>.join([<span style="color: #008000;">'@article{{{0}}}'</span>.<span style="color: #006FE0;">format</span>(bibtex_key)] +[arg[0](arg[1]) <span style="color: #0000FF;">for</span> arg <span style="color: #0000FF;">in</span> args[0]] + [<span style="color: #008000;">'}'</span>])

<span style="color: #BA36A5;">fields</span> = (<span style="color: #008000;">"author"</span>, <span style="color: #008000;">"title"</span>, <span style="color: #008000;">"journal"</span>, <span style="color: #008000;">"pages"</span>, <span style="color: #008000;">"number"</span>, <span style="color: #008000;">"doi"</span>, <span style="color: #008000;">"url"</span>, <span style="color: #008000;">"eprint"</span>, <span style="color: #008000;">"year"</span>)

<span style="color: #0000FF;">for</span> f <span style="color: #0000FF;">in</span> fields:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #006FE0;">locals</span>()[f] = <span style="color: #006FE0;">eval</span> (<span style="color: #008000;">'lambda x: "  {0} = {{{1}}}".format("'</span> + f + <span style="color: #008000;">'", x)'</span>)

<span style="color: #BA36A5;">entry</span> = (article, <span style="color: #008000;">"hallenbeck-2013-effec-o2"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    (author, <span style="color: #008000;">"Hallenbeck, Alexander P. and Kitchin, John R."</span>),
         (title, <span style="color: #008000;">"Effects of \ce{O_2} and \ce{SO_2} on the capture capacity of a primary-amine based polymeric \ce{CO_2} sorbent"</span>),
         (journal, <span style="color: #008000;">"Industrial \&amp; Engineering Chemistry Research"</span>),
         (pages, <span style="color: #008000;">"10788-10794"</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    (year, 2013),
         (number, 31),
         (doi, <span style="color: #008000;">"10.1021/ie400582a"</span>),
         (url, <span style="color: #008000;">"http://pubs.acs.org/doi/abs/10.1021/ie400582a"</span>),
         (eprint, <span style="color: #008000;">"http://pubs.acs.org/doi/pdf/10.1021/ie400582a"</span>))


<span style="color: #0000FF;">for</span> field <span style="color: #0000FF;">in</span> entry[2:]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> field[0] == author:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> field

<span style="color: #0000FF;">def</span> <span style="color: #006699;">get_field</span>(entry, field):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> element <span style="color: #0000FF;">in</span> entry[2:]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> element[0] == field:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> element[1]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #D0372D;">None</span>

<span style="color: #0000FF;">print</span> get_field(entry, title)
<span style="color: #0000FF;">print</span> get_field(entry, <span style="color: #008000;">"bad"</span>)
</pre>
</div>

<pre class="example">
(&lt;function &lt;lambda&gt; at 0x1005975f0&gt;, 'Hallenbeck, Alexander P. and Kitchin, John R.')
Effects of \ce{O_2} and \ce{SO_2} on the capture capacity of a primary-amine based polymeric \ce{CO_2} sorbent
None
</pre>

<p>
So, it seems Python can do some things like lisp in treating functions like first-class objects that can be used as functions, or keys. I still like the lisp s-exp better, but this is an interesting idea for Python too.
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/06/11/A-python-version-of-the-s-exp-bibtex-entry.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Python data structures to lisp]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/05/16/Python-data-structures-to-lisp" />
    <id>http://jkitchin.github.io/blog/2015/05/16/Python-data-structures-to-lisp</id>
    <updated>2015-05-16T10:47:59Z</updated>
    <published>2015-05-16T10:47:59Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="lisp" />
    <category scheme="http://jkitchin.github.io/blog" term="emacs" />
    <summary type="html"><![CDATA[Python data structures to lisp]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/05/16/Python-data-structures-to-lisp"><![CDATA[


<p>
I have an idea in mind that would use the output of python scripts in lisp functions. Xah Lee posted an <a href="http://ergoemacs.org/emacs/elisp_perl_wrapper.html">idea for writing emacs commands in scripting languages</a> . In this post I want to explore an extension of the idea, where a Python script will return output that can be read in Lisp, e.g. we can convert a Python list to a lisp list, or a dictionary to an a-list or p-list. I can already see that simple data structures will be "simple", and arbitrary data structures will offer a lot of challenges, e.g. nested lists or dictionaries&#x2026;
</p>

<p>
If I could add some custom functions to the basic builtin types in Python, then I could use another approach to format python objects as lisp data types. This isn't recommended by Pythonistas, but I guess they don't want to use lisp as much as I do ;) I found this approach to modifying builtins:
</p>

<p>
<a href="http://stackoverflow.com/questions/2444680/how-do-i-add-my-own-custom-attributes-to-existing-built-in-python-types-like-a">http://stackoverflow.com/questions/2444680/how-do-i-add-my-own-custom-attributes-to-existing-built-in-python-types-like-a</a> 
</p>

<p>
We use that almost verbatim here to get what I want. This is a super low level way to add functions to the builtins. I add some simple formatting to floats, ints and strings. I add a more complex recursive formatting function to lists, tuples and dictionaries. A dictionary can be represented as an alist or plist. Both examples are shown, but I leave the alist version commented out. Finally, we add a lispify function to numpy arrays.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> ctypes <span style="color: #0000FF;">as</span> c

<span style="color: #0000FF;">class</span> <span style="color: #6434A3;">PyObject_HEAD</span>(c.Structure):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">_fields_</span> = [(<span style="color: #008000;">'HEAD'</span>, c.c_ubyte * (<span style="color: #006FE0;">object</span>.__basicsize__ -
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     c.sizeof(c.c_void_p))),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   (<span style="color: #008000;">'ob_type'</span>, c.c_void_p)]

<span style="color: #BA36A5;">_get_dict</span> = c.pythonapi._PyObject_GetDictPtr
<span style="color: #BA36A5;">_get_dict.restype</span> = c.POINTER(c.py_object)
<span style="color: #BA36A5;">_get_dict.argtypes</span> = [c.py_object]

<span style="color: #0000FF;">def</span> <span style="color: #006699;">get_dict</span>(<span style="color: #006FE0;">object</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> _get_dict(<span style="color: #006FE0;">object</span>).contents.value

get_dict(<span style="color: #006FE0;">str</span>)[<span style="color: #008000;">'lisp'</span>] = <span style="color: #0000FF;">lambda</span> s:<span style="color: #008000;">'"{}"'</span>.<span style="color: #006FE0;">format</span>(<span style="color: #006FE0;">str</span>(s))
get_dict(<span style="color: #006FE0;">float</span>)[<span style="color: #008000;">'lisp'</span>] = <span style="color: #0000FF;">lambda</span> f:<span style="color: #008000;">'{}'</span>.<span style="color: #006FE0;">format</span>(<span style="color: #006FE0;">str</span>(f))
get_dict(<span style="color: #006FE0;">int</span>)[<span style="color: #008000;">'lisp'</span>] = <span style="color: #0000FF;">lambda</span> f:<span style="color: #008000;">'{}'</span>.<span style="color: #006FE0;">format</span>(<span style="color: #006FE0;">str</span>(f))

<span style="color: #0000FF;">import</span> collections
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">def</span> <span style="color: #006699;">lispify</span>(L):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #008000;">"Convert a Python object L to a lisp representation."</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> (<span style="color: #006FE0;">isinstance</span>(L, <span style="color: #006FE0;">str</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">or</span> <span style="color: #006FE0;">isinstance</span>(L, <span style="color: #006FE0;">float</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">or</span> <span style="color: #006FE0;">isinstance</span>(L, <span style="color: #006FE0;">int</span>)):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> L.lisp()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">elif</span> (<span style="color: #006FE0;">isinstance</span>(L, <span style="color: #006FE0;">list</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     <span style="color: #0000FF;">or</span> <span style="color: #006FE0;">isinstance</span>(L, <span style="color: #006FE0;">tuple</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     <span style="color: #0000FF;">or</span> <span style="color: #006FE0;">isinstance</span>(L, np.ndarray)):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = []
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> element <span style="color: #0000FF;">in</span> L:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> += [element.lisp()]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">'('</span> + <span style="color: #008000;">' '</span>.join(s) + <span style="color: #008000;">')'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">elif</span> <span style="color: #006FE0;">isinstance</span>(L, <span style="color: #006FE0;">dict</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = []
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> key <span style="color: #0000FF;">in</span> L:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">alist format</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">s += ["({0} . {1})".format(key, L[key].lisp())]</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">plist</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> += [<span style="color: #008000;">":{0} {1}"</span>.<span style="color: #006FE0;">format</span>(key, L[key].lisp())]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">'('</span> + <span style="color: #008000;">' '</span>.join(s) + <span style="color: #008000;">')'</span>

get_dict(<span style="color: #006FE0;">list</span>)[<span style="color: #008000;">'lisp'</span>] = lispify
get_dict(<span style="color: #006FE0;">tuple</span>)[<span style="color: #008000;">'lisp'</span>] = lispify
get_dict(<span style="color: #006FE0;">dict</span>)[<span style="color: #008000;">'lisp'</span>] = lispify
get_dict(np.ndarray)[<span style="color: #008000;">'lisp'</span>] = lispify
</pre>
</div>

<p>
Let us test these out.
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> pylisp <span style="color: #0000FF;">import</span> *
<span style="color: #BA36A5;">a</span> = 4.5
<span style="color: #0000FF;">print</span> <span style="color: #006FE0;">int</span>(a).lisp()
<span style="color: #0000FF;">print</span> a.lisp()
<span style="color: #0000FF;">print</span> <span style="color: #008000;">"test"</span>.lisp()

<span style="color: #0000FF;">print</span> [1, 2, 3].lisp()
<span style="color: #0000FF;">print</span> (1, 2, 3).lisp()

<span style="color: #0000FF;">print</span> [[1, 3], (5, 6)].lisp()

<span style="color: #0000FF;">print</span> {<span style="color: #008000;">"a"</span>: 5}.lisp()
<span style="color: #0000FF;">print</span> [[1, 3], (5, 6), {<span style="color: #008000;">"a"</span>: 5, <span style="color: #008000;">"b"</span>: <span style="color: #008000;">"test"</span>}].lisp()


<span style="color: #BA36A5;">A</span> = np.array([1, 3, 4])
<span style="color: #0000FF;">print</span> A.lisp()
<span style="color: #0000FF;">print</span> ({<span style="color: #008000;">"tree"</span>: [5, 6]}, [<span style="color: #008000;">"a"</span>, 4, <span style="color: #008000;">"list"</span>], 5, 2.0 / 3.0).lisp()
</pre>
</div>

<pre class="example">
4
4.5
"test"
(1 2 3)
(1 2 3)
((1 3) (5 6))
(:a 5)
((1 3) (5 6) (:a 5 :b "test"))
(1 3 4)
((:tree (5 6)) ("a" 4 "list") 5 0.666666666667)
</pre>


<p>
Now, is that better than a single lisp function with a lot of conditionals to handle each type? I am not sure. This seems to work pretty well.
</p>


<p>
Here is how I imagine using this idea. We would have some emacs-lisp variables and use them to dynamically generate a python script. We run the python script, capturing the output, and read it back in as a lisp data structure. Here is a simple kind of example that generates a dictionary.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let*</span> ((elisp-var 6)
       (result)
      (script (format <span style="color: #008000;">"</span>
<span style="color: #008000;">from pylisp import *</span>
<span style="color: #008000;">print {x: [2*y for y in range(x)] for x in range(1, %s)}.lisp()</span>
<span style="color: #008000;">"</span> elisp-var)))

  <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">start a python process</span>
  (run-python)
  (<span style="color: #0000FF;">setq</span> result (read (python-shell-send-string-no-output
   script)))
  (plist-get result <span style="color: #006FE0;">:5</span>))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(0 2 4 6 8)
</pre>
</div>

<p>
That seems to work pretty well. One alternative idea to this is <a href="https://github.com/pinard/Pymacs">Pymacs</a> , which I have written about <a href="http://kitchingroup.cheme.cmu.edu/blog/2014/10/19/Using-Pymacs-to-integrate-Python-into-Emacs/">before</a> . This project isn't currently under active development, and I ran into some difficulties with it before.
</p>

<p>
Here we can solve the problem I previously posed and get the result back as an elisp float, and then reuse the result
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let*</span> ((myvar 3)
       (script (format <span style="color: #008000;">"from pylisp import *</span>
<span style="color: #008000;">from scipy.optimize import fsolve</span>
<span style="color: #008000;">def objective(x):</span>
<span style="color: #008000;">    return x - 5</span>

<span style="color: #008000;">ans, = fsolve(objective, %s)</span>
<span style="color: #008000;">print ans.lisp()"</span> myvar)))
  (run-python)
  (<span style="color: #0000FF;">setq</span> result (read (python-shell-send-string-no-output
                       script)))
  (- 5 result))
</pre>
</div>

<pre class="example">
0.0
</pre>

<p>
Bottom line: we can write python code in lisp functions that are dynamically updated, execute them, and get lisp data structures back for simple data types. I think that could be useful in some applications, where it is easier to do parsing/analysis in Python, but you want to do something else that is easier in Lisp.
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/05/16/Python-data-structures-to-lisp.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Using the Scopus api with xml output]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/04/06/Using-the-Scopus-api-with-xml-output" />
    <id>http://jkitchin.github.io/blog/2015/04/06/Using-the-Scopus-api-with-xml-output</id>
    <updated>2015-04-06T09:35:57Z</updated>
    <published>2015-04-06T09:35:57Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="xml" />
    <category scheme="http://jkitchin.github.io/blog" term="scopus" />
    <summary type="html"><![CDATA[Using the Scopus api with xml output]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/04/06/Using-the-Scopus-api-with-xml-output"><![CDATA[


<p>
According to <a href="http://api.elsevier.com/documentation/AbstractRetrievalAPI.wadl">http://api.elsevier.com/documentation/AbstractRetrievalAPI.wadl</a> , the native form of the Scopus abstract document is xml, and the full abstract cannot always be represented  as json. So&#x2026; I am going to just bite the bullet and learn to deal with the xml. This is a companion post to <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API/">http://kitchingroup.cheme.cmu.edu/blog/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API/</a> . Most of the code in this post gets tangled out to scopus_xml.py. I know it is not totally robust yet, but I have been using it for a lot of analysis, and it works pretty well so far.
</p>

<p>
This is another long post, with code that probably runs off screen. You can see the end result of what we do in this post here:  <a href="http://kitchingroup.cheme.cmu.edu/publications.html">http://kitchingroup.cheme.cmu.edu/publications.html</a> .
</p>


<p>
We start with a general function to return an xml elementtree. We build in some caching to avoid downloading things we already have; this is slow, and there are limits on how many times you can download.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> os
<span style="color: #0000FF;">import</span> xml.etree.ElementTree <span style="color: #0000FF;">as</span> ET

<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY

<span style="color: #0000FF;">def</span> <span style="color: #006699;">get_abstract_info</span>(EID, refresh=<span style="color: #D0372D;">False</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #008000;">'Get and save the json data for EID.'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">base</span> = <span style="color: #008000;">'scopus-xml/get_abstract_info'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> <span style="color: #0000FF;">not</span> os.path.exists(base):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   os.makedirs(base)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">fname</span> = <span style="color: #008000;">'{0}/{1}'</span>.<span style="color: #006FE0;">format</span>(base, EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> os.path.exists(fname) <span style="color: #0000FF;">and</span> <span style="color: #0000FF;">not</span> refresh:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(fname) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> ET.fromstring(f.read())

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Otherwise retrieve and save results</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">url</span> = (<span style="color: #008000;">"http://api.elsevier.com/content/abstract/eid/"</span> + EID + <span style="color: #008000;">'?view=META_ABS'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">resp</span> = requests.get(url,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/xml'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(fname, <span style="color: #008000;">'w'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   f.write(resp.text.encode(<span style="color: #008000;">'utf-8'</span>))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = ET.fromstring(resp.text.encode(<span style="color: #008000;">'utf-8'</span>))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> results
</pre>
</div>

<p>
Next, we do some introspection to see what we have.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">results = get_abstract_info('2-s2.0-84896759135')</span>
<span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">results = get_abstract_info('2-s2.0-84924911828')</span>
<span style="color: #BA36A5;">results</span> = get_abstract_info(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
<span style="color: #0000FF;">for</span> el <span style="color: #0000FF;">in</span> results:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> el.tag
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> el1 <span style="color: #0000FF;">in</span> el:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> <span style="color: #008000;">'  --&gt;'</span>,el1.tag
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>
</pre>
</div>

{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata
  --> {http://prismstandard.org/namespaces/basic/2.0/}url
  --> {http://purl.org/dc/elements/1.1/}identifier
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}eid
  --> {http://prismstandard.org/namespaces/basic/2.0/}doi
  --> {http://purl.org/dc/elements/1.1/}title
  --> {http://prismstandard.org/namespaces/basic/2.0/}aggregationType
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}srctype
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}citedby-count
  --> {http://prismstandard.org/namespaces/basic/2.0/}publicationName
  --> {http://purl.org/dc/elements/1.1/}publisher
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}source-id
  --> {http://prismstandard.org/namespaces/basic/2.0/}issn
  --> {http://prismstandard.org/namespaces/basic/2.0/}volume
  --> {http://prismstandard.org/namespaces/basic/2.0/}startingPage
  --> {http://prismstandard.org/namespaces/basic/2.0/}endingPage
  --> {http://prismstandard.org/namespaces/basic/2.0/}pageRange
  --> {http://prismstandard.org/namespaces/basic/2.0/}coverDate
  --> {http://purl.org/dc/elements/1.1/}creator
  --> {http://purl.org/dc/elements/1.1/}description
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}link
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}link
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}link

{http://www.elsevier.com/xml/svapi/abstract/dtd}affiliation
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}affilname

{http://www.elsevier.com/xml/svapi/abstract/dtd}authors
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}author
  --> {http://www.elsevier.com/xml/svapi/abstract/dtd}author

<p>
Now, some examples for myself to see how to get things.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *

<span style="color: #BA36A5;">results</span> = get_abstract_info(<span style="color: #008000;">'2-s2.0-84901638552'</span>)

<span style="color: #BA36A5;">coredata</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata'</span>)

<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}srctype'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}source-id'</span>).text

<span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">authors = results.find('./{http://www.elsevier.com/xml/svapi/abstract/dtd}authors')</span>
<span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">for author in results.find('./{http://www.elsevier.com/xml/svapi/abstract/dtd}authors'):</span>
<span style="color: #8D8D84;">#    </span><span style="color: #8D8D84; font-style: italic;">print author.find('{http://www.elsevier.com/xml/ani/common}indexed-name').text</span>

<span style="color: #0000FF;">for</span> creator <span style="color: #0000FF;">in</span> coredata.find(<span style="color: #008000;">'{http://purl.org/dc/elements/1.1/}creator'</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> creator.attrib

<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://purl.org/dc/elements/1.1/}title'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}publicationName'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}volume'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}pageRange'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}coverDate'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}citedby-count'</span>).text
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}doi'</span>).text

<span style="color: #0000FF;">for</span> link <span style="color: #0000FF;">in</span> coredata.findall(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}link'</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> link.attrib[<span style="color: #008000;">'rel'</span>] == <span style="color: #008000;">'scopus'</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> link.attrib[<span style="color: #008000;">'href'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> link.attrib[<span style="color: #008000;">'href'</span>]

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">alternative xpath to get the link</span>
<span style="color: #0000FF;">print</span> coredata.find(<span style="color: #008000;">"./{http://www.elsevier.com/xml/svapi/abstract/dtd}link/[@rel='scopus']"</span>).attrib[<span style="color: #008000;">'href'</span>]
</pre>
</div>

j
22746
{'auid': '55569461200', 'seq': '1'}
Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces
Catalysis Communications
52
60-64
2014-07-05
2
10.1016/j.catcom.2013.10.028
http://api.elsevier.com/content/abstract/scopus_id/84901638552
http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward
http://api.elsevier.com/content/search/scopus?query=refeid%282-s2.0-84901638552%29
http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward

<p>
That is basically it. In the next sections, we basically recreate the previous functions from scopus.py using the xml data.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Authors</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_author_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">authors</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}authors'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> authors <span style="color: #0000FF;">is</span> <span style="color: #D0372D;">None</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">'No authors found'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = []

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> author <span style="color: #0000FF;">in</span> authors:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">name</span> = author.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/ani/common}indexed-name'</span>).text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">auid</span> = author.attrib[<span style="color: #008000;">'auid'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> += [<span style="color: #008000;">'&lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId={0}"&gt;{1}&lt;/a&gt;'</span>.<span style="color: #006FE0;">format</span>(auid, name)]

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">', '</span>.join(s)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_author_link(<span style="color: #008000;">'2-s2.0-84896759135'</span>)
<span style="color: #0000FF;">print</span> get_author_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>
<pre class="example">
&lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=8724572500"&gt;Thompson R.L.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=22981503200"&gt;Shi W.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=6506329719"&gt;Albenze E.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=23004637900"&gt;Kusuma V.A.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=55676869000"&gt;Hopkinson D.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=7003584159"&gt;Damodaran K.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=55005205100"&gt;Lee A.S.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=7004212771"&gt;Kitchin J.R.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=6701399651"&gt;Luebke D.R.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=24081524800"&gt;Nulwala H.&lt;/a&gt;
&lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=55569461200"&gt;Xu Z.&lt;/a&gt;, &lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=7004212771"&gt;Kitchin J.R.&lt;/a&gt;
</pre>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Journal</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_journal_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">coredata</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata'</span>)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">journal</span> = coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}publicationName'</span>).text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">sid</span> = coredata.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}source-id'</span>).text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;a href="http://www.scopus.com/source/sourceInfo.url?sourceId={sid}"&gt;{journal}&lt;/a&gt;'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(sid=sid, journal=journal)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_journal_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>
<pre class="example">
&lt;a href="http://www.scopus.com/source/sourceInfo.url?sourceId=22746"&gt;Catalysis Communications&lt;/a&gt;
</pre>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> DOI link</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_doi_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">coredata</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">doi</span> = coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}doi'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> doi <span style="color: #0000FF;">is</span> <span style="color: #0000FF;">not</span> <span style="color: #D0372D;">None</span>: <span style="color: #BA36A5;">doi</span> = doi.text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;a href="http://dx.doi.org/{doi}"&gt;doi:{doi}&lt;/a&gt;'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(doi=doi)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_doi_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<a href="http://dx.doi.org/10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Abstract link</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_abstract_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">coredata</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata'</span>)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">title</span> = coredata.find(<span style="color: #008000;">'{http://purl.org/dc/elements/1.1/}title'</span>).text.encode(<span style="color: #008000;">'utf-8'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">link</span> = coredata.find(<span style="color: #008000;">"./{http://www.elsevier.com/xml/svapi/abstract/dtd}link/[@rel='scopus']"</span>).attrib[<span style="color: #008000;">'href'</span>].encode(<span style="color: #008000;">'utf-8'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;a href="{link}"&gt;{title}&lt;/a&gt;'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(link=link, title=title)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_abstract_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward">Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces</a>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Citation image</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_cite_img_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">coredata</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">doi</span> = coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}doi'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> doi <span style="color: #0000FF;">is</span> <span style="color: #0000FF;">not</span> <span style="color: #D0372D;">None</span>: <span style="color: #BA36A5;">doi</span> = doi.text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;img src="http://api.elsevier.com/content/abstract/citation-count?doi={doi}&amp;httpAccept=image/jpeg&amp;apiKey={apikey}"&gt;&lt;/img&gt;'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(doi=doi, apikey=MY_API_KEY, cite_link=<span style="color: #D0372D;">None</span>)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_cite_img_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>
<img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1016/j.catcom.2013.10.028&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Getting it all together</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_html_citation</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">coredata</span> = results.find(<span style="color: #008000;">'./{http://www.elsevier.com/xml/svapi/abstract/dtd}coredata'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'{authors}, &lt;i&gt;{title}&lt;/i&gt;, {journal}, &lt;b&gt;{volume}{issue}&lt;/b&gt;, {pages}, ({year}), {doi}, {cites}.'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">issue</span> = <span style="color: #008000;">''</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}issueIdentifier'</span>) <span style="color: #0000FF;">is</span> <span style="color: #0000FF;">not</span> <span style="color: #D0372D;">None</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">issue</span> = <span style="color: #008000;">'({})'</span>.<span style="color: #006FE0;">format</span>(<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}issueIdentifier'</span>).text)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">volume</span> = coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}volume'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> volume <span style="color: #0000FF;">is</span> <span style="color: #0000FF;">not</span> <span style="color: #D0372D;">None</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">volume</span> = coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}volume'</span>).text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">volume</span> = <span style="color: #008000;">'None'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">pages</span> = <span style="color: #008000;">''</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}pageRange'</span>) <span style="color: #0000FF;">is</span> <span style="color: #0000FF;">not</span> <span style="color: #D0372D;">None</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">pages</span> = <span style="color: #008000;">'p. '</span> + coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}pageRange'</span>).text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">elif</span> coredata.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}article-number'</span>) <span style="color: #0000FF;">is</span> <span style="color: #0000FF;">not</span> <span style="color: #D0372D;">None</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">pages</span> = coredata.find(<span style="color: #008000;">'{http://www.elsevier.com/xml/svapi/abstract/dtd}article-number'</span>).text
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">pages</span> = <span style="color: #008000;">'no pages found'</span>


<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">year</span> = coredata.find(<span style="color: #008000;">'{http://prismstandard.org/namespaces/basic/2.0/}coverDate'</span>).text

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(authors=get_author_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   title=get_abstract_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   journal=get_journal_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   volume=volume,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   issue=issue,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   pages=pages,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   year=year,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   doi=get_doi_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   cites=get_cite_img_link(EID))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> <span style="color: #008000;">'&lt;ol&gt;'</span>
<span style="color: #0000FF;">print</span> <span style="color: #008000;">'&lt;li&gt;'</span>,get_html_citation(<span style="color: #008000;">'2-s2.0-84896759135'</span>),<span style="color: #008000;">'&lt;/li&gt;'</span>
<span style="color: #0000FF;">print</span>
<span style="color: #0000FF;">print</span> <span style="color: #008000;">'&lt;li&gt;'</span>,get_html_citation(<span style="color: #008000;">'2-s2.0-84924911828'</span>),<span style="color: #008000;">'&lt;/li&gt;'</span>
<span style="color: #0000FF;">print</span>
<span style="color: #0000FF;">print</span> <span style="color: #008000;">'&lt;li&gt;'</span>,get_html_citation(<span style="color: #008000;">'2-s2.0-84901638552'</span>),<span style="color: #008000;">'&lt;/li&gt;'</span>
<span style="color: #0000FF;">print</span> <span style="color: #008000;">'&lt;/ol&gt;'</span>
</pre>
</div>
<ol>
<li> <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=8724572500">Thompson R.L.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=22981503200">Shi W.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=6506329719">Albenze E.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=23004637900">Kusuma V.A.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55676869000">Hopkinson D.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7003584159">Damodaran K.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55005205100">Lee A.S.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">Kitchin J.R.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=6701399651">Luebke D.R.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=24081524800">Nulwala H.</a>, <i><a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84896759135&origin=inward">Probing the effect of electron donation on CO2 absorbing 1,2,3-triazolide ionic liquids</a></i>, <a href="http://www.scopus.com/source/sourceInfo.url?sourceId=21100199840">RSC Advances</a>, <b>4(25)</b>, p. 12748-12755, (2014-03-17), <a href="http://dx.doi.org/10.1039/c3ra47097k">doi:10.1039/c3ra47097k</a>, <img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1039/c3ra47097k&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>. </li>

<li> <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55569461200">Xu Z.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">Kitchin J.R.</a>, <i><a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84924911828&origin=inward">Relationships between the surface electronic and chemical properties of doped 4d and 5d late transition metal dioxides</a></i>, <a href="http://www.scopus.com/source/sourceInfo.url?sourceId=28134">Journal of Chemical Physics</a>, <b>142(10)</b>, 104703, (2015-03-14), <a href="http://dx.doi.org/10.1063/1.4914093">doi:10.1063/1.4914093</a>, <img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1063/1.4914093&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>. </li>

<li> <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55569461200">Xu Z.</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">Kitchin J.R.</a>, <i><a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward">Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces</a></i>, <a href="http://www.scopus.com/source/sourceInfo.url?sourceId=22746">Catalysis Communications</a>, <b>52</b>, p. 60-64, (2014-07-05), <a href="http://dx.doi.org/10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a>, <img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1016/j.catcom.2013.10.028&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>. </li>
</ol>
</div>
</div>


<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Finally getting my documents</h2>
<div class="outline-text-2" id="text-7">
<p>
Here we get the EIDs from a search query. We use these in the next section to get a new bibliography.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY
<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://api.elsevier.com/content/search/scopus?query=AU-ID(7004212771)&amp;field=eid,aggregationType&amp;count=100"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})

<span style="color: #BA36A5;">results</span> = resp.json()

<span style="color: #0000FF;">return</span> [[<span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'eid'</span>]), <span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'prism:aggregationType'</span>])] <span style="color: #0000FF;">for</span> r <span style="color: #0000FF;">in</span> results[<span style="color: #008000;">'search-results'</span>][<span style="color: #008000;">"entry"</span>] <span style="color: #0000FF;">if</span> <span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'prism:aggregationType'</span>]) == <span style="color: #008000;">'Journal'</span>]
</pre>
</div>


<table id="my-eids" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">2-s2.0-84924911828</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84923164062</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84924778427</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84924130725</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84901638552</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84898934670</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84896759135</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84896380535</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84896585411</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84916613197</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84908637059</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84880986072</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84881394200</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84873706643</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84876703352</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84867809683</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84864914806</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84865730756</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84864592302</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84863684845</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84866142469</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-84861127526</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-80052944171</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-80051809046</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-79953651013</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-79952860396</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-77956568341</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-77954747189</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-77956693843</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-77949916234</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-77955464573</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-72049114200</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-73149124752</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-73149109096</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-67449106405</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-63649114440</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-60849113132</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-58649114498</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-40949100780</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-33750804660</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-20544467859</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-15744396507</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-9744261716</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-13444307808</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-3042820285</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-2942640180</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-0142023762</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-0141924604</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-0037368024</td>
<td class="left">Journal</td>
</tr>

<tr>
<td class="left">2-s2.0-0037197884</td>
<td class="left">Journal</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> And my html bibliography</h2>
<div class="outline-text-2" id="text-8">
<p>
This generates my blog bibliography page..
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus_xml <span style="color: #0000FF;">import</span> *

<span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY
<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://api.elsevier.com/content/search/scopus?query=AU-ID(7004212771)&amp;field=eid,aggregationType&amp;count=100"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})

<span style="color: #BA36A5;">results</span> = resp.json()

<span style="color: #BA36A5;">data</span> = [[<span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'eid'</span>]), <span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'prism:aggregationType'</span>])] <span style="color: #0000FF;">for</span> r <span style="color: #0000FF;">in</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   results[<span style="color: #008000;">'search-results'</span>][<span style="color: #008000;">"entry"</span>] <span style="color: #0000FF;">if</span> <span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'prism:aggregationType'</span>]) == <span style="color: #008000;">'Journal'</span>]


<span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(<span style="color: #008000;">'../publications.html.mako'</span>, <span style="color: #008000;">'w'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   f.write(<span style="color: #008000;">'''&lt;%inherit file="_templates/site.mako" /&gt;</span>
<span style="color: #008000;">&lt;article class="page_box"&gt;</span>
<span style="color: #008000;">&lt;%self:filter chain="markdown"&gt;</span>

<span style="color: #008000;">&lt;h1&gt;Online collections of our work&lt;/h1&gt;</span>
<span style="color: #008000;">Pick your favorite:</span>
<span style="color: #008000;">&lt;ul&gt;</span>
<span style="color: #008000;">&lt;li&gt;&lt;a href="http://orcid.org/0000-0003-2625-9232"&gt;orcid:0000-0003-2625-9232&lt;/a&gt;&lt;/li&gt;</span>

<span style="color: #008000;">&lt;li&gt;&lt;a href="http://www.researcherid.com/rid/A-2363-2010"&gt;researcherid:A-2363-2010&lt;/a&gt;&lt;/li&gt;</span>

<span style="color: #008000;">&lt;li&gt;&lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId=7004212771"&gt;scopusid:7004212771&lt;/a&gt;&lt;/li&gt;</span>

<span style="color: #008000;">&lt;li&gt;&lt;a href="https://scholar.google.com/citations?user=jD_4h7sAAAAJ"&gt;Google Scholar&lt;/a&gt;&lt;/li&gt;</span>

<span style="color: #008000;">&lt;li&gt;&lt;a href="https://www.researchgate.net/profile/John_Kitchin"&gt;Research Gate&lt;/a&gt;&lt;/li&gt;</span>

<span style="color: #008000;">&lt;li&gt;&lt;a href="https://www.growkudos.com/profiles/40205"&gt;Kudos&lt;/a&gt;&lt;/li&gt;</span>
<span style="color: #008000;">&lt;/ul&gt;</span>

<span style="color: #008000;">&lt;h1&gt;Publications&lt;/h1&gt;</span>
<span style="color: #008000;">The authors are linked to their Scopus page, the title linked to the Scopus abstract, the journal linked to the Scopus journal page, and the DOI is linked to http://dx.doi.org which normally redirects you to the journal page.</span>

<span style="color: #008000;">&lt;ol reversed="reversed"&gt;</span>
<span style="color: #008000;">'''</span>)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> eid,<span style="color: #006FE0;">type</span> <span style="color: #0000FF;">in</span> data:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   f.write(<span style="color: #008000;">'&lt;li&gt;{}&lt;/li&gt;'</span>.<span style="color: #006FE0;">format</span>(get_html_citation(eid)))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   f.write(<span style="color: #008000;">'''&lt;/ol&gt;</span>

<span style="color: #008000;">&lt;/%self:filter&gt;</span>
<span style="color: #008000;">&lt;/article&gt;</span>
<span style="color: #008000;">'''</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Summary</h2>
<div class="outline-text-2" id="text-9">
<p>
The XML format is not that intuitive to me. It takes some practice writing robust code, e.g. sometimes the find command does not find anything, and then there is not text attribute to get, so you should check for success on finding things. Also, some text is unicode, and you have to take care to encode it, which my library does not do uniformly. Finally, not all journals have things like volume or issue. My formatting code is not super flexible, so these bibliography entries show None in them occasionally. Still, it is not too bad, and this enables a lot of analysis of your publications, as well as displaying them in different ways. See the result of this page here: <a href="http://kitchingroup.cheme.cmu.edu/publications.html">http://kitchingroup.cheme.cmu.edu/publications.html</a> 
</p>
</div>
</div>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/04/06/Using-the-Scopus-api-with-xml-output.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Making highly linked bibliographies from the Scopus API]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API" />
    <id>http://jkitchin.github.io/blog/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API</id>
    <updated>2015-04-04T11:32:05Z</updated>
    <published>2015-04-04T11:32:05Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="scopus" />
    <summary type="html"><![CDATA[Making highly linked bibliographies from the Scopus API]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API"><![CDATA[



<p>
A given article entry in a bibliography might have the following kinds of links in it. I think we can generate these from a Scopus query.
</p>

<ul class="org-ul">
<li>Author page: <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771</a> 
</li>
<li><a href="https://www.scopus.com/record/display.url?eid=2-s2.0-84901638552&origin=resultslist&sort=plf-f&src=s&sid=66816438A83B9A7B72A35BF872F8E10E.WeLimyRvBMk2ky9SFKc8Q%3a50&sot=autdocs&sdt=autdocs&sl=17&s=AU-ID%287004212771%29&relpos=4&relpos=4&citeCnt=2&searchTerm=">Document page</a> 
</li>
<li>Journal page: <a href="http://www.scopus.com/source/sourceInfo.url?sourceId=22746&origin=resultslist">http://www.scopus.com/source/sourceInfo.url?sourceId=22746&origin=resultslist</a> 
</li>
<li><a href="https://www.scopus.com/results/citedbyresults.url?sort=plf-f&cite=2-s2.0-84901638552&src=s&imp=t&sid=66816438A83B9A7B72A35BF872F8E10E.WeLimyRvBMk2ky9SFKc8Q%3a230&sot=cite&sdt=a&sl=0&origin=resultslist&editSaveSearch=&txGid=66816438A83B9A7B72A35BF872F8E10E.WeLimyRvBMk2ky9SFKc8Q%3a23">Cited by</a> 
</li>
<li><a href="http://dx.doi.org/10.1016/j.catcom.2013.10.028">http://dx.doi.org/10.1016/j.catcom.2013.10.028</a> 
</li>
<li><a href="https://www.scopus.com/results/citedbyresults.url?sort=r-f&src=s&mltEid=2-s2.0-84901638552&mltType=ref&mltAll=t&imp=t&sid=66816438A83B9A7B72A35BF872F8E10E.WeLimyRvBMk2ky9SFKc8Q%3a290&sot=mlt&sdt=mlt&sl=730&s=REFEID%28%28%222-s2.0-79953651013%22%29+OR+%28%222-s2.0-84855602300%22%29+OR+%28%222-s2.0-33750453016%22%29+OR+%28%222-s2.0-33645349847%22%29+OR+%28%222-s2.0-0034814842%22%29+OR+%28%222-s2.0-77955464573%22%29+OR+%28%222-s2.0-13444307808%22%29+OR+%28%222-s2.0-53349153662%22%29+OR+%28%222-s2.0-80051809046%22%29+OR+%28%222-s2.0-84876703352%22%29+OR+%28%222-s2.0-80053316882%22%29+OR+%28%222-s2.0-83255187152%22%29+OR+%28%222-s2.0-80052944171%22%29+OR+%28%222-s2.0-84865730756%22%29+OR+%28%222-s2.0-0000778362%22%29+OR+%28%222-s2.0-60349090198%22%29+OR+%28%222-s2.0-2442537377%22%29+OR+%28%222-s2.0-0030190741%22%29+OR+%28%222-s2.0-25744460922%22%29+OR+%28%222-s2.0-0011236321%22%29+OR+%28%222-s2.0-4243943295%22%29+OR+%28%222-s2.0-4944232881%22%29+OR+%28%222-s2.0-1842816907%22%29+OR+%28%222-s2.0-33646343022%22%29+OR+%28%222-s2.0-4143079428%22%29+OR+%28%222-s2.0-77954807118%22%29+OR+%28%222-s2.0-11544320930%22%29%29+AND+NOT+EID+%282-s2.0-84901638552%29&origin=resultslist&txGid=66816438A83B9A7B72A35BF872F8E10E.WeLimyRvBMk2ky9SFKc8Q%3a29">Related articles</a> 
</li>
</ul>

<p>
We are going to look at the document above, with eid=2-s2.0-84901638552. This is another long post, so here is a teaser of what we are doing. For this eid, we want to generate an html entry where each part of the entry is clickable. Here is what we will be able to do by the end of this post:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *

<span style="color: #0000FF;">print</span> <span style="color: #008000;">'&lt;ol&gt;'</span>, get_html(<span style="color: #008000;">'2-s2.0-84901638552'</span>), <span style="color: #008000;">'&lt;/ol&gt;'</span>
</pre>
</div>

<ol> <li><a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55569461200">Xu Z.</a>,<a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">Kitchin J.R.</a>, <i><a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward">Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces</a></i>, <a href="http://www.scopus.com/source/sourceInfo.url?sourceId=22746">Catalysis Communications</a>, <b>52</b>, p. 60-64, (2014-07-05), <a href="http://dx.doi.org/10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a>, <img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1016/j.catcom.2013.10.028&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>.</li> </ol>

<p>
In this post, we work out code that works for this document. This code in the form shown here might not work on all entries, e.g. for ones that are in press and are missing data, or for APS journals that have no page range. Later, I will fix those so this is more robust. To minimize repeating the code below, I create a python module here called <a href="/media/2015-04-04-Making-highly-linked-bibliographies-from-the-Scopus-API/scopus.py">scopus.py</a> .  Tangle it out with <a href="org-babel-tangle">org-babel-tangle</a>. As in the last <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/04/03/Getting-data-from-the-Scopus-API/">post</a> , I am not sharing my API key here, since it is not clear if that key is private or not.
</p>

<p>
I like json, so we use that data format here. XML would be more robust, as the Scopus site admits not all of the data can be turned into the json format, but for now we stick to json for its simplicity.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json, os
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY

<span style="color: #0000FF;">def</span> <span style="color: #006699;">get_abstract_info</span>(EID, refresh=<span style="color: #D0372D;">False</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #008000;">'Get and save the json data for EID.'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">base</span> = <span style="color: #008000;">'scopus-data/get_abstract_info'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> <span style="color: #0000FF;">not</span> os.path.exists(base):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   os.makedirs(base)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">fname</span> = <span style="color: #008000;">'{0}/{1}'</span>.<span style="color: #006FE0;">format</span>(base, EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> os.path.exists(fname) <span style="color: #0000FF;">and</span> <span style="color: #0000FF;">not</span> refresh:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(fname) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> json.loads(f.read())

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Otherwise retrieve and save results</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">url</span> = (<span style="color: #008000;">"http://api.elsevier.com/content/abstract/eid/"</span> + EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">resp</span> = requests.get(url,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = json.loads(resp.text.encode(<span style="color: #008000;">'utf-8'</span>))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(fname, <span style="color: #008000;">'w'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   f.write(json.dumps(results))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> results
</pre>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Author pages</h2>
<div class="outline-text-2" id="text-1">
<p>
Here, we generate the html that will make each author a clickable link that goes to their Scopus ID author page.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_author_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">html</span> = <span style="color: #008000;">'&lt;a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&amp;authorId={0}"&gt;{1}&lt;/a&gt;'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">authors</span> = [html.<span style="color: #006FE0;">format</span>(auid, name) <span style="color: #0000FF;">for</span> auid, name <span style="color: #0000FF;">in</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      <span style="color: #006FE0;">zip</span>([x[<span style="color: #008000;">'@auid'</span>] <span style="color: #0000FF;">for</span> x <span style="color: #0000FF;">in</span> result[<span style="color: #008000;">'authors'</span>][<span style="color: #008000;">'author'</span>]],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      [x[<span style="color: #008000;">'ce:indexed-name'</span>] <span style="color: #0000FF;">for</span> x <span style="color: #0000FF;">in</span> result[<span style="color: #008000;">'authors'</span>][<span style="color: #008000;">'author'</span>]])]

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> <span style="color: #008000;">','</span>.join(authors)
</pre>
</div>


<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_author_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55569461200">Xu Z.</a>,<a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">Kitchin J.R.</a>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Journal link</h2>
<div class="outline-text-2" id="text-2">
<p>
The most important pieces of information we need is the journal name and the source-id from the coredata.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #BA36A5;">EID</span> = <span style="color: #008000;">'2-s2.0-84901638552'</span>
<span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #0000FF;">print</span> result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'source-id'</span>]
<span style="color: #0000FF;">print</span> result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:publicationName'</span>]
</pre>
</div>

<pre class="example">
22746
Catalysis Communications
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_journal_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">sid</span> = result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'source-id'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">journal</span> = result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:publicationName'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;a href="http://www.scopus.com/source/sourceInfo.url?sourceId={sid}"&gt;{journal}&lt;/a&gt;'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(sid=sid, journal=journal)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_journal_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<a href="http://www.scopus.com/source/sourceInfo.url?sourceId=22746">Catalysis Communications</a>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> DOI link</h2>
<div class="outline-text-2" id="text-3">
<p>
It would be helpful to have a doi link, which is actually independent of Scopus so people without Scopus access can still access information.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #BA36A5;">EID</span> = <span style="color: #008000;">'2-s2.0-84901638552'</span>
<span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #0000FF;">print</span> result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:doi'</span>]
</pre>
</div>

<pre class="example">
10.1016/j.catcom.2013.10.028
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_doi_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;a href="http://dx.doi.org/{doi}"&gt;doi:{doi}&lt;/a&gt;'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(doi=result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:doi'</span>])
</pre>
</div>


<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_doi_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<a href="http://dx.doi.org/10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Citation count image</h2>
<div class="outline-text-2" id="text-4">
<p>
It is nice to show impact of a paper by showing the citations. These change with time, so a static view is not ideal. Scopus provides a way to get an image they generate that should update when viewed. We need the doi to get that.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_cite_img_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;img src="http://api.elsevier.com/content/abstract/citation-count?doi={doi}&amp;httpAccept=image/jpeg&amp;apiKey={apikey}"&gt;&lt;/img&gt;'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(doi=result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:doi'</span>].strip(), apikey=MY_API_KEY)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_cite_img_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1016/j.catcom.2013.10.028&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> The document link</h2>
<div class="outline-text-2" id="text-5">
<p>
The document link is sort of buried in the coredata. It seems like &amp; has been replaced by &amp;amp; in the json data so we have to do a clunky fix here.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #BA36A5;">EID</span> = <span style="color: #008000;">'2-s2.0-84901638552'</span>
<span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]

<span style="color: #0000FF;">print</span> result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'dc:title'</span>]
<span style="color: #0000FF;">for</span> ref <span style="color: #0000FF;">in</span> result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'link'</span>]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> ref[<span style="color: #008000;">'@rel'</span>] == <span style="color: #008000;">'scopus'</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> ref[<span style="color: #008000;">'@href'</span>].replace(<span style="color: #008000;">'&amp;amp;'</span>, <span style="color: #008000;">'&amp;'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">break</span>
</pre>
</div>

<pre class="example">
Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces
http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&amp;scp=84901638552&amp;origin=inward
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_abstract_link</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">title</span> = result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'dc:title'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> ref <span style="color: #0000FF;">in</span> result[<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'link'</span>]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> ref[<span style="color: #008000;">'@rel'</span>] == <span style="color: #008000;">'scopus'</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">link</span> = ref[<span style="color: #008000;">'@href'</span>].replace(<span style="color: #008000;">'&amp;amp;'</span>, <span style="color: #008000;">'&amp;'</span>)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;a href="{link}"&gt;{title}&lt;/a&gt;'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(link=link, title=title)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_abstract_link(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward">Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces</a>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Putting it all together</h2>
<div class="outline-text-2" id="text-6">
<p>
Our goal is ultimately an html formatted citation where nearly every piece is a hyperlink to additional information, e.g. each author is linked to their page, the title is linked to the scopus document page, the journal is linked to the scopus journal page, a DOI link, and an image of the number of citations. Here it is.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">def</span> <span style="color: #006699;">get_html</span>(EID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">data</span> = get_abstract_info(EID)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">result</span> = data[<span style="color: #008000;">'abstracts-retrieval-response'</span>]

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = <span style="color: #008000;">'&lt;li&gt;{authors}, &lt;i&gt;{title}&lt;/i&gt;, {journal}, &lt;b&gt;{volume}{issue}&lt;/b&gt;, p. {pages}, ({year}), {doi}, {cites}.&lt;/li&gt;'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">issue</span> = <span style="color: #008000;">''</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> result[<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:issue'</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">issue</span> = <span style="color: #008000;">'({})'</span>.<span style="color: #006FE0;">format</span>(result[<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:issue'</span>))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> s.<span style="color: #006FE0;">format</span>(authors=get_author_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   title=get_abstract_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   journal=get_journal_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   volume=result[<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:volume'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   issue=issue,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   pages=result[<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:pageRange'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   year=result[<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:coverDate'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   doi=get_doi_link(EID),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   cites=get_cite_img_link(EID))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> scopus <span style="color: #0000FF;">import</span> *
<span style="color: #0000FF;">print</span> get_html(<span style="color: #008000;">'2-s2.0-84901638552'</span>)
</pre>
</div>

<li><a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=55569461200">Xu Z.</a>,<a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">Kitchin J.R.</a>, <i><a href="http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&scp=84901638552&origin=inward">Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces</a></i>, <a href="http://www.scopus.com/source/sourceInfo.url?sourceId=22746">Catalysis Communications</a>, <b>52</b>, p. 60-64, (2014-07-05), <a href="http://dx.doi.org/10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a>, <img src="http://api.elsevier.com/content/abstract/citation-count?doi=10.1016/j.catcom.2013.10.028&httpAccept=image/jpeg&apiKey=5cd06d8a7df3de986bf3d0cd9971a47c"></img>.</li>


<p>
Well, that is the end for now. We have a reusable function that generates a nice HTML formatted citation that links out to many different resources. Why aren't all citations on the web this helpful?</p>
</div>
</div>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[Getting data from the Scopus API]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/04/03/Getting-data-from-the-Scopus-API" />
    <id>http://jkitchin.github.io/blog/2015/04/03/Getting-data-from-the-Scopus-API</id>
    <updated>2015-04-03T15:19:45Z</updated>
    <published>2015-04-03T15:17:27Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="scopus" />
    <summary type="html"><![CDATA[Getting data from the Scopus API]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/04/03/Getting-data-from-the-Scopus-API"><![CDATA[



<p>
I have been exploring the Scopus API (<a href="http://dev.elsevier.com/index.html">http://dev.elsevier.com/index.html</a> ) lately. This is a RESTful API that allows you to retrieve data about publications via http requests, i.e. from a script. This service is not free; you need to be at an institution that has a Scopus license.
</p>

<p>
Scopus is very good at finding your papers, and associating them with a Scopus ID. You don't have to do anything to get one, they make it. I have a Scopus ID (<a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771</a> ) that has all this data via the web, but I wanted to get this data in a tabular form I could use and analyze. Sure you can download a CSV file from that page and analyze that, but I want to script it. I am just like that ;) To use the API, you need to get an API key (<a href="http://www.developers.elsevier.com/action/devprojects">http://www.developers.elsevier.com/action/devprojects</a> ). I still cannot figure out if this key is "private" so I am not going to share mine here. I have stored it in a python file called my_scopus.py, and I will import it in these examples.
</p>

<p>
The code below is "wide", so apologies in advance that some of it will run out of the usual area it belongs.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> About me from Scopus</h2>
<div class="outline-text-2" id="text-1">
<p>
There is an author API that provides a metrics view of a Scopus ID. Here this shows there are about 77 documents for me, cited about 3028 times. Why do I say "about"? Apparently there are two different databases that Scopus uses, one for the web, and one for this API, and they do not return the same data. It is close, but not the same. The API database includes thing that are published after 1995, and it may not be updated as quickly as the web database. For example the web page reports 79 documents and 3143 citations. In the next sections we will use the search API, which returns the same information as what is on the web. Here we just illustrate how to setup an http request in Python. I like json output, so we ask for it.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY

<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://api.elsevier.com/content/author?author_id=7004212771&amp;view=metrics"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})

<span style="color: #0000FF;">print</span> json.dumps(resp.json(),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    sort_keys=<span style="color: #D0372D;">True</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    indent=4, separators=(<span style="color: #008000;">','</span>, <span style="color: #008000;">': '</span>))
</pre>
</div>

<pre class="example">
{
    "author-retrieval-response": [
        {
            "@_fa": "true",
            "@status": "found",
            "coauthor-count": "90",
            "coredata": {
                "citation-count": "3028",
                "cited-by-count": "2369",
                "dc:identifier": "AUTHOR_ID:7004212771",
                "document-count": "77",
                "prism:url": "http://api.elsevier.com/content/author/author_id/7004212771"
            },
            "h-index": "18"
        }
    ]
}
</pre>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Get my documents from Scopus</h2>
<div class="outline-text-2" id="text-2">
<p>
To find my documents, we will use the Search API, <a href="http://api.elsevier.com/documentation/SCOPUSSearchAPI.wadl">http://api.elsevier.com/documentation/SCOPUSSearchAPI.wadl</a> . We specify a Scopus ID, and to limit the quantity of data that comes back we specify that we want the dc:identifier field, which corresponds to the scopus id for each document. We will use that in the next section to get info for each document.
</p>

<div class="org-src-container">

<pre class="src src-python" id="identifiers"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY
<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://api.elsevier.com/content/search/scopus?query=AU-ID(7004212771)&amp;field=dc:identifier&amp;count=100"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})

<span style="color: #BA36A5;">results</span> = resp.json()

<span style="color: #0000FF;">return</span> [[<span style="color: #006FE0;">str</span>(r[<span style="color: #008000;">'dc:identifier'</span>])] <span style="color: #0000FF;">for</span> r <span style="color: #0000FF;">in</span> results[<span style="color: #008000;">'search-results'</span>][<span style="color: #008000;">"entry"</span>]]
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">SCOPUS_ID:84924911828</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84923164062</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84924778427</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84924130725</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84901638552</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84898934670</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84896759135</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84896380535</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84896585411</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84916613197</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84908637059</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84880986072</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84881394200</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84873706643</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84876703352</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872843990</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872872509</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872845400</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872841108</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872855250</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872864754</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84886483703</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84872854676</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84867809683</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84864914806</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84865730756</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84864592302</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84863684845</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84866142469</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84861127526</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84857224144</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84857197729</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:84856818654</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:80052944171</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:80051860134</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:80051809046</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79953651013</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952860396</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79951537083</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79251517782</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:77956568341</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:77954747189</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:77956693843</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:77949916234</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:77955464573</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:72049114200</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:78649528829</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:78649504144</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:77952266872</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:73149124752</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:73149109096</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:67449106405</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:63649114440</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:60849113132</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:58649114498</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952218110</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952292116</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:78049295221</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952296916</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952225819</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:78049231913</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952234104</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:79952301915</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:45149129361</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:40949100780</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:37349101648</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:58049109348</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:33750804660</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:33645645065</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:20544467859</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:15744396507</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:9744261716</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:13444307808</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:3042820285</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:2942640180</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:0142023762</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:0141924604</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:0037368024</td>
</tr>

<tr>
<td class="left">SCOPUS_ID:0037197884</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Retrieve info for a document</h2>
<div class="outline-text-2" id="text-3">
<p>
Here, we work out how to retrieve data for a document. We use the Abstract API (<a href="http://api.elsevier.com/documentation/AbstractRetrievalAPI.wadl">http://api.elsevier.com/documentation/AbstractRetrievalAPI.wadl</a> ). We again use a field to limit the amount of data. Here is an example that works for an article. Scopus also lists books and conferences so, we will see how that works later. Note the unicode stuff. I was getting some errors about non-ascii characters causing the json file not to read, and then issues in constructing the string. This was only a problem for some entries.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY

<span style="color: #0000FF;">def</span> <span style="color: #006699;">get_scopus_info</span>(SCOPUS_ID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">url</span> = (<span style="color: #008000;">"http://api.elsevier.com/content/abstract/scopus_id/"</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     + SCOPUS_ID
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     + <span style="color: #008000;">"?field=authors,title,publicationName,volume,issueIdentifier,"</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     + <span style="color: #008000;">"prism:pageRange,coverDate,article-number,doi,citedby-count,prism:aggregationType"</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">resp</span> = requests.get(url,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = json.loads(resp.text.encode(<span style="color: #008000;">'utf-8'</span>))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">fstring</span> = <span style="color: #008000;">'{authors}, {title}, {journal}, {volume}, {articlenum}, ({date}). {doi} (cited {cites} times).\n'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> fstring.<span style="color: #006FE0;">format</span>(authors=<span style="color: #008000;">', '</span>.join([au[<span style="color: #008000;">'ce:indexed-name'</span>] <span style="color: #0000FF;">for</span> au <span style="color: #0000FF;">in</span> results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'authors'</span>][<span style="color: #008000;">'author'</span>]]),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     title=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'dc:title'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     journal=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:publicationName'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     volume=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:volume'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     articlenum=(results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:pageRange'</span>) <span style="color: #0000FF;">or</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'article-number'</span>)).encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     date=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:coverDate'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     doi=<span style="color: #008000;">'doi:'</span> + results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:doi'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     cites=<span style="color: #006FE0;">int</span>(results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'citedby-count'</span>].encode(<span style="color: #008000;">'utf-8'</span>)))



<span style="color: #0000FF;">print</span> get_scopus_info(<span style="color: #008000;">'SCOPUS_ID:0037368024'</span>)
</pre>
</div>

<pre class="example">
Kitchin J.R., Barteau M.A., Chen J.G., A comparison of gold and molybdenum nanoparticles on TiO2(1 1 0) 1  2 reconstructed single crystal surfaces, Surface Science, 526, 323-331, (2003-03-01). doi:10.1016/S0039-6028(02)02679-1 (cited 27 times).
</pre>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Get information for all documents</h2>
<div class="outline-text-2" id="text-4">
<p>
We will use the data we previously got in the long list of Scopus IDs. A few subtle points here are that I made that a nested list so it would print as a column, and so we will have to index each entry to get the scopus id. Also, it seems that some entries generate json that cannot be parsed by python, so we wrap this in a try block and skip those entries. We need to check for the entry being a Journal article, to avoid errors with our format string. We also need to accomodate journals that do not have page ranges, but have artice numbers instead. Finally, we will format each entry so there is some html code for it.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">import</span> textwrap
<span style="color: #0000FF;">from</span> my_scopus <span style="color: #0000FF;">import</span> MY_API_KEY

<span style="color: #0000FF;">def</span> <span style="color: #006699;">get_scopus_info</span>(SCOPUS_ID):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">url</span> = (<span style="color: #008000;">"http://api.elsevier.com/content/abstract/scopus_id/"</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     + SCOPUS_ID
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     + <span style="color: #008000;">"?field=authors,title,publicationName,volume,issueIdentifier,"</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>     + <span style="color: #008000;">"prism:pageRange,coverDate,article-number,doi,citedby-count,prism:aggregationType"</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">resp</span> = requests.get(url,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/json'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    <span style="color: #008000;">'X-ELS-APIKey'</span>: MY_API_KEY})

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> json.loads(resp.text.encode(<span style="color: #008000;">'utf-8'</span>))


<span style="color: #BA36A5;">i</span> = 0
<span style="color: #0000FF;">for</span> sid <span style="color: #0000FF;">in</span> scopus_ids:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">some entries seem to have json parse errors, so we catch those</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">try</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">results</span> = get_scopus_info(sid[0])  <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">index 0 because the input data is a 2d array</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:aggregationType'</span>] == <span style="color: #008000;">'Journal'</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">i</span> += 1
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">fstring</span> = <span style="color: #008000;">'{authors}, {title}, {journal}, {volume}, {articlenum}, ({date}). &lt;a href="http://dx.doi.org/{doi}"&gt;{doi}&lt;/a&gt; (cited {cites} times)\n\n'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">s</span> = fstring.<span style="color: #006FE0;">format</span>(authors=<span style="color: #008000;">', '</span>.join([au[<span style="color: #008000;">'ce:indexed-name'</span>].encode(<span style="color: #008000;">'utf-8'</span>) <span style="color: #0000FF;">for</span> au <span style="color: #0000FF;">in</span> results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'authors'</span>][<span style="color: #008000;">'author'</span>]]),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      title=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'dc:title'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      journal=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:publicationName'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      volume=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:volume'</span>, <span style="color: #008000;">'None'</span>).encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      articlenum=<span style="color: #006FE0;">str</span>((results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'prism:pageRange'</span>) <span style="color: #0000FF;">or</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>].get(<span style="color: #008000;">'article-number'</span>))).encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      date=results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:coverDate'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      doi=<span style="color: #008000;">'doi:'</span> + results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'prism:doi'</span>].encode(<span style="color: #008000;">'utf-8'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>      cites=<span style="color: #006FE0;">int</span>(results[<span style="color: #008000;">'abstracts-retrieval-response'</span>][<span style="color: #008000;">'coredata'</span>][<span style="color: #008000;">'citedby-count'</span>].encode(<span style="color: #008000;">'utf-8'</span>)))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> <span style="color: #008000;">'{0:3d}. {1}&lt;br&gt;'</span>.<span style="color: #006FE0;">format</span>(i, s)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">except</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> <span style="color: #008000;">'{0:3d}. {1}'</span>.<span style="color: #006FE0;">format</span>(i, sid)
</pre>
</div>

  1. Xu Z., Kitchin J.R., Relationships between the surface electronic and chemical properties of doped 4d and 5d late transition metal dioxides, Journal of Chemical Physics, 142, 104703, (2015-03-14). <a href="http://dx.doi.org/doi:10.1063/1.4914093">doi:10.1063/1.4914093</a> (cited 0 times)

<br>
  2. Boes J.R., Gumuslu G., Miller J.B., Gellman A.J., Kitchin J.R., Estimating bulk-composition-dependent H2 adsorption energies on CuxPd1- x alloy (111) surfaces, ACS Catalysis, 5, 1020-1026, (2015-02-06). <a href="http://dx.doi.org/doi:10.1021/cs501585k">doi:10.1021/cs501585k</a> (cited 0 times)

<br>
  3. Boes J.R., Kondratyuk P., Yin C., Miller J.B., Gellman A.J., Kitchin J.R., Core level shifts in Cu-Pd alloys as a function of bulk composition and structure, Surface Science, None, None, (2015-01-01). <a href="http://dx.doi.org/doi:10.1016/j.susc.2015.02.011">doi:10.1016/j.susc.2015.02.011</a> (cited 0 times)

<br>
  4. Xu Z., Rossmeisl J., Kitchin J.R., A linear response DFT+U study of trends in the oxygen evolution activity of transition metal rutile dioxides, Journal of Physical Chemistry C, 119, 4827-4833, (2015-01-01). <a href="http://dx.doi.org/doi:10.1021/jp511426q">doi:10.1021/jp511426q</a> (cited 0 times)

<br>
  5. Xu Z., Kitchin J.R., Relating the electronic structure and reactivity of the 3d transition metal monoxide surfaces, Catalysis Communications, 52, 60-64, (2014-07-05). <a href="http://dx.doi.org/doi:10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a> (cited 2 times)

<br>
  6. Demeter E.L., Hilburg S.L., Washburn N.R., Collins T.J., Kitchin J.R., Electrocatalytic oxygen evolution with an immobilized TAML activator, Journal of the American Chemical Society, 136, 5603-5606, (2014-04-16). <a href="http://dx.doi.org/doi:10.1021/ja5015986">doi:10.1021/ja5015986</a> (cited 4 times)

<br>
  7. Thompson R.L., Shi W., Albenze E., Kusuma V.A., Hopkinson D., Damodaran K., Lee A.S., Kitchin J.R., Luebke D.R., Nulwala H., Probing the effect of electron donation on CO2 absorbing 1,2,3-triazolide ionic liquids, RSC Advances, 4, 12748-12755, (2014-03-17). <a href="http://dx.doi.org/doi:10.1039/c3ra47097k">doi:10.1039/c3ra47097k</a> (cited 1 times)

<br>
  8. Mehta P., Salvador P.A., Kitchin J.R., Identifying potential BO2 oxide polymorphs for epitaxial growth candidates, ACS Applied Materials and Interfaces, 6, 3630-3639, (2014-03-12). <a href="http://dx.doi.org/doi:10.1021/am4059149">doi:10.1021/am4059149</a> (cited 0 times)

<br>
  9. Miller S.D., Pushkarev V.V., Gellman A.J., Kitchin J.R., Simulating temperature programmed desorption of oxygen on Pt(111) using DFT derived coverage dependent desorption barriers, Topics in Catalysis, 57, 106-117, (2014-02-01). <a href="http://dx.doi.org/doi:10.1007/s11244-013-0166-3">doi:10.1007/s11244-013-0166-3</a> (cited 2 times)

<br>
 10. Curnan M.T., Kitchin J.R., Effects of concentration, crystal structure, magnetism, and electronic structure method on first-principles oxygen vacancy formation energy trends in perovskites, Journal of Physical Chemistry C, 118, 28776-28790, (2014-01-01). <a href="http://dx.doi.org/doi:10.1021/jp507957n">doi:10.1021/jp507957n</a> (cited 2 times)

<br>
 11. Xu Z., Kitchin J.R., Probing the coverage dependence of site and adsorbate configurational correlations on (111) surfaces of late transition metals, Journal of Physical Chemistry C, 118, 25597-25602, (2014-01-01). <a href="http://dx.doi.org/doi:10.1021/jp508805h">doi:10.1021/jp508805h</a> (cited 0 times)

<br>
 12. Lee A.S., Eslick J.C., Miller D.C., Kitchin J.R., Comparisons of amine solvents for post-combustion CO2 capture: A multi-objective analysis approach, International Journal of Greenhouse Gas Control, 18, 68-74, (2013-10-01). <a href="http://dx.doi.org/doi:10.1016/j.ijggc.2013.06.020">doi:10.1016/j.ijggc.2013.06.020</a> (cited 3 times)

<br>
 13. Hallenbeck A.P., Kitchin J.R., Effects of O2 and SO2 on the capture capacity of a primary-amine based polymeric CO2 sorbent, Industrial and Engineering Chemistry Research, 52, 10788-10794, (2013-08-07). <a href="http://dx.doi.org/doi:10.1021/ie400582a">doi:10.1021/ie400582a</a> (cited 7 times)

<br>
 13. ['SCOPUS_ID:84873706643']
 14. Calle-Vallejo F., Inoglu N.G., Su H.-Y., Martinez J.I., Man I.C., Koper M.T.M., Kitchin J.R., Rossmeisl J., Number of outer electrons as descriptor for adsorption processes on transition metals and their oxides, Chemical Science, 4, 1245-1249, (2013-03-01). <a href="http://dx.doi.org/doi:10.1039/c2sc21601a">doi:10.1039/c2sc21601a</a> (cited 16 times)

<br>
 15. Lee A.S., Kitchin J.R., Chemical and molecular descriptors for the reactivity of amines with CO
                    2 , Industrial and Engineering Chemistry Research, 51, 13609-13618, (2012-10-24). <a href="http://dx.doi.org/doi:10.1021/ie301419q">doi:10.1021/ie301419q</a> (cited 3 times)

<br>
 16. Rubin E.S., Mantripragada H., Marks A., Versteeg P., Kitchin J., The outlook for improved carbon capture technology, Progress in Energy and Combustion Science, 38, 630-671, (2012-10-01). <a href="http://dx.doi.org/doi:10.1016/j.pecs.2012.03.003">doi:10.1016/j.pecs.2012.03.003</a> (cited 91 times)

<br>
 17. Akhade S.A., Kitchin J.R., Effects of strain, d-band filling, and oxidation state on the surface electronic structure and reactivity of 3d perovskite surfaces, Journal of Chemical Physics, 137, 084703, (2012-08-28). <a href="http://dx.doi.org/doi:10.1063/1.4746117">doi:10.1063/1.4746117</a> (cited 8 times)

<br>
 18. Landon J., Demeter E., Inoglu N., Keturakis C., Wachs I.E., Vasic R., Frenkel A.I., Kitchin J.R., Spectroscopic characterization of mixed Fe-Ni oxide electrocatalysts for the oxygen evolution reaction in alkaline electrolytes, ACS Catalysis, 2, 1793-1801, (2012-08-03). <a href="http://dx.doi.org/doi:10.1021/cs3002644">doi:10.1021/cs3002644</a> (cited 39 times)

<br>
 19. Chao R., Munprom R., Petrova R., Gerdes K., Kitchin J.R., Salvador P.A., Structure and relative thermal stability of mesoporous (La, Sr) MnO 3powders prepared using evaporation-induced self-assembly methods, Journal of the American Ceramic Society, 95, 2339-2346, (2012-07-01). <a href="http://dx.doi.org/doi:10.1111/j.1551-2916.2012.05236.x">doi:10.1111/j.1551-2916.2012.05236.x</a> (cited 4 times)

<br>
 20. Kitchin J., Preface: Trends in computational catalysis, Topics in Catalysis, 55, 227-228, (2012-06-01). <a href="http://dx.doi.org/doi:10.1007/s11244-012-9808-0">doi:10.1007/s11244-012-9808-0</a> (cited 0 times)

<br>
 21. Alesi W.R., Kitchin J.R., Evaluation of a primary amine-functionalized ion-exchange resin for CO
                    2 capture, Industrial and Engineering Chemistry Research, 51, 6907-6915, (2012-05-16). <a href="http://dx.doi.org/doi:10.1021/ie300452c">doi:10.1021/ie300452c</a> (cited 15 times)

<br>
 22. Akhade S.A., Kitchin J.R., Effects of strain, d-band filling, and oxidation state on the bulk electronic structure of cubic 3d perovskites, Journal of Chemical Physics, 135, 104702, (2011-09-14). <a href="http://dx.doi.org/doi:10.1063/1.3631948">doi:10.1063/1.3631948</a> (cited 3 times)

<br>
 23. Man I.C., Su H.-Y., Calle-Vallejo F., Hansen H.A., Martinez J.I., Inoglu N.G., Kitchin J., Jaramillo T.F., Norskov J.K., Rossmeisl J., Universality in Oxygen Evolution Electrocatalysis on Oxide Surfaces, ChemCatChem, 3, 1159-1165, (2011-07-11). <a href="http://dx.doi.org/doi:10.1002/cctc.201000397">doi:10.1002/cctc.201000397</a> (cited 199 times)

<br>
 24. Inoglu N., Kitchin J.R., Identification of sulfur-tolerant bimetallic surfaces using dft parametrized models and atomistic thermodynamics, ACS Catalysis, 1, 399-407, (2011-04-01). <a href="http://dx.doi.org/doi:10.1021/cs200039t">doi:10.1021/cs200039t</a> (cited 9 times)

<br>
 25. Miller S.D., Inoglu N., Kitchin J.R., Configurational correlations in the coverage dependent adsorption energies of oxygen atoms on late transition metal fcc(111) surfaces, Journal of Chemical Physics, 134, 104709, (2011-03-14). <a href="http://dx.doi.org/doi:10.1063/1.3561287">doi:10.1063/1.3561287</a> (cited 16 times)

<br>
 26. Alesi Jr. W.R., Gray M., Kitchin J.R., CO2 adsorption on supported molecular amidine systems on activated carbon, ChemSusChem, 3, 948-956, (2010-08-01). <a href="http://dx.doi.org/doi:10.1002/cssc.201000056">doi:10.1002/cssc.201000056</a> (cited 18 times)

<br>
 27. Landon J., Kitchin J.R., Electrochemical concentration of carbon dioxide from an oxygen/carbon dioxide containing gas stream, Journal of the Electrochemical Society, 157, None, (2010-07-23). <a href="http://dx.doi.org/doi:10.1149/1.3432440">doi:10.1149/1.3432440</a> (cited 3 times)

<br>
 28. Inoglu N., Kitchin J.R., Simple model explaining and predicting coverage-dependent atomic adsorption energies on transition metal surfaces, Physical Review B - Condensed Matter and Materials Physics, 82, 045414, (2010-07-16). <a href="http://dx.doi.org/doi:10.1103/PhysRevB.82.045414">doi:10.1103/PhysRevB.82.045414</a> (cited 14 times)

<br>
 29. Pennline H.W., Granite E.J., Luebke D.R., Kitchin J.R., Landon J., Weiland L.M., Separation of CO2 from flue gas using electrochemical cells, Fuel, 89, 1307-1314, (2010-06-01). <a href="http://dx.doi.org/doi:10.1016/j.fuel.2009.11.036">doi:10.1016/j.fuel.2009.11.036</a> (cited 20 times)

<br>
 30. Inoglu N., Kitchin J.R., New solid-state table: Estimating d-band characteristics for transition metal atoms, Molecular Simulation, 36, 633-638, (2010-06-01). <a href="http://dx.doi.org/doi:10.1080/08927022.2010.481794">doi:10.1080/08927022.2010.481794</a> (cited 16 times)

<br>
 31. Tierney H.L., Baber A.E., Kitchin J.R., Sykes E.C.H., Hydrogen dissociation and spillover on individual isolated palladium atoms, Physical Review Letters, 103, 246102, (2009-12-10). <a href="http://dx.doi.org/doi:10.1103/PhysRevLett.103.246102">doi:10.1103/PhysRevLett.103.246102</a> (cited 45 times)

<br>
 32. Miller S.D., Kitchin J.R., Uncertainty and figure selection for DFT based cluster expansions for oxygen adsorption on Au and Pt (111) surfaces, Molecular Simulation, 35, 920-927, (2009-09-01). <a href="http://dx.doi.org/doi:10.1080/08927020902833137">doi:10.1080/08927020902833137</a> (cited 14 times)

<br>
 33. Inolu N., Kitchin J.R., Sulphur poisoning of water-gas shift catalysts: Site blocking and electronic structure modification, Molecular Simulation, 35, 936-941, (2009-09-01). <a href="http://dx.doi.org/doi:10.1080/08927020902833129">doi:10.1080/08927020902833129</a> (cited 6 times)

<br>
 34. Kitchin J.R., Correlations in coverage-dependent atomic adsorption energies on Pd(111), Physical Review B - Condensed Matter and Materials Physics, 79, 205412, (2009-05-01). <a href="http://dx.doi.org/doi:10.1103/PhysRevB.79.205412">doi:10.1103/PhysRevB.79.205412</a> (cited 26 times)

<br>
 35. Han J.W., Kitchin J.R., Sholl D.S., Step decoration of chiral metal surfaces, Journal of Chemical Physics, 130, 124710, (2009-04-08). <a href="http://dx.doi.org/doi:10.1063/1.3096964">doi:10.1063/1.3096964</a> (cited 11 times)

<br>
 36. Miller S.D., Kitchin J.R., Relating the coverage dependence of oxygen adsorption on Au and Pt fcc(1 1 1) surfaces through adsorbate-induced surface electronic structure effects, Surface Science, 603, 794-801, (2009-03-01). <a href="http://dx.doi.org/doi:10.1016/j.susc.2009.01.021">doi:10.1016/j.susc.2009.01.021</a> (cited 39 times)

<br>
 37. Inoglu N., Kitchin J.R., Atomistic thermodynamics study of the adsorption and the effects of water-gas shift reactants on Cu catalysts under reaction conditions, Journal of Catalysis, 261, 188-194, (2009-01-25). <a href="http://dx.doi.org/doi:10.1016/j.jcat.2008.11.020">doi:10.1016/j.jcat.2008.11.020</a> (cited 20 times)

<br>
 38. Kitchin J.R., Reuter K., Scheffler M., Alloy surface segregation in reactive environments: First-principles atomistic thermodynamics study of Ag3 Pd(111) in oxygen atmospheres, Physical Review B - Condensed Matter and Materials Physics, 77, 075437, (2008-02-29). <a href="http://dx.doi.org/doi:10.1103/PhysRevB.77.075437">doi:10.1103/PhysRevB.77.075437</a> (cited 49 times)

<br>
 39. Norskov J.K., Bligaard T., Logadottir A., Kitchin J.R., Chen J.G., Pandelov S., Stimming U., Response to "comment on 'trends in the exchange current for hydrogen evolution' [J. Electrochem. Soc., 152, J23 (2005)]", Journal of the Electrochemical Society, 153, 054612JES, (2006-11-14). <a href="http://dx.doi.org/doi:10.1149/1.2358292">doi:10.1149/1.2358292</a> (cited 9 times)

<br>
 40. Kitchin J.R., Norskov J.K., Barteau M.A., Chen J.G., Trends in the chemical properties of early transition metal carbide surfaces: A density functional study, Catalysis Today, 105, 66-73, (2005-07-15). <a href="http://dx.doi.org/doi:10.1016/j.cattod.2005.04.008">doi:10.1016/j.cattod.2005.04.008</a> (cited 70 times)

<br>
 41. Norskov J.K., Bligaard T., Logadottir A., Kitchin J.R., Chen J.G., Pandelov S., Stimming U., Trends in the exchange current for hydrogen evolution, Journal of the Electrochemical Society, 152, None, (2005-04-07). <a href="http://dx.doi.org/doi:10.1149/1.1856988">doi:10.1149/1.1856988</a> (cited 282 times)

<br>
 42. Norskov J.K., Rossmeisl J., Logadottir A., Lindqvist L., Kitchin J.R., Bligaard T., Jonsson H., Origin of the overpotential for oxygen reduction at a fuel-cell cathode, Journal of Physical Chemistry B, 108, 17886-17892, (2004-11-18). <a href="http://dx.doi.org/doi:10.1021/jp047349j">doi:10.1021/jp047349j</a> (cited 1055 times)

<br>
 43. Kitchin J.R., Norskov J.K., Barteau M.A., Chen J.G., Role of strain and ligand effects in the modification of the electronic and chemical Properties of bimetallic surfaces, Physical Review Letters, 93, None, (2004-10-08). <a href="http://dx.doi.org/doi:10.1103/PhysRevLett.93.156801">doi:10.1103/PhysRevLett.93.156801</a> (cited 361 times)

<br>
 44. Mhadeshwar A.B., Kitchin J.R., Barteau M.A., Vlachos D.G., The role of adsorbate-adsorbate interactions in the rate controlling step and the most abundant reaction intermediate of NH 3 decomposition on RU, Catalysis Letters, 96, 13-22, (2004-07-01). <a href="http://dx.doi.org/doi:10.1023/B:CATL.0000029523.22277.e1">doi:10.1023/B:CATL.0000029523.22277.e1</a> (cited 45 times)

<br>
 45. Kitchin J.R., Norskov J.K., Barteau M.A., Chen J.G., Modification of the surface electronic and chemical properties of Pt(111) by subsurface 3d transition metals, Journal of Chemical Physics, 120, 10240-10246, (2004-06-01). <a href="http://dx.doi.org/doi:10.1063/1.1737365">doi:10.1063/1.1737365</a> (cited 443 times)

<br>
 46. McCormick J.R., Kitchin J.R., Barteau M.A., Chen J.G., A four-point probe correlation of oxygen sensitivity to changes in surface resistivity of TiO2(0 0 1) and Pd-modified TiO2(0 0 1), Surface Science, 545, None, (2003-11-01). <a href="http://dx.doi.org/doi:10.1016/j.susc.2003.08.041">doi:10.1016/j.susc.2003.08.041</a> (cited 11 times)

<br>
 47. Kitchin J.R., Khan N.A., Barteau M.A., Chen J.G., Yakshinskiy B., Madey T.E., Elucidation of the active surface and origin of the weak metal-hydrogen bond on Ni/Pt(1 1 1) bimetallic surfaces: A surface science and density functional theory study, Surface Science, 544, 295-308, (2003-10-20). <a href="http://dx.doi.org/doi:10.1016/j.susc.2003.09.007">doi:10.1016/j.susc.2003.09.007</a> (cited 108 times)

<br>
 48. Kitchin J.R., Barteau M.A., Chen J.G., A comparison of gold and molybdenum nanoparticles on TiO2(1 1 0) 1  2 reconstructed single crystal surfaces, Surface Science, 526, 323-331, (2003-03-01). <a href="http://dx.doi.org/doi:10.1016/S0039-6028(02)02679-1">doi:10.1016/S0039-6028(02)02679-1</a> (cited 27 times)

<br>
 49. Song I.K., Kitchin J.R., Barteau M.A., H3PW12O40-functionalized tip for scanning tunneling microscopy, Proceedings of the National Academy of Sciences of the United States of America, 99, 6471-6475, (2002-04-30). <a href="http://dx.doi.org/doi:10.1073/pnas.072514399">doi:10.1073/pnas.072514399</a> (cited 12 times)

<br>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Summary thoughts</h2>
<div class="outline-text-2" id="text-5">
<p>
I see a lot of potential here for analytics on publications, generation of bibliography files, etc&#x2026; Instead of retrieving this data every time, it would make much more sense to cache it, e.g. writing each result to a file that could then be used locally, and much faster. The downside of that is, the citations would not be updated in those files. The upside is, you could fix the titles so they are properly marked up. I do not know what the issues with some of the json files was. Some of them were unicode issues. Some other day I will try to track down the other ones.
</p>

<p>
The entries could be made a lot more functional than this. Each author could be turned into a link back to the scopus author page, for example, the title could be linked to the scopus abstract page, etc&#x2026; The citations could be a button that automatically updates (like the one in this <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/03/30/1000+-citations-for-fuel-cell-paper-on-the-oxygen-reduction-reaction/">post</a> ). That is another exercise, for another day!
</p>
</div>
</div>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/04/03/Getting-data-from-the-Scopus-API.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
  <entry>
    <author>
      <name></name>
      <uri>http://jkitchin.github.io/blog</uri>
    </author>
    <title type="html"><![CDATA[The orcid api and generating a bibtex file from it]]></title>
    <link rel="alternate" type="text/html" href="http://jkitchin.github.io/blog/2015/03/28/The-orcid-api-and-generating-a-bibtex-file-from-it" />
    <id>http://jkitchin.github.io/blog/2015/03/28/The-orcid-api-and-generating-a-bibtex-file-from-it</id>
    <updated>2015-03-28T14:21:59Z</updated>
    <published>2015-03-28T14:21:59Z</published>
    <category scheme="http://jkitchin.github.io/blog" term="python" />
    <category scheme="http://jkitchin.github.io/blog" term="orcid" />
    <summary type="html"><![CDATA[The orcid api and generating a bibtex file from it]]></summary>
    <content type="html" xml:base="http://jkitchin.github.io/blog/2015/03/28/The-orcid-api-and-generating-a-bibtex-file-from-it"><![CDATA[



<p>
I found this interesting package <a href="https://pypi.python.org/pypi/orcid-python">orcid-python 0.1 : Python Package Index</a> . Unfortunately, it seems to have some issues and it did not work for me. But, the idea is pretty simple, there is a restful API (see <a href="http://members.orcid.org/api/tutorial-retrieve-data-public-api-curl-12-and-earlier">http://members.orcid.org/api/tutorial-retrieve-data-public-api-curl-12-and-earlier</a> ) that we can use to retrieve data. We explore that a bit here.
</p>

<p>
I have an <a href="http://orcid.org/0000-0003-2625-9232">orcid:0000-0003-2625-9232</a> which contains my data. First, we just retrieve some basic information using Python.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json

<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://pub.orcid.org/0000-0003-2625-9232"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/orcid+json'</span>})

<span style="color: #0000FF;">print</span> json.dumps(resp.json(),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    sort_keys=<span style="color: #D0372D;">True</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>    indent=4, separators=(<span style="color: #008000;">','</span>, <span style="color: #008000;">': '</span>))
</pre>
</div>
<pre class="example">
{
    "message-version": "1.1",
    "orcid-profile": {
        "client-type": null,
        "group-type": null,
        "orcid": null,
        "orcid-activities": {
            "affiliations": null
        },
        "orcid-bio": {
            "applications": null,
            "contact-details": {
                "address": {
                    "country": {
                        "value": "US",
                        "visibility": null
                    }
                },
                "email": []
            },
            "delegation": null,
            "external-identifiers": {
                "external-identifier": [
                    {
                        "external-id-common-name": {
                            "value": "ResearcherID"
                        },
                        "external-id-orcid": {
                            "host": "orcid.org",
                            "path": "0000-0001-7707-4137",
                            "uri": "http://orcid.org/0000-0001-7707-4137",
                            "value": null
                        },
                        "external-id-reference": {
                            "value": "A-2363-2010"
                        },
                        "external-id-url": {
                            "value": "http://www.researcherid.com/rid/A-2363-2010"
                        }
                    },
                    {
                        "external-id-common-name": {
                            "value": "Scopus Author ID"
                        },
                        "external-id-orcid": {
                            "host": "orcid.org",
                            "path": "0000-0002-5982-8983",
                            "uri": "http://orcid.org/0000-0002-5982-8983",
                            "value": null
                        },
                        "external-id-reference": {
                            "value": "7004212771"
                        },
                        "external-id-url": {
                            "value": "http://www.scopus.com/inward/authorDetails.url?authorID=7004212771&amp;partnerID=MN8TOARS"
                        }
                    }
                ],
                "visibility": null
            },
            "keywords": {
                "keyword": [
                    {
                        "value": "Computational catalysis, electrochemistry, CO2 capture"
                    }
                ],
                "visibility": null
            },
            "personal-details": {
                "family-name": {
                    "value": "Kitchin"
                },
                "given-names": {
                    "value": "John"
                }
            },
            "researcher-urls": {
                "researcher-url": [
                    {
                        "url": {
                            "value": "http://kitchingroup.cheme.cmu.edu"
                        },
                        "url-name": {
                            "value": "Research website"
                        }
                    }
                ],
                "visibility": null
            },
            "scope": null
        },
        "orcid-history": {
            "claimed": {
                "value": true
            },
            "completion-date": {
                "value": 1376581428004
            },
            "creation-method": "WEBSITE",
            "last-modified-date": {
                "value": 1427557747595
            },
            "source": null,
            "submission-date": {
                "value": 1376581211104
            },
            "visibility": null
        },
        "orcid-identifier": {
            "host": "orcid.org",
            "path": "0000-0003-2625-9232",
            "uri": "http://orcid.org/0000-0003-2625-9232",
            "value": null
        },
        "orcid-preferences": {
            "locale": "EN"
        },
        "type": "USER"
    }
}
</pre>

<p>
That information is not too interesting, but it would allow you to scrape out my website, scopus id, and researcher id. Next, we look at the publications orcid knows about for me. These are integrated from a few sources, notably my <a href="http://www.researcherid.com/rid/A-2363-2010">ResearcherID:A-2363-2010</a>, <a href="http://www.scopus.com/authid/detail.url?origin=AuthorProfile&authorId=7004212771">scopusid:7004212771</a>, and <a href="http://crossref.org">http://crossref.org</a> .  The next code block prints the bibtex entry for the first few entries. The bibtex entries are not too well formed, and would need some cleaning, but it is a pretty good start.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json

<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://pub.orcid.org/0000-0003-2625-9232/orcid-works"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/orcid+json'</span>})

<span style="color: #BA36A5;">results</span> = resp.json()
<span style="color: #0000FF;">for</span> i, result <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>( results[<span style="color: #008000;">'orcid-profile'</span>][<span style="color: #008000;">'orcid-activities'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   [<span style="color: #008000;">'orcid-works'</span>][<span style="color: #008000;">'orcid-work'</span>]):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> result[<span style="color: #008000;">'work-citation'</span>][<span style="color: #008000;">'citation'</span>].encode(<span style="color: #008000;">'utf-8'</span>) + <span style="color: #008000;">'\n'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> i == 2:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">break</span>
</pre>
</div>

<pre class="example">
@article{Xu_2015,doi = {10.1021/jp511426q},url = {http://dx.doi.org/10.1021/jp511426q},year = 2015,month = {mar},publisher = {American Chemical Society ({ACS})},volume = {119},number = {9},pages = {4827--4833},author = {Zhongnan Xu and Jan Rossmeisl and John R. Kitchin},title = { A Linear Response {DFT}$\mathplus$ U Study of Trends in the Oxygen Evolution Activity of Transition Metal Rutile Dioxides },journal = {J. Phys. Chem. C}}

@article{Xu_2015,doi = {10.1063/1.4914093},url = {http://dx.doi.org/10.1063/1.4914093},year = 2015,month = {mar},publisher = {{AIP} Publishing},volume = {142},number = {10},pages = {104703},author = {Zhongnan Xu and John R. Kitchin},title = {Relationships between the surface electronic and chemical properties of doped 4d and 5d late transition metal dioxides},journal = {J. Chem. Phys.}}

@article{Boes_2015,doi = {10.1016/j.susc.2015.02.011},url = {http://dx.doi.org/10.1016/j.susc.2015.02.011},year = 2015,month = {mar},publisher = {Elsevier {BV}},author = {Jacob Boes and Peter Kondratyuk and Chunrong Yin and James B. Miller and Andrew J. Gellman and John R. Kitchin},title = {Core level shifts in Cu{\textendash}Pd alloys as a function of bulk composition and structure},journal = {Surface Science}}
</pre>

<p>
Let us look at a tabular form of that data so it is sortable. We attempt to remove some duplicates based on the title and doi. The duplicates come about because there is more than one source where this data is pulled from. This is a little tricky, we do a case insensitive title comparison, but that still fails if the titles have different white space in them, e.g. "111" vs "1 1 1", and different sources do that. Also, the DOIs are sometimes missing, and sometimes have different cases, and sometimes are not correct. This code tries to fix most of those issues.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> requests
<span style="color: #0000FF;">import</span> json

<span style="color: #BA36A5;">resp</span> = requests.get(<span style="color: #008000;">"http://pub.orcid.org/0000-0003-2625-9232/orcid-works"</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   headers={<span style="color: #008000;">'Accept'</span>:<span style="color: #008000;">'application/orcid+json'</span>})
<span style="color: #BA36A5;">results</span> = resp.json()

<span style="color: #BA36A5;">data</span> = []
<span style="color: #BA36A5;">TITLES</span>, <span style="color: #BA36A5;">DOIs</span> = [], []

<span style="color: #0000FF;">for</span> i, result <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>( results[<span style="color: #008000;">'orcid-profile'</span>][<span style="color: #008000;">'orcid-activities'</span>]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   [<span style="color: #008000;">'orcid-works'</span>][<span style="color: #008000;">'orcid-work'</span>]):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">title</span> = <span style="color: #006FE0;">str</span>(result[<span style="color: #008000;">'work-title'</span>][<span style="color: #008000;">'title'</span>][<span style="color: #008000;">'value'</span>].encode(<span style="color: #008000;">'utf-8'</span>))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">doi</span> = <span style="color: #008000;">'None'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> x <span style="color: #0000FF;">in</span> result.get(<span style="color: #008000;">'work-external-identifiers'</span>, []):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">for</span> eid <span style="color: #0000FF;">in</span> result[<span style="color: #008000;">'work-external-identifiers'</span>][<span style="color: #008000;">'work-external-identifier'</span>]:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> eid[<span style="color: #008000;">'work-external-identifier-type'</span>] == <span style="color: #008000;">'DOI'</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">doi</span> = <span style="color: #006FE0;">str</span>(eid[<span style="color: #008000;">'work-external-identifier-id'</span>][<span style="color: #008000;">'value'</span>].encode(<span style="color: #008000;">'utf-8'</span>))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">AIP journals tend to have a \n in the DOI, and the doi is the second line. we get</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">that here.</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> <span style="color: #006FE0;">len</span>(doi.split(<span style="color: #008000;">'\n'</span>)) == 2:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">doi</span> = doi.split(<span style="color: #008000;">'\n'</span>)[1]

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">pub_date</span> = result.get(<span style="color: #008000;">'publication-date'</span>, <span style="color: #D0372D;">None</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> pub_date:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">year</span> = pub_date.get(<span style="color: #008000;">'year'</span>, <span style="color: #D0372D;">None</span>).get(<span style="color: #008000;">'value'</span>).encode(<span style="color: #008000;">'utf-8'</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">else</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">year</span> = <span style="color: #008000;">'Unknown'</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Try to minimize duplicate entries that are found</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">dup</span> = <span style="color: #D0372D;">False</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> title.lower() <span style="color: #0000FF;">in</span> TITLES:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">dup</span> = <span style="color: #D0372D;">True</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> (doi != <span style="color: #008000;">'None'</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">and</span> doi.lower() <span style="color: #0000FF;">in</span> DOIs):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">dup</span> = <span style="color: #D0372D;">True</span>

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">if</span> <span style="color: #0000FF;">not</span> dup:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">truncate title to first 50 characters</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'| {3} | {0}  | {1} | [[doi:{2}]]|'</span>.<span style="color: #006FE0;">format</span>(title[0:50], year, doi, result[<span style="color: #008000;">'work-type'</span>]))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   TITLES.append(title.lower())
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   DOIs.append(doi.lower())
</pre>
</div>

<div class="org-src-container">

<pre class="src src-org"><span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | A Linear Response DFT+ U Study of Trends in the Ox | 2015 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/jp511426q">doi:10.1021/jp511426q</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Relationships between the surface electronic and c | 2015 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1063/1.4914093">doi:10.1063/1.4914093</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Core level shifts in Cu&#8211;Pd alloys as a function    | 2015 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.susc.2015.02.011">doi:10.1016/j.susc.2015.02.011</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Estimating bulk-composition-dependent H2 adsorptio | 2015 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/cs501585k">doi:10.1021/cs501585k</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Probing the Coverage Dependence of Site and Adsorb | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/jp508805h">doi:10.1021/jp508805h</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Relating the electronic structure and reactivity o | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.catcom.2013.10.028">doi:10.1016/j.catcom.2013.10.028</a></span><span style="color: #006400; background-color: #EAFFEA;">                     |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Electrocatalytic Oxygen Evolution with an Immobili | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/ja5015986">doi:10.1021/ja5015986</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Identifying Potential BO 2 Oxide Polymorphs for Ep | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/am4059149">doi:10.1021/am4059149</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Simulating temperature programmed desorption of ox | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1007/s11244-013-0166-3">doi:10.1007/s11244-013-0166-3</a></span><span style="color: #006400; background-color: #EAFFEA;">                        |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Probing the effect of electron donation on CO2 abs | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1039/c3ra47097k">doi:10.1039/c3ra47097k</a></span><span style="color: #006400; background-color: #EAFFEA;">                               |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Effects of concentration, crystal structure, magne | 2014 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/jp507957n">doi:10.1021/jp507957n</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Effects of O 2 and SO 2 on the Capture Capacity of | 2013 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/ie400582a">doi:10.1021/ie400582a</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Number of outer electrons as descriptor for adsorp | 2013 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Interactions in 1-ethyl-3-methyl imidazolium tetra | 2013 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:http://dx.doi.org/10.1016/j.molstruc.2013.01.046">doi:http://dx.doi.org/10.1016/j.molstruc.2013.01.046</a></span><span style="color: #006400; background-color: #EAFFEA;"> |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Comparisons of amine solvents for post-combustion  | 2013 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:http://dx.doi.org/10.1016/j.ijggc.2013.06.020">doi:http://dx.doi.org/10.1016/j.ijggc.2013.06.020</a></span><span style="color: #006400; background-color: #EAFFEA;">    |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Chemical and Molecular Descriptors for the Reactiv | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/ie301419q">doi:10.1021/ie301419q</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Spectroscopic Characterization of Mixed Fe&#8211;Ni Ox   | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/cs3002644">doi:10.1021/cs3002644</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| REPORT           | Modeling Coverage Dependence in Surface Reaction N | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.2172/1149701">doi:10.2172/1149701</a></span><span style="color: #006400; background-color: #EAFFEA;">                                  |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Vibrational spectroscopy characterization of CO2-i | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | The role of electrolytes in the oxygen evolution r | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | The outlook for improved carbon capture technology | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.pecs.2012.03.003">doi:10.1016/j.pecs.2012.03.003</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Structure and Relative Thermal Stability of Mesopo | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1111/j.1551-2916.2012.05236.x">doi:10.1111/j.1551-2916.2012.05236.x</a></span><span style="color: #006400; background-color: #EAFFEA;">                 |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Preface: Trends in computational catalysis         | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1007/s11244-012-9808-0">doi:10.1007/s11244-012-9808-0</a></span><span style="color: #006400; background-color: #EAFFEA;">                        |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Exergetic analysis of chemical looping reforming   | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Evaluation of a Primary Amine-Functionalized Ion-E | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/ie300452c">doi:10.1021/ie300452c</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Electrocatalytic water oxidation using iron-center | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Effects of strain, d-band filling, and oxidation s | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1063/1.4746117">doi:10.1063/1.4746117</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| BOOK             | Coverage dependent adsorption properties of atomic | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1039/9781849734776-00083">doi:10.1039/9781849734776-00083</a></span><span style="color: #006400; background-color: #EAFFEA;">                      |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Comparisons of solvents for post-combustion CO2 ca | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Characterization of an ion exchange resin for CO2  | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Assessing the ability of using first principles to | 2012 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Universality in Oxygen Evolution Electrocatalysis  | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1002/cctc.201000397">doi:10.1002/cctc.201000397</a></span><span style="color: #006400; background-color: #EAFFEA;">                           |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | The effect of CO 2 partial pressure on capture wit | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Preparation of Mesoporous La 0.8Sr 0.2MnO 3 infilt | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1149/1.3570235">doi:10.1149/1.3570235</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Identification of sulfur-tolerant bimetallic surfa | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/cs200039t">doi:10.1021/cs200039t</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Effects of strain, d-band filling, and oxidation s | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1063/1.3631948">doi:10.1063/1.3631948</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Determining the conditions necessary for optimal C | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Configurational correlations in the coverage depen | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1063/1.3561287">doi:10.1063/1.3561287</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | An electronic structure based understanding of ami | 2011 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | CO2 Adsorption on Supported Molecular Amidine Syst | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1002/cssc.201000056">doi:10.1002/cssc.201000056</a></span><span style="color: #006400; background-color: #EAFFEA;">                           |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Separation of CO2 from flue gas using electrochemi | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.fuel.2009.11.036">doi:10.1016/j.fuel.2009.11.036</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | New solid-state table: estimating d-band character | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1080/08927022.2010.481794">doi:10.1080/08927022.2010.481794</a></span><span style="color: #006400; background-color: #EAFFEA;">                     |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Simple model explaining and predicting coverage-de | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1103/PhysRevB.82.045414">doi:10.1103/PhysRevB.82.045414</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Intrinsic and extrinsic factors associated with CO | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Electrochemical concentration of carbon dioxide fr | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1149/1.3432440">doi:10.1149/1.3432440</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Catalyzing the catalyst: Hydrogen dissociation and | 2010 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Uncertainty and figure selection for DFT based clu | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1080/08927020902833137">doi:10.1080/08927020902833137</a></span><span style="color: #006400; background-color: #EAFFEA;">                        |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Sulphur poisoning of water-gas shift catalysts: Si | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1080/08927020902833129">doi:10.1080/08927020902833129</a></span><span style="color: #006400; background-color: #EAFFEA;">                        |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Step decoration of chiral metal surfaces           | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1063/1.3096964">doi:10.1063/1.3096964</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Relating the coverage dependence of oxygen adsorpt | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.susc.2009.01.021">doi:10.1016/j.susc.2009.01.021</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Hydrogen Dissociation and Spillover on Individual  | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1103/PhysRevLett.103.246102">doi:10.1103/PhysRevLett.103.246102</a></span><span style="color: #006400; background-color: #EAFFEA;">                   |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Correlations in coverage-dependent atomic adsorpti | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1103/PhysRevB.79.205412">doi:10.1103/PhysRevB.79.205412</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Catalyzing the catalyst: Novel pathways to hydroge | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Atomistic thermodynamics study of the adsorption a | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.jcat.2008.11.020">doi:10.1016/j.jcat.2008.11.020</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Ancillary oxygen-fired combustion using electroche | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Adsorbate Cu interactions and catalyst morphologie | 2009 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | &lt;title&gt;Rotational isomeric state theory applied to | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1117/12.776303">doi:10.1117/12.776303</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | The effect of hydration on the adsorption of carbo | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Pt-decorated electrocatalysts for direct alcohol f | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | PEM-based electrochemical separation of gases      | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | First principles, atomistic thermodynamics for sul | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Evaluating uncertainty in Ab initio phase diagrams | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | ENVR 1-Basic research needs to assure a secure ene | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| OTHER            | Density functional theory studies of alloys in het | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1039/b608782p">doi:10.1039/b608782p</a></span><span style="color: #006400; background-color: #EAFFEA;">                                 |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Alloy surface segregation in reactive environments | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1103/PhysRevB.77.075437">doi:10.1103/PhysRevB.77.075437</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | A first principles evaluation of the role of subst | 2008 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Pt nanoparticle electrocatalyst synthesis for dire | 2007 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Pt nanoparticle anode electrocatalysts for direct  | 2007 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Response to &amp;quot;comment on 'Trends in the exchan | 2006 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1149/1.2358292">doi:10.1149/1.2358292</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Trends in the exchange current for hydrogen evolut | 2005 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1149/1.1856988">doi:10.1149/1.1856988</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Trends in the chemical properties of early transit | 2005 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.cattod.2005.04.008">doi:10.1016/j.cattod.2005.04.008</a></span><span style="color: #006400; background-color: #EAFFEA;">                     |</span>
<span style="color: #006400; background-color: #EAFFEA;">| CONFERENCE_PAPER | Alloy surface segregation in reactive environments | 2005 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | The role of adsorbate-adsorbate interactions in th | 2004 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Role of strain and ligand effects in the modificat | 2004 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1103/PhysRevLett.93.156801">doi:10.1103/PhysRevLett.93.156801</a></span><span style="color: #006400; background-color: #EAFFEA;">                    |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Origin of the overpotential for oxygen reduction a | 2004 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/jp047349j">doi:10.1021/jp047349j</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Modification of the surface electronic and chemica | 2004 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1063/1.1737365">doi:10.1063/1.1737365</a></span><span style="color: #006400; background-color: #EAFFEA;">                                |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Elucidation of the active surface and origin of th | 2003 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.susc.2003.09.007">doi:10.1016/j.susc.2003.09.007</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | A four-point probe correlation of oxygen sensitivi | 2003 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/j.susc.2003.08.041">doi:10.1016/j.susc.2003.08.041</a></span><span style="color: #006400; background-color: #EAFFEA;">                       |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | A comparison of gold and molybdenum nanoparticles  | 2003 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1016/s0039-6028(02)02679-1">doi:10.1016/s0039-6028(02)02679-1</a></span><span style="color: #006400; background-color: #EAFFEA;">                    |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | H3PW12O40-functionalized tip for scanning tunnelin | 2002 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1073/pnas.072514399">doi:10.1073/pnas.072514399</a></span><span style="color: #006400; background-color: #EAFFEA;">                           |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Preparation of paramagnetic ligands for coordinati | 1997 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | Preparation and Characterization of a Bis-Semiquin | 1995 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:10.1021/jo00117a004">doi:10.1021/jo00117a004</a></span><span style="color: #006400; background-color: #EAFFEA;">                              |</span>
<span style="color: #006400; background-color: #EAFFEA;">| JOURNAL_ARTICLE  | SYNTHESIS AND CHARACTERIZATION OF TRISEMIQUINONE L | 1995 | </span><span style="color: #006DAF; text-decoration: underline;"><a href="doi:None">doi:None</a></span><span style="color: #006400; background-color: #EAFFEA;">                                             |</span>
</pre>
</div>

<p>
Not too bad. Clearly we could do a lot more work to fine tune exactly what data we retrieve, and then what to do with it. The tools are all here to do that.
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/03/28/The-orcid-api-and-generating-a-bibtex-file-from-it.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>]]></content>
  </entry>
</feed>
