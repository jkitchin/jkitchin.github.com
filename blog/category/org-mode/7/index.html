

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Kitchin Research Group</title>
  <meta name="google-site-verification" content="CGcacJdHc2YoZyI0Vey9XRA5qwhhFDzThKJezbRFcJ4" />
  <meta name="description" content="Chemical Engineering at Carnegie Mellon University">
  <meta name="author" content="John Kitchin">
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="/blog/feed/atom" />
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/base.css?v=1">
  <link rel="stylesheet" href="/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld" href="/css/handheld.css?v=1">
  <link rel="stylesheet" href="/css/pygments_murphy.css" type="text/css" />

  <script src="/js/libs/modernizr-1.7.min.js"></script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  <link rel="stylesheet" href="/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
<div id="header" class="header_gradient theme_font">
<table><tr><td>
    <h1><a href="/">The Kitchin Research Group</a></h1>
    <h2>Chemical Engineering at Carnegie Mellon University</h2>
</td>
<td colspan=100%><div style="float:right;width:100%;text-align:right;"> <span id='badgeCont737515' style='width:126px'><script src='http://labs.researcherid.com/mashlets?el=badgeCont737515&mashlet=badge&showTitle=false&className=a&rid=A-2363-2010'></script></span></div>
</td></tr>
</table>
</div>
  <div id="navigation" class="grid_12">

    <ul class="theme_font">
      <li><a href="/blog"
             class="">Blog</a></li>

      <li><a href="/blog/archive"
             class="">Archives</a></li>

      <li><a href="http://www.researcherid.com/rid/A-2363-2010" target="_new">Publications</a></li>

      <li><a href="/research.html"
             class="">Research</a></li>

      <li><a href="/categories.html"
             class="">Categories</a></li>

      <li><a href="/about.html"
             class="">About us</a></li>
    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_8">
            
  





<article>
  <div class="blog_post">
    <header>
      <div id="A-function-to-save-an-org-file-for-submitting-assignments-in-org-mode"></div>
      <h2 class="blog_post_title"><a href="/blog/2014/01/01/A-function-to-save-an-org-file-for-submitting-assignments-in-org-mode/" rel="bookmark" title="Permanent Link to A function to save an org-file for submitting assignments in org-mode">A function to save an org-file for submitting assignments in org-mode</a></h2>
      <p><small><span class="blog_post_date">Posted January 01, 2014 at 02:55 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2014/01/01/A-function-to-save-an-org-file-for-submitting-assignments-in-org-mode#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      




<p>
I am going to be assigning homeworks and quizzes in org-mode next semester, and it would be nice if there was a function that would save the file with the right name in the right place. The file will have some keywords at the top to identify the student, course and assignment. Those look like:
</p>
<pre class="example">
#+NAME: John Kitchin
#+ANDREWID: jkitchin
#+COURSE: 06-640
#+ASSIGNMENT: quiz1
</pre>

<p>
I would like a function that saves the current buffer to a file like /some-path/ANDREWID-COURSE-ASSIGNMENT.org. That will be "turning the assignment in" so I can do some analysis of the files. I previously wrote about getting keywords from org-files <a href="http://kitchingroup.cheme.cmu.edu/blog/2013/05/05/Getting-keyword-options-in-org-files/">here</a> . We will build on that to accomplish this goal. Here is the function that seems to do what I want. For now it saves the file in the same directory, with the correct name.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8b0000;">defun</span> <span style="color: #8b2323;">submit-assignment</span> ()
  <span style="color: #228b22;">"Save current buffer to assignment. You must set #+ANDREWID, #+COURSE and #+ASSIGNMENT. There is no checking for this."</span>
  (interactive)
  (save-buffer)
  (<span style="color: #8b0000;">let</span> ((org-keywords (org-element-map (org-element-parse-buffer 'element) 'keyword
                        (<span style="color: #8b0000;">lambda</span> (keyword) (cons (org-element-property <span style="color: #cd0000;">:key</span> keyword)
                                                (org-element-property <span style="color: #cd0000;">:value</span> keyword)))))
        (assignment-content (buffer-string)) <span style="color: #ff0000; font-weight: bold;">; </span><span style="color: #ff0000; font-weight: bold;">store contents to write to file later</span>
        (assignment-filename))
    <span style="color: #ff0000; font-weight: bold;">;; </span><span style="color: #ff0000; font-weight: bold;">create the filename we will save the buffer in</span>
    (setq assignment-filename (concat (cdr (assoc <span style="color: #228b22;">"ANDREWID"</span> org-keywords))
                                      <span style="color: #228b22;">"-"</span>
                                      (cdr (assoc <span style="color: #228b22;">"COURSE"</span> org-keywords))
                                      <span style="color: #228b22;">"-"</span>
                                      (cdr (assoc <span style="color: #228b22;">"ASSIGNMENT"</span> org-keywords))
                                      <span style="color: #228b22;">".org"</span>))
    <span style="color: #ff0000; font-weight: bold;">;; </span><span style="color: #ff0000; font-weight: bold;">now write out contents to filename</span>
    (<span style="color: #8b0000;">with-temp-file</span> assignment-filename
      (insert assignment-content))
    (message <span style="color: #228b22;">"%s was submitted"</span> assignment-filename)))

(submit-assignment)
</pre>
</div>

<pre class="example">
jkitchin-06-640-quiz1.org was submitted
</pre>

<p>
Now, we have a nice function that can be put as a link in the org-file: <pre>elisp:submit-assignment</pre> , or <pre>elisp:submit-assignment</pre> . The assignment will be copied to a location specified, and I can grade it, assess it, etc&#x2026; from there. That function will have to be loaded by students, but since I provide them with lisp files that are loaded at startup that should not be an issue. 
</p>

<p>
This solution lacks some features I have to think about. For example, if the path where everyone submits to is common, everyone will be able to read the file, which is not desirable. It is also not feasible to make the submitted files read-only to the students this way (so they cannot modify the files after they turn them in). I could have the submit function do something like submit to box.com by email.
</p>

<p>
I am not sure how grading of these files would go. In the past, I have preferred PDF files (which you can export org to) because I could grade them using a tablet without modifying the actual content in the files. However it would not be simple at all to export an org-file to PDF with that data in a machine readable way. One point of having them in org-mode is that I could collect statistics from the headings of many files pretty easily. I have written code to annotate org-files in the past, which I might have to dig out. 
</p>

<p>
There is a limitation of the submit function, and that is if the org-file references images or other files (I would expect many of my assignments would have plots in them). Those would not be copied to the right place. I handle those when I publish the blog, so it could be done. But, it would require creating a new directory, and writing all the files to it (including making sure the relative paths are handled correctly), or creating some kind of zip-archive that contains everything. That sounds like a project for another day!
</p>

<div class="inlinetask">
<b><span class="todo TODO">TODO</span> rewrite the submit-assignment function to copy any images or files it links to into the submission directory</b><br  />
nil</div>
<p>Copyright (C) 2014 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2014/01/01/A-function-to-save-an-org-file-for-submitting-assignments-in-org-mode.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2014/01/01/A-function-to-save-an-org-file-for-submitting-assignments-in-org-mode#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Interactive-quizzes-with-feedback-in-org-mode"></div>
      <h2 class="blog_post_title"><a href="/blog/2014/01/01/Interactive-quizzes-with-feedback-in-org-mode/" rel="bookmark" title="Permanent Link to Interactive quizzes with feedback in org-mode">Interactive quizzes with feedback in org-mode</a></h2>
      <p><small><span class="blog_post_date">Posted January 01, 2014 at 12:58 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2014/01/01/Interactive-quizzes-with-feedback-in-org-mode#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. What is 2 + 4?</a></li>
<li><a href="#sec-2">2. Lets make a custom link for this</a></li>
<li><a href="#sec-3">3. Storing quiz answers and number of attempts</a></li>
<li><a href="#sec-4">4. Using inline tasks instead of headings</a></li>
<li><a href="#sec-5">5. Concluding thoughts</a></li>
</ul>
</div>
</div>

<p>
I have been exploring ways to facilitate learning and grading. One way I like is to provide quizzes inline with text
Here are some examples of "interactive" quizzes with feedback to the user in org-mode. The principle idea is to use a headline for the question, and use properties to hold the answer. The answers are coded into links that run lisp code to check if the link text matches the correct answer. The properties are folded, so you have to willfully cheat to look at the answer. For getting instant feedback, this isn't such an issue. These aren't for formal assessment, but for knowledge checkpoints in active learning.
</p>

<p>
Blog alert: The links may only work in the actual org-file in Emacs, they will not function in html.  
</p>

<p>
Here is an example in a subheading. These links play an amusing sound (crowd cheers for correct answer, a buzzer for a wrong answer). The sounds are stored locally with the file. This gives students immediate feedback on their answer. These might be incorporated into reading assignments.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> What is 2 + 4?</h2>
<div class="outline-text-2" id="text-1">
<p>
a) <pre>elisp:(if (string= "4" (org-entry-get (point) "CORRECT-ANSWER"))  (play-sound-file "sounds/99636__tomlija__small-crowd-yelling-yeah.wav" 0.91 nil) (play-sound-file "sounds/fail-buzzer-01.wav" 0.91 nil))</pre> 
</p>

<p>
b) <pre>elisp:(if (string= "6" (org-entry-get (point) "CORRECT-ANSWER"))  (play-sound-file "sounds/99636__tomlija__small-crowd-yelling-yeah.wav" 0.91 nil) (play-sound-file "sounds/fail-buzzer-01.wav" 0.91 nil))</pre> 
</p>

<p>
c) <pre>elisp:(if (string= "-2" (org-entry-get (point) "CORRECT-ANSWER"))  (play-sound-file "sounds/99636__tomlija__small-crowd-yelling-yeah.wav" 0.91 nil) (play-sound-file "sounds/fail-buzzer-01.wav" 0.91 nil))</pre> 
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Lets make a custom link for this</h2>
<div class="outline-text-2" id="text-2">
<p>
Hand coding the links isn't very convenient. Let us write an org-link function that is more convenient. This new function will also record the number of correct and incorrect attempts. You could hard code some sound into them, but I did not do that here.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-add-link-type 
 <span style="color: #228b22;">"ans"</span> 
 (<span style="color: #8b0000;">lambda</span> (path) 
   (<span style="color: #8b0000;">let*</span> ((correct-answer (org-entry-get (point) <span style="color: #228b22;">"CORRECT-ANSWER"</span>))
          (ncorrect (org-entry-get (point) <span style="color: #228b22;">"NUM-CORRECT"</span>))
          (num-correct (<span style="color: #8b0000;">if</span> ncorrect (string-to-number ncorrect) 0))
          (nincorrect (org-entry-get (point) <span style="color: #228b22;">"NUM-INCORRECT"</span>))
          (num-incorrect (<span style="color: #8b0000;">if</span> nincorrect (string-to-number nincorrect) 0)))
     (<span style="color: #8b0000;">if</span> (string= path correct-answer) 
         (<span style="color: #8b0000;">progn</span>
          (org-entry-put (point) <span style="color: #228b22;">"NUM-CORRECT"</span> (number-to-string (+ num-correct 1)))
          (message <span style="color: #228b22;">"correct"</span>))
       (org-entry-put (point) <span style="color: #228b22;">"NUM-INCORRECT"</span> (number-to-string (+ num-incorrect 1)))
       (message <span style="color: #228b22;">"incorrect"</span>)))))
</pre>
</div>

<p>
That function was a bit trickier than I thought it would be. First, I used let* because the first time you click on a link the correct answer counters may not exist, so getting the property would return nil. If it is nil, then we should initialize to 0. If it is not nil, we need to convert the string that is returned to an integer so we can add to it later. Then, we need to convert that integer back to a string to store it as a property, otherwise it is stored as some strange control character. 
</p>

<p>
Now, we can put our question in.
question: Is 3 greater than 2?
</p>

<p>
Here are the new links:  <pre>ans:yes</pre> <pre>ans:no</pre> 
</p>


<p>
That function goes along way to making it pretty easy to write the answers. One limitation here is that you can only put one question per section. We address that later. It is still easy to cheat if you want. We could do a few things to make that harder. One idea would be to encrypt the answers, and compare the hash of the answers. Another is to just record what was clicked on, and then grade it later. In the next section we try that out.
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-fa6cc63f-e2da-47a7-9721-cb970dde335e" name="ID-fa6cc63f-e2da-47a7-9721-cb970dde335e"></a><span class="section-number-2">3</span> Storing quiz answers and number of attempts</h2>
<div class="outline-text-2" id="text-3">

<p>
Here, we store the answer, and number of attempts. Students won't get feedback from this approach, but they cannot cheat either. They could just type answers in to the org-file, but this approach is like a Scantron multiple choice exam that could be automatically graded later. You could use something like this as an electronic clicker to quickly assess everyone's understanding of some concepts.
</p>

<p>
Here is our new link function.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-add-link-type 
 <span style="color: #228b22;">"ans2"</span> 
 (<span style="color: #8b0000;">lambda</span> (path) 
   (org-entry-put (point) <span style="color: #228b22;">"ANSWER"</span> path)
   (<span style="color: #8b0000;">let*</span> ((nattempts (org-entry-get (point) <span style="color: #228b22;">"NUM-ATTEMPTS"</span>))
          (num-attempts (<span style="color: #8b0000;">if</span> nattempts (string-to-number nattempts) 0)))
     (org-entry-put (point) <span style="color: #228b22;">"NUM-ATTEMPTS"</span> (number-to-string (+ num-attempts 1))))
   (message <span style="color: #228b22;">"You selected %s for your answer"</span> path)))
</pre>
</div>

<p>
And now a question: Is 3 greater than 2?
<pre>ans2:yes</pre> <pre>ans2:no</pre> 
</p>

<p>
This way works very well. It might also be a good idea to give each question a unique id (org-id-get-create) so you can collect specific results. 
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Using inline tasks instead of headings</h2>
<div class="outline-text-2" id="text-4">
<p>
If you were integrating these into a book, it would be inconvenient to use headings because they would mess up the outline. We can use inline tasks instead.
</p>

<div class="inlinetask">
<b>Is 3 greater than 2?</b><br  />
<p>
<pre>ans2:yes</pre> <pre>ans2:no</pre> 
</p>
</div>

<p>
This adds some additional lines, but does not change the heading level. We can put multiple questions in then.
</p>

<div class="inlinetask">
<b>What is 4*4?</b><br  />
<p>
<pre>ans2:16</pre> <pre>ans2:18</pre> <pre>ans2:8</pre> 
</p>
</div>

<p>
Interesing, I noticed in this last example that a link path must have at least two characters to be automatically recognized by org-mode. I had to put double square brackets to make it a link!
</p>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Concluding thoughts</h2>
<div class="outline-text-2" id="text-5">
<p>
This seems like a pretty promising approach to getting structured input from students. You would have to invest some time training them to use emacs and org-mode, and not modify the file in ways they are not supposed to.  You would also have to invest some time in writing analysis code to collect all the answers and analyze them somehow. I do not think that would be too hard though, and the payoff could be large. By giving students quick feedback they could have a better understanding of what they know, and might ask better questions. This could be a useful approach to active learning activities that students work on while reading.
</p>
</div>
</div>
<p>Copyright (C) 2014 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2014/01/01/Interactive-quizzes-with-feedback-in-org-mode.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2014/01/01/Interactive-quizzes-with-feedback-in-org-mode#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Using-data-in-a-table-in-another-org-file"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/12/22/Using-data-in-a-table-in-another-org-file/" rel="bookmark" title="Permanent Link to Using data in a table in another org-file">Using data in a table in another org-file</a></h2>
      <p><small><span class="blog_post_date">Posted December 22, 2013 at 01:42 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2013/12/22/Using-data-in-a-table-in-another-org-file#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated January 16, 2014 at 07:30 AM</span>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
I have found using tables in an org-file as data sources to code blocks very convenient for documenting work. A typical work flow might go like this:
</p>
<ol class="org-ol">
<li>Use a code block to generate some data in an org-table.
</li>
<li>Use another code block to analyze the data.
</li>
</ol>

<p>
For example, here is a code block that prints data in a table <sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>:
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> numpy <span style="color: #8b0000;">as</span> np

<span style="color: #8b0000;">print</span> <span style="color: #228b22;">'#+tblname: cos-data'</span>
<span style="color: #8b0000;">print</span> <span style="color: #228b22;">'| x | cos(x)|'</span>
<span style="color: #8b0000;">print</span> <span style="color: #228b22;">'|-'</span>

<span style="color: #8b0000;">for</span> x <span style="color: #8b0000;">in</span> np.linspace(0, 2*np.pi, 10):
    <span style="color: #8b0000;">print</span> <span style="color: #228b22;">'|{0}|{1}|'</span>.<span style="color: #cd0000;">format</span>(x, np.cos(x))
</pre>
</div>

<table id="cos-data" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="right">x</th>
<th scope="col" class="right">cos(x)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">0.0</td>
<td class="right">1.0</td>
</tr>

<tr>
<td class="right">0.698131700798</td>
<td class="right">0.766044443119</td>
</tr>

<tr>
<td class="right">1.3962634016</td>
<td class="right">0.173648177667</td>
</tr>

<tr>
<td class="right">2.09439510239</td>
<td class="right">-0.5</td>
</tr>

<tr>
<td class="right">2.79252680319</td>
<td class="right">-0.939692620786</td>
</tr>

<tr>
<td class="right">3.49065850399</td>
<td class="right">-0.939692620786</td>
</tr>

<tr>
<td class="right">4.18879020479</td>
<td class="right">-0.5</td>
</tr>

<tr>
<td class="right">4.88692190558</td>
<td class="right">0.173648177667</td>
</tr>

<tr>
<td class="right">5.58505360638</td>
<td class="right">0.766044443119</td>
</tr>

<tr>
<td class="right">6.28318530718</td>
<td class="right">1.0</td>
</tr>
</tbody>
</table>

<p>
Now, we use that table in a code block to plot the data. We do this by using some header arguments to the code block:
</p>

<pre class="example">
#+BEGIN_SRC python :var data=cos-data
</pre>

<p>
Then we can use the <code>data</code> variable inside the code block like this:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> numpy <span style="color: #8b0000;">as</span> np
<span style="color: #8b0000;">import</span> matplotlib.pyplot <span style="color: #8b0000;">as</span> plt

<span style="color: #8b008b;">data</span> = np.array(data) <span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">data is a list coming in</span>
<span style="color: #8b008b;">x</span> = data[:, 0]
<span style="color: #8b008b;">y</span> = data[:, 1]
plt.plot(x, y)
plt.xlabel(<span style="color: #228b22;">'x'</span>)
plt.ylabel(<span style="color: #228b22;">'cos(x)'</span>)
plt.savefig(<span style="color: #228b22;">'images/cos-plot.png'</span>)
</pre>
</div>


<div class="figure">
<p><img src="/media/2013-12-22-Using-data-in-a-table-in-another-org-file/cos-plot.png"> 
</p>
</div>

<p>
That is pretty awesome, but what if we have data in a table from another org-file? It turns out we can use it too. I have data for the sin(x) stored in a table called <code>sin-data</code> in <a href="/media/2013-12-22-Using-data-in-a-table-in-another-org-file/sin.org">sin.org</a> , which I now want to use. We can access that table like this in a header arg:
</p>

<pre class="example">
#+BEGIN_SRC python :var data=sin.org:sin-data
</pre>

<p>
And now use the data variable just like before!
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">import</span> numpy <span style="color: #8b0000;">as</span> np
<span style="color: #8b0000;">import</span> matplotlib.pyplot <span style="color: #8b0000;">as</span> plt

<span style="color: #8b008b;">data</span> = np.array(data) <span style="color: #ff0000; font-weight: bold;"># </span><span style="color: #ff0000; font-weight: bold;">data is a list coming in</span>
<span style="color: #8b008b;">x</span> = data[:, 0]
<span style="color: #8b008b;">y</span> = data[:, 1]
plt.plot(x, y)
plt.xlabel(<span style="color: #228b22;">'x'</span>)
plt.ylabel(<span style="color: #228b22;">'sin(x)'</span>)
plt.savefig(<span style="color: #228b22;">'images/sin-plot.png'</span>)
</pre>
</div>


<div class="figure">
<p><img src="/media/2013-12-22-Using-data-in-a-table-in-another-org-file/sin-plot.png"> 
</p>
</div>

<p>
This is a powerful capability, as it allows you to pull data from other files into your current analysis. For example, the supporting information files from some of our recent publications have org-files embedded in them with data stored in org-tables. You could use that data in your own analysis without having to type it in yourself. The only thing you need to do is make sure each table in a document is uniquely named.
</p>

<p>
Special thanks to Eric Schulte for pointing out the syntax for using external tables!
</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p>
You will have to read the raw org-source to see how the code-block arguments look.
</p></div>


</div>
</div><p>Copyright (C) 2014 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/12/22/Using-data-in-a-table-in-another-org-file.org">org-mode source</a><p><p>Org-mode version = 8.2.5c</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2013/12/22/Using-data-in-a-table-in-another-org-file#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Selectively-exporting-headlines-in-org-mode"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/12/08/Selectively-exporting-headlines-in-org-mode/" rel="bookmark" title="Permanent Link to Selectively exporting headlines in org-mode">Selectively exporting headlines in org-mode</a></h2>
      <p><small><span class="blog_post_date">Posted December 08, 2013 at 04:35 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2013/12/08/Selectively-exporting-headlines-in-org-mode#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. problem 1&#xa0;&#xa0;&#xa0;<span class="tag"><span class="problem">problem</span></span></a>
<ul>
<li><a href="#sec-1-1">1.1. solution to problem 1&#xa0;&#xa0;&#xa0;<span class="tag"><span class="solution">solution</span></span></a></li>
</ul>
</li>
<li><a href="#sec-2">2. problem 2&#xa0;&#xa0;&#xa0;<span class="tag"><span class="problem">problem</span></span></a>
<ul>
<li><a href="#sec-2-1">2.1. solution to problem 2&#xa0;&#xa0;&#xa0;<span class="tag"><span class="solution">solution</span></span></a></li>
</ul>
</li>
<li><a href="#sec-3">3. Code to export&#xa0;&#xa0;&#xa0;<span class="tag"><span class="code">code</span></span></a>
<ul>
<li><a href="#sec-3-1">3.1. Export just the problems</a></li>
<li><a href="#sec-3-2">3.2. Problems and solutions</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Summary</a></li>
</ul>
</div>
</div>
<p>
I have on several occasions needed to selectively export only portions of an org document. For example, I may write a problem set or exam, and have some headlines that are the problems, and others that are the solutions. Or, I may have done some analysis in a headline, e.g. statistics of problem scores that I do not want in exported content, or I have a manuscript with a supporting information section that does not go in the exported manuscript, and the manuscript cannot go in the supporting information file. 
</p>

<p>
org-mode supports <a href="http://www.gnu.org/software/emacs/manual/html_node/org/Selective-export.html">selective export</a> through use of tags. However, this is inflexible if you want to export multiple different documents with different selective exports, unless you don't mind changing the settings, or commenting and uncommenting lines all the time. 
</p>

<p>
Enter dynamic binding of variables in emacs-lisp. We can temporarily define variables, especially <code>org-export-select-tags</code> and <code>org-export-exclude-tags</code>, and write emacs-lisp code blocks to export the current document the way we want. First, let us create some headlines.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> problem 1&#xa0;&#xa0;&#xa0;<span class="tag"><span class="problem">problem</span></span></h2>
<div class="outline-text-2" id="text-1">
<p>
description of a hard problem
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> solution to problem 1&#xa0;&#xa0;&#xa0;<span class="tag"><span class="solution">solution</span></span></h3>
<div class="outline-text-3" id="text-1-1">
<p>
it is an easy solution
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> problem 2&#xa0;&#xa0;&#xa0;<span class="tag"><span class="problem">problem</span></span></h2>
<div class="outline-text-2" id="text-2">
<p>
what is the square root of 100?
</p>
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> solution to problem 2&#xa0;&#xa0;&#xa0;<span class="tag"><span class="solution">solution</span></span></h3>
<div class="outline-text-3" id="text-2-1">
<p>
why it's 10 of course.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Code to export&#xa0;&#xa0;&#xa0;<span class="tag"><span class="code">code</span></span></h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Export just the problems</h3>
<div class="outline-text-3" id="text-3-1">
<p>
First, let us output this document with just the problems. The code block does that, just put your cursor in in block and press C-c C-c (in emacs of course). 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8b0000;">let</span> ((org-export-exclude-tags '(<span style="color: #228b22;">"solution"</span> <span style="color: #228b22;">"code"</span>))
      (org-latex-default-packages-alist
       '((<span style="color: #228b22;">""</span> <span style="color: #228b22;">"lmodern"</span> nil)
         (<span style="color: #228b22;">"linktocpage,</span>
<span style="color: #228b22;">  pdfstartview=FitH,</span>
<span style="color: #228b22;">  colorlinks,</span>
<span style="color: #228b22;">  linkcolor=blue,</span>
<span style="color: #228b22;">  anchorcolor=blue,</span>
<span style="color: #228b22;">  citecolor=blue,</span>
<span style="color: #228b22;">  filecolor=blue,</span>
<span style="color: #228b22;">  menucolor=blue,</span>
<span style="color: #228b22;">  urlcolor=blue"</span> <span style="color: #228b22;">"hyperref"</span> t)))
      (async nil)
      (subtreep nil)
      (visible-only nil)
      (body-only nil)
      (ext-plist '()))
  (org-latex-export-to-pdf async subtreep visible-only body-only ext-plist))
(rename-file <span style="color: #228b22;">"blog.pdf"</span> <span style="color: #228b22;">"blog-1.pdf"</span>)
</pre>
</div>

<p>
You get this: <a href="/media/2013-12-08-Selectively-exporting-headlines-in-org-mode/blog-1.pdf">blog-1.pdf</a> which only has the problems in it.
</p>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Problems and solutions</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Next, we consider the problems and the solutions. We cannot just get solutions in this document because solutions are nested in the problems.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #8b0000;">let</span> ((org-export-exclude-tags '(<span style="color: #228b22;">"code"</span>))
      (org-latex-default-packages-alist
       '((<span style="color: #228b22;">""</span> <span style="color: #228b22;">"lmodern"</span> nil)
         (<span style="color: #228b22;">"linktocpage,</span>
<span style="color: #228b22;">  pdfstartview=FitH,</span>
<span style="color: #228b22;">  colorlinks,</span>
<span style="color: #228b22;">  linkcolor=blue,</span>
<span style="color: #228b22;">  anchorcolor=blue,</span>
<span style="color: #228b22;">  citecolor=blue,</span>
<span style="color: #228b22;">  filecolor=blue,</span>
<span style="color: #228b22;">  menucolor=blue,</span>
<span style="color: #228b22;">  urlcolor=blue"</span> <span style="color: #228b22;">"hyperref"</span> t)))
      (async nil)
      (subtreep nil)
      (visible-only nil)
      (body-only nil)
      (ext-plist '()))
  (org-latex-export-to-pdf async subtreep visible-only body-only ext-plist))
(rename-file <span style="color: #228b22;">"blog.pdf"</span> <span style="color: #228b22;">"blog-2.pdf"</span> t)
</pre>
</div>

<p>
This document (<a href="/media/2013-12-08-Selectively-exporting-headlines-in-org-mode/blog-2.pdf">blog-2.pdf</a> ) now has problems and solutions. Note that neither of these documents has the section we labeled <code>:code:</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Summary</h2>
<div class="outline-text-2" id="text-4">
<p>
Tags are a nice way to label sections. In combination with dynamic binding, you can build code blocks that selectively export pieces of an org-file by temporarily defining the values of variables. In this example, there are four versions of this document: 1) the org-file that contains everything, 2) the html blog post, 3) a pdf with the problems, and 4) a pdf with problems and solutions. Good luck getting that out of a Word file ;)
</p>
</div>
</div>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/12/08/Selectively-exporting-headlines-in-org-mode.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2013/12/08/Selectively-exporting-headlines-in-org-mode#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Custom-directives"></div>
      <h2 class="blog_post_title"><a href="/blog/2013/11/30/Custom-directives/" rel="bookmark" title="Permanent Link to Custom directives">Custom directives</a></h2>
      <p><small><span class="blog_post_date">Posted November 30, 2013 at 09:19 AM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/org-mode/'>org-mode</a>, <a href='/blog/category/emacs/'>emacs</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2013/11/30/Custom-directives#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated November 30, 2013 at 09:35 AM</span>
      </small></p>
    </header>
    <div class="post_prose">
      





<p>
You can define custom <a href="http://orgmode.org/worg/org-contrib/org-special-blocks.html">special blocks</a> in org-mode. Here is an example of creating attention and note directives. Note you need to specify the styles and environments in the header like this:
</p>
<pre class="example">
#+HTML_HEAD_EXTRA:  &lt;style&gt;.attention {font-size: 30px; text-indent: 50px; color: red; background-color:HotPink;}&lt;/style&gt;
#+HTML_HEAD_EXTRA:  &lt;style&gt;.note {font-size: 30px; text-indent: 50px; background-color:LightSkyBlue;}&lt;/style&gt;

#+LATEX_HEADER: \usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
#+LATEX_HEADER: \newenvironment{attention}{\color{red}}{\ignorespacesafterend}
#+LATEX_HEADER: \newenvironment{note}{\itshape}{\ignorespacesafterend}
</pre>

<p>
That allows you to define different looks for exporting to html and LaTeX. For the blog post, I put the style in the body of the html.
</p>

<style>.attention {font-size: 30px; text-indent: 50px; color: red; background-color:HotPink;}</style>
<style>.note {font-size: 30px; text-indent: 50px; background-color:LightSkyBlue;}</style>

<p>
Here is the markup for an attention block.
</p>

<pre class="example">
#+BEGIN_ATTENTION
Pay attention to this text!
#+END_ATTENTION
</pre>

<p>
Renders like this: 
</p>
<div class="attention">
<p>
Pay attention to this text!
</p>

</div>


<p>
A note is defined as:
</p>
<pre class="example">
#+begin_note
this is a note
#+end_note
</pre>

<p>
and it renders like this:
</p>
<div class="note">
<p>
this is a note.
</p>

</div>

<p>
I am not sure if it is possible to add arguments, e.g. via attributes. Anyway, this may enable some flexibility in adding content that may be rendered in html and LaTeX in org-mode. There is a function (org-html-special-block and org-latex-special-block) that does the rendering, and it has an info plist that probably has the information. It does not appear you can pass arguments in though. That would require a filter that redefines the rendering.
</p>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/11/30/Custom-directives.org">org-mode source</a><p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2013/11/30/Custom-directives#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
 <a href="/blog/category/org-mode/6">« Previous Page</a>
  --  
 <a href="/blog/category/org-mode/8">Next Page »</a>

          </div>
          <div id="sidebar" class="grid_4">
            <aside>
<section>
<script>
  (function() {
    var cx = '002533177287215655227:l7uvu35ssbc';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</section>

<section>
    <h1 class="post_header_gradient theme_font">Twitter</h1>
    <a class="twitter-timeline" href="https://twitter.com/johnkitchin" data-widget-id="545217643582881792">Tweets by @johnkitchin</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>

  <section>
    <h1 class="post_header_gradient theme_font">Links</h1>
    <ul>
    <li><a href="http://enthought.com">Enthought Python</a></li>
    <li><a href="/pycse">Pycse</a></li>
    <li><a href="/dft-book">DFT-book</a></li>
    </ul>
  </section>

  <section>
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/blog/2015/04/04/Making-highly-linked-bibliographies-from-the-Scopus-API/">Making highly linked bibliographies from the Scopus API</a></li>
      <li><a href="/blog/2015/04/03/Getting-data-from-the-Scopus-API/">Getting data from the Scopus API</a></li>
      <li><a href="/blog/2015/03/30/1000+-citations-for-fuel-cell-paper-on-the-oxygen-reduction-reaction/">1000+ citations for fuel cell paper on the oxygen reduction reaction!</a></li>
      <li><a href="/blog/2015/03/28/The-orcid-api-and-generating-a-bibtex-file-from-it/">The orcid api and generating a bibtex file from it</a></li>
      <li><a href="/blog/2015/03/19/Restarting-org-babel-sessions-in-org-mode-more-effectively/">Restarting org-babel sessions in org-mode more effectively</a></li>
    </ul>
  </section>

<section>
<h1 class="post_header_gradient theme_font">Latest GitHub Repos</h1>
  <a href="https://github.com/jkitchin">@jkitchin</a> on GitHub.
  <ul id="my-github-projects">
        <li class="loading">Status updating&#8230;</li>
  </ul>

</section>
</aside>

          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/blog/feed/index.xml">RSS</a>
        <a href="http://kitchinresearchgroup.disqus.com/latest.rss">Comments RSS Feed</a>.
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2015
        John Kitchin
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery.tweet.js"></script>  
  <script src="/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
  <script>
      var _gaq=[['_setAccount','UA-35731398-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
  <script>
  (function() {
      var links = document.getElementsByTagName('a');
      var query = '?';
      for(var i = 0; i < links.length; i++) {
          if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
      }
      document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/kitchinresearchgroup/get_num_replies.js' + query + '"></' + 'script>');
  })();
  </script>

  </body>
</html>






<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/js/git.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
     $("#my-github-projects").loadRepositories("jkitchin");
    });
</script>



