

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Kitchin Research Group: orgref</title>
  <meta name="google-site-verification" content="CGcacJdHc2YoZyI0Vey9XRA5qwhhFDzThKJezbRFcJ4" />
  <meta name="description" content="Chemical Engineering at Carnegie Mellon University">
  <meta name="author" content="John Kitchin">
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="/blog/feed/atom" />
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/css/base.css?v=1">
  <link rel="stylesheet" href="/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld" href="/css/handheld.css?v=1">
  <link rel="stylesheet" href="/css/pygments_murphy.css" type="text/css" />

  <script src="/js/libs/modernizr-1.7.min.js"></script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  <link rel="stylesheet" href="/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
<div id="header" class="header_gradient theme_font">
<table><tr><td>
    <h1><a href="/">The Kitchin Research Group</a></h1>
    <h2>Chemical Engineering at Carnegie Mellon University</h2>
</td>
<td colspan=100%><div style="float:right;width:100%;text-align:right;"> <span id='badgeCont737515' style='width:126px'><script src='http://labs.researcherid.com/mashlets?el=badgeCont737515&mashlet=badge&showTitle=false&className=a&rid=A-2363-2010'></script></span></div>
</td></tr>
</table>
</div>
  <div id="navigation" class="grid_12">

    <ul class="theme_font">
      <li><a href="/blog"
             class="">Blog</a></li>

      <li><a href="/blog/archive"
             class="">Archives</a></li>

      <li><a href="/publications/index.html">Publications</a></li>
      <li><a href="/group.html">Group</a></li>

      <li><a href="/research.html"
             class="">Research</a></li>

      <li><a href="/categories.html"
             class="">Categories</a></li>

      <li><a href="/about.html"
             class="">About us</a></li>

      <li><a href="/subscribe.html">Subscribe</a></li>

    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_8">
            
  





<article>
  <div class="blog_post">
    <header>
      <div id="org-ref-is-on-Melpa"></div>
      <h2 class="blog_post_title"><a href="/blog/2015/12/22/org-ref-is-on-Melpa/" rel="bookmark" title="Permanent Link to org-ref is on Melpa">org-ref is on Melpa</a></h2>
      <p><small><span class="blog_post_date">Posted December 22, 2015 at 11:04 AM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/orgmode/'>orgmode</a>, <a href='/blog/category/orgref/'>orgref</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2015/12/22/org-ref-is-on-Melpa#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated December 22, 2015 at 11:21 AM</span>
      </small></p>
    </header>
    <div class="post_prose">
      




<p>
org-ref is out on <a href="https://melpa.org/#/org-ref">Melpa</a> !
</p>

<p>
Checkout this video (&asymp; 10 min.) of what it can do: <a href="https://www.youtube.com/watch?v=2t925KRBbFc">https://www.youtube.com/watch?v=2t925KRBbFc</a> 
</p>

<iframe width="420" height="315" src="https://www.youtube.com/embed/2t925KRBbFc" frameborder="0" allowfullscreen></iframe>

<p>
Here are the files that we used/generated:
</p>

<ol class="org-ol">
<li>Emacs configuration: <a href="/media/2015-12-22-org-ref-is-on-Melpa/org-ref-melpa.el">org-ref-melpa.el</a> 
</li>
<li>Here is the "manuscript" <a href="/media/2015-12-22-org-ref-is-on-Melpa/manuscript.org">manuscript.org</a> (note, I extracted the bibtex entries into this file)
</li>
<li>The resulting PDF: <a href="/media/2015-12-22-org-ref-is-on-Melpa/manuscript.pdf">manuscript.pdf</a> 
</li>
</ol>

<p>
Some killer new features:
</p>
<ol class="org-ol">
<li>Drag-n-drop a PDF or url onto a bibtex file to add bibtex entries. This works when org-ref knows how to get a DOI from the PDF or url.
</li>
<li>Tooltips on cite links
</li>
</ol>

<p>
Thanks everyone who has already tried it out and reported bugs!
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/12/22/org-ref-is-on-Melpa.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2015/12/22/org-ref-is-on-Melpa#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Introduction-to-a-citation-processor-in-org-ref"></div>
      <h2 class="blog_post_title"><a href="/blog/2015/12/11/Introduction-to-a-citation-processor-in-org-ref/" rel="bookmark" title="Permanent Link to Introduction to a citation processor in org-ref">Introduction to a citation processor in org-ref</a></h2>
      <p><small><span class="blog_post_date">Posted December 11, 2015 at 06:05 PM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/citations/'>citations</a>, <a href='/blog/category/orgmode/'>orgmode</a>, <a href='/blog/category/orgref/'>orgref</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2015/12/11/Introduction-to-a-citation-processor-in-org-ref#disqus_thread">View Comments</a>
      <p><small><span class="blog_post_date">Updated December 12, 2015 at 10:08 AM</span>
      </small></p>
    </header>
    <div class="post_prose">
      



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Reference types</a></li>
<li><a href="#sec-2">2. Citation types</a></li>
<li><a href="#sec-3">3. Multiple citations and sorting within citation</a></li>
<li><a href="#sec-4">4. Space chomping and punctuation testing</a></li>
<li><a href="#sec-5">5. Building</a></li>
<li><a href="#sec-6">6. Summary thoughts</a></li>
<li><a href="#sec-7">7. Bibliography</a></li>
</ul>
</div>
</div>

<p>
As a potential solution for citations in org-mode for non-LaTeX export, here we introduce csl (citation syntax lisp). The idea is heavily influenced by the xml-based Citation Syntax Language, but uses lisp sexps instead.
</p>

<p>
Briefly, there is a csl file that contains two variables: citation-style and bibliography-style. The citation-style defines how the in-text citations are represented for different types of citations. The bibliography-style defines how the bibliography is constructed.
</p>

<p>
What do we gain by this?
</p>
<ol class="org-ol">
<li>No need for external citeproc program, and hackability by org-mode experts.
</li>
<li>Punctuation transposition and space chomping, i.e. put superscripts on the right side of punctuation if you want it, and remove whitespace before superscripts if you want it.
</li>
<li>Total tunability of the citation format to different backends.
</li>
<li>Easy to change bibliography format with the bibliographystyle link.
</li>
<li>The use of Bibtex databases. These are plain text, and flexible.
</li>
</ol>

<p>
The real code for this is too long to blog about. Instead, you should check it out here: <a href="https://github.com/jkitchin/org-ref/tree/master/citeproc">https://github.com/jkitchin/org-ref/tree/master/citeproc</a> 
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Reference types</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>A book.<sup>1</sup>
</li>

<li>An article<sup>2</sup>
</li>

<li>A miscellaneous bibtex type.<sup>3</sup>
</li>
</ul>

<p>
There is work to do in supporting other types of entry types that are common in bibtex files.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Citation types</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Regular citation:<sup>2</sup>
</li>
<li>citenum: See Ref.  2 
</li>
<li>citeauthor:  Kitchin 
</li>
<li>citeyear:   2015 
</li>
</ul>

<p>
There is work to do in supporting other types of citations.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Multiple citations and sorting within citation</h2>
<div class="outline-text-2" id="text-3">
<p>
You can specify that the cites within a citation are consistently sorted in the export.
</p>

<ul class="org-ul">
<li>a,b:<sup>2,4</sup>
</li>
<li>b,a:<sup>2,4</sup>
</li>
</ul>

<p>
There is work to do for range collapsing, e.g. to turn 1,2,3 into 1-3.
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Space chomping and punctuation testing</h2>
<div class="outline-text-2" id="text-4">
<p>
I think citations should always be put in the sentence they logically belong to. LaTeX has a feature through natbib I think where for some styles, e.g. superscripts, the citations are moved to the right side of punctuation, and whitespace is chomped so the superscript is next to words, not separated by spaces. We can do that here too.
</p>

<ul class="org-ul">
<li>Citation at end of sentence.<sup>2</sup>
</li>
<li>Citation in clause,<sup>2,4</sup> with a comma.
</li>
<li>Citation in middle of<sup>2,4</sup> a sentence.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Building</h2>
<div class="outline-text-2" id="text-5">

<p>
At the moment, you have to add a hook function to put the replacements in the document before parsing.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'load-path <span style="color: #008000;">"."</span>)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">org-ref-citeproc</span>)

(<span style="color: #0000FF;">when</span> (file-exists-p <span style="color: #008000;">"readme.html"</span>) (delete-file <span style="color: #008000;">"readme.html"</span>))
(<span style="color: #0000FF;">let</span> ((org-export-before-parsing-hook '(orcp-citeproc)))
  (browse-url (org-html-export-to-html)))
</pre>
</div>

<pre class="example">
#&lt;process open ./readme.html&gt;
</pre>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'org-export-before-parsing-hook 'orcp-citeproc)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">orcp-citeproc</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Summary thoughts</h2>
<div class="outline-text-2" id="text-6">
<p>
This looks promising. There is probably a lot of work to do to make this as robust as say citeproc-js or the Zotero handler. I am not sure if we could write this in a way to directly use the CSL. My feeling is it would not be as flexible as this, and we would have to add to it anyway.
</p>

<p>
Here are some remaining things that could be worked on if we continue this direction.
</p>

<ol class="org-ol">
<li>Other bibtex entries need to be tested out.
</li>
<li>Remaining bibtex fields need to be defined.
</li>
<li>Standardization of styling that can be done. Not all features described in my csl are supported, e.g. et. al. and probably others.
</li>
<li>The author-year style needs name disambiguation somehow.
</li>
<li>Hyperlinking in html.
</li>
<li>Make sure export to other backends works.
</li>
<li>Can this work for notes-based styles?
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Bibliography</h2>
<div class="outline-text-2" id="text-7">
<p>
You use a bibliographystyle link to specify a csl. These are similar to bibtex styles, and in some cases no change is needed for LaTeX export (although you may have to remove the citeproc hook function).
</p>


<ol class="org-ol">
<li>Kittel, Charles, <i>Introduction to Solid State Physics</i>, (2005). <br>
</li>
<li>Kitchin,  John R., <i>Examples of Effective Data Sharing in Scientific Publishing</i>, ACS Catalysis, 5<b>(6)</b>, pp. 3894-3899 (2015). <a href="http://dx.doi.org/10.1021/acscatal.5b00538">http://dx.doi.org/10.1021/acscatal.5b00538</a>. <br>
</li>
<li>Xu, Zhongnan; Rossmeisl, Jan and Kitchin, John R., <i>Supporting data for: A linear response, {DFT+U} study of trends in the oxygen evolution activity of transition metal rutile dioxides. doi:10.5281/zenodo.12635</i>,  <a href="http://dx.doi.org/https://zenodo.org/record/12635">http://dx.doi.org/https://zenodo.org/record/12635</a>. <a href="http://dx.doi.org/10.5281/zenodo.12635">http://dx.doi.org/10.5281/zenodo.12635</a>. <br>
</li>
<li>Kitchin, John R., <i>Data Sharing in Surface Science</i>, Surface Science , N/A, pp. in press (2015). <a href="http://dx.doi.org/10.1016/j.susc.2015.05.007">http://dx.doi.org/10.1016/j.susc.2015.05.007</a>.
</li>
</ol>
</div>
</div>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/12/11/Introduction-to-a-citation-processor-in-org-ref.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2015/12/11/Introduction-to-a-citation-processor-in-org-ref#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Improving-org-ref-cite-links-with-tooltips"></div>
      <h2 class="blog_post_title"><a href="/blog/2015/11/23/Improving-org-ref-cite-links-with-tooltips/" rel="bookmark" title="Permanent Link to Improving org-ref cite links with tooltips">Improving org-ref cite links with tooltips</a></h2>
      <p><small><span class="blog_post_date">Posted November 23, 2015 at 07:03 AM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/orgmode/'>orgmode</a>, <a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/orgref/'>orgref</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2015/11/23/Improving-org-ref-cite-links-with-tooltips#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      



<p>
Org-ref uses timers to give you messages about the cite link at point. I am not so crazy about the timer, there is always a (short) delay, and I have had trouble debugging timers in the past, and you have to put the point on the link. Since I wrote that code, I have learned some new things about Emacs, including dynamic tooltips. This will allow me to use the mouse to see what a cite link refers to. While reading documents, I am more likely to use a mouse than when typing a document, and getting a tooltip by hovering sounds like a good idea.
</p>

<p>
Here, we explore using dynamic tooltips on cite links. The idea is pretty simple, we tie into font-lock to add a function to the :help-echo property of a cite link. The function will go to point, and compute the citation string at point, which will be displayed as a tooltip when the mouse hovers over the citation.
</p>

<p>
Font-lock allows you to specify a function that sets match-data and that can have other side-effects, e.g. setting text properties. Org-ref has a regexp that defines cite links, which we use here, and a function that gets the citation string at point. We just go to the mouse position, and get that string, wrapped in a save-excursion macro so that point does not actually move. Then, we add the function to font-lock keywords, and we are done!
</p>

<p>
Here are some papers we wrote on using org-mode
<a class='org-ref-reference' href="#kitchin-2015-examp">kitchin-2015-examp</a>,<a class='org-ref-reference' href="#kitchin-2015-data-surfac-scien">kitchin-2015-data-surfac-scien</a> and some other references
in my bibliography <a class='org-ref-reference' href="#zou-2014-cobal-embed">zou-2014-cobal-embed</a>,<a class='org-ref-reference' href="#zlotea-2014-nanoal">zlotea-2014-nanoal</a> and one final
example <a class='org-ref-reference' href="#zhu-2015">zhu-2015</a>.
</p>


<p>
Here is the short code required to do this. You can see the tooltips in action here: <a href="https://www.youtube.com/watch?v=ifSmlId2rk0">https://www.youtube.com/watch?v=ifSmlId2rk0</a> 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-ref-match-next-cite-link</span> (<span style="color: #6434A3;">&amp;optional</span> limit)
  (<span style="color: #0000FF;">when</span> (re-search-forward org-ref-cite-re limit t)
    (add-text-properties
     (match-beginning 0) (match-end 0)
     (list
      'help-echo (<span style="color: #0000FF;">lambda</span> (window object position)
                   (<span style="color: #0000FF;">save-excursion</span>
                     (goto-char position)
                     (<span style="color: #0000FF;">let</span> ((s (org-ref-get-citation-string-at-point)))
                       (<span style="color: #0000FF;">with-temp-buffer</span>
                         (insert s)
                         (fill-paragraph)
                         (buffer-string)))))))))

<span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">do this for this buffer</span>
(font-lock-add-keywords
    nil
    '((org-ref-match-next-cite-link (0  'org-ref-cite-face t)))
    t)
(font-lock-fontify-buffer)

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">do this for every org file</span>
(add-hook
 'org-mode-hook
 (<span style="color: #0000FF;">lambda</span> ()
   (font-lock-add-keywords
    nil
    '((org-ref-match-next-cite-link (0  'org-ref-cite-face t)))
    t)))
</pre>
</div>


<p>
<h1 class='org-ref-bib-h1'>Bibliography</h1>
<ul class='org-ref-bib'><li><a id="kitchin-2015-data-surfac-scien">[kitchin-2015-data-surfac-scien] "John Kitchin", Data Sharing in Surface Science, <i>"Surface Science "</i>, <b>(0)</b>,  -  (2015). <a href="http://www.sciencedirect.com/science/article/pii/S0039602815001326">link</a>. <a href="http://dx.doi.org/10.1016/j.susc.2015.05.007">doi</a>.</a></li>
<li><a id="kitchin-2015-examp">[kitchin-2015-examp] Kitchin, Examples of Effective Data Sharing in Scientific Publishing, <i>ACS Catalysis</i>, <b>5(6)</b>, 3894-3899 (2015). <a href=" http://dx.doi.org/10.1021/acscatal.5b00538 ">link</a>. <a href="http://dx.doi.org/10.1021/acscatal.5b00538">doi</a>.</a></li>
<li><a id="zhu-2015">[zhu-2015] Yinlong Zhu, Wei Zhou, Zhi-Gang Chen, Yubo Chen, , Chao Su, Moses Tad\'e & Zongping Shao, \ceSrNb_0.1Co_0.7Fe_0.2 O_3-$\delta$ Perovskite As a  Next-Generation Electrocatalyst for Oxygen Evolution in  Alkaline Solution, <i>Angew. Chem. Int. Ed.</i>, <b>54(13)</b>, 3897-3901 (2015). <a href="http://dx.doi.org/10.1002/anie.201408998">link</a>. <a href="http://dx.doi.org/10.1002/anie.201408998">doi</a>.</a></li>
<li><a id="zlotea-2014-nanoal">[zlotea-2014-nanoal] Zlotea, Morfin, Nguyen, Nguyen, , Nelayah, Ricolleau, Latroche & Piccolo, Nanoalloying Bulk-Immiscible Iridium and Palladium Inhibits  Hydride Formation and Promotes Catalytic Performances, <i>Nanoscale</i>, <b>6(17)</b>, 9955 (2014). <a href="http://dx.doi.org/10.1039/C4NR02836H">link</a>. <a href="http://dx.doi.org/10.1039/c4nr02836h">doi</a>.</a></li>
<li><a id="zou-2014-cobal-embed">[zou-2014-cobal-embed] Zou, Huang, Goswami, , Silva, Sathe, Mikmekov\'a, ska & Asefa, Cobalt-Embedded Nitrogen-Rich Carbon Nanotubes Efficiently  Catalyze Hydrogen Evolution Reaction At All pH Values, <i>Angewandte Chemie</i>, <b></b>, 4461-4465 (2014). <a href="http://dx.doi.org/10.1002/ange.201311111">link</a>. <a href="http://dx.doi.org/10.1002/ange.201311111">doi</a>.</a></li>
</ul>
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/11/23/Improving-org-ref-cite-links-with-tooltips.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2015/11/23/Improving-org-ref-cite-links-with-tooltips#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  





<article>
  <div class="blog_post">
    <header>
      <div id="Update-on-org-ref-it-is-now-all-emacs-lisp"></div>
      <h2 class="blog_post_title"><a href="/blog/2015/03/16/Update-on-org-ref-it-is-now-all-emacs-lisp/" rel="bookmark" title="Permanent Link to Update on org-ref - it is now all emacs-lisp">Update on org-ref - it is now all emacs-lisp</a></h2>
      <p><small><span class="blog_post_date">Posted March 16, 2015 at 08:51 AM</span> | categories:
        <span class="blog_post_categories"><a href='/blog/category/emacs/'>emacs</a>, <a href='/blog/category/orgmode/'>orgmode</a>, <a href='/blog/category/orgref/'>orgref</a></span> | tags: 
        | <a href="http://jkitchin.github.io/blog/2015/03/16/Update-on-org-ref-it-is-now-all-emacs-lisp#disqus_thread">View Comments</a>
      </small></p>
    </header>
    <div class="post_prose">
      




<p>
The <a href="https://github.com/jkitchin/org-ref">org-ref</a> code is finally all in emacs-lisp! This should make it much easier to install, and is another step closer to getting org-ref into MELPA. Previously, I had written the most significant code in org-mode source blocks that were intended to be tangled out. I found this was not really portable, because what gets tangled depends on your org-mode setup. I had to specifically set example blocks to not tangle, or org-ref would not work for other people, and if I forgot to set a block to tangle, it also would not work for others. That should not happen again now, since there is no more tangling.
</p>


<p>
There are some relatively new features in org-ref:
</p>
<ol class="org-ol">
<li>New colored org-ref links to differentiate them from other
org-links. Citations are greenish, refs and labels are maroonish.
</li>
<li>Context messages about links. With your cursor on a cite, ref or label link
you will get a context message, e.g. a formatted citation, some context about
the label a ref refers to, or a count of the labels in the mini-buffer.
</li>
<li>There is now an org-ref menu in the Org menu.
</li>
<li>There is a new org-ref-help function that opens an org-file of org-ref
documentation.
</li>
<li>Pretty thorough integration of helm throughout org-ref, and some integration
of hydra.
</li>
<li>A few utility libraries: doi-utils, isbn, wos, pubmed, arxiv, jmax-bibtex, sci-id,
x2bib. Not all these are new, but if you didn't know about them, check them out.
</li>
<li>Cask integration. This mostly provides access to testing and dependencies
right now. org-ref is also now tested continuously at
<a href="https://travis-ci.org/jkitchin/org-ref">https://travis-ci.org/jkitchin/org-ref</a> .
</li>
</ol>

<p>
org-ref is basically feature complete I think (which is to say that once again, I do not have any big ideas for new features ;). There are some places where it could be refactored a little, e.g. there are some bibtex only functions in org-ref.el that really should go into jmax-bibtex.el (which also could be renamed). This is a very low priority though, because things are working fine as far as I can tell.
</p>

<p>
What does it need before going into MELPA? Probably some tests would be a good idea. On Travis, all that is really tested is that it loads with no errors. I would like to see some stability on my end, e.g. at least a week where no commits get made, and no errors are reported. And finally, I would like to make sure I have some time to handle issues that come up when a broader audience is trying it out.
</p>

<p>
My target date to get this in MELPA is June 1, 2015. Try out the new org-ref, and let me know how it goes!</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/03/16/Update-on-org-ref---it-is-now-all-emacs-lisp.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>

    </div>
  </div>
</article>



<a href="https://twitter.com/share" class="twitter-share-button" data-via="johnkitchin">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <div class="after_post"><a href="http://jkitchin.github.io/blog/2015/03/16/Update-on-org-ref-it-is-now-all-emacs-lisp#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />

          </div>
          <div id="sidebar" class="grid_4">
            <aside>
<section>
<script>
  (function() {
    var cx = '002533177287215655227:l7uvu35ssbc';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</section>

<section>
    <h1 class="post_header_gradient theme_font">Twitter</h1>
    <a class="twitter-timeline" href="https://twitter.com/johnkitchin" data-widget-id="545217643582881792">Tweets by @johnkitchin</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


  <section>
    <h1 class="post_header_gradient theme_font">Links</h1>
    <ul>
      <li><a href="https://www.continuum.io">Anaconda Python</a></li>
      <li><a href="/pycse">Pycse</a></li>
      <li><a href="/dft-book">DFT-book</a></li>
    </ul>
  </section>

  <section>
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/blog/2017/04/11/Autoformatting-ordinal-numbers-and-fractions-in-orgmode/">Autoformatting ordinal numbers and fractions in orgmode</a></li>
      <li><a href="/blog/2017/04/09/A-better-return-in-org-mode/">A better return in org-mode</a></li>
      <li><a href="/blog/2017/04/07/Object-oriented-font-locking-in-emacs-lisp/">Object-oriented font-locking in emacs-lisp</a></li>
      <li><a href="/blog/2017/03/22/A-better-defun-for-emacs-lisp/">A better defun for emacs-lisp</a></li>
      <li><a href="/blog/2017/03/19/A-Hy-macro-for-defining-functions-with-docstrings-on-each-argument/">A Hy macro for defining functions with docstrings on each argument</a></li>
    </ul>
  </section>

<section>
<h1 class="post_header_gradient theme_font">Latest GitHub Repos</h1>
  <a href="https://github.com/jkitchin">@jkitchin</a> on GitHub.
  <ul id="my-github-projects">
        <li class="loading">Status updating&#8230;</li>
  </ul>

</section>
</aside>

          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/blog/feed/index.xml">RSS</a>
        <a href="http://kitchinresearchgroup.disqus.com/latest.rss">Comments RSS Feed</a>.
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2017
        John Kitchin
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery.tweet.js"></script>  
  <script src="/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
  <script>
      var _gaq=[['_setAccount','UA-35731398-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
  <script>
  (function() {
      var links = document.getElementsByTagName('a');
      var query = '?';
      for(var i = 0; i < links.length; i++) {
          if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
      }
      document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/kitchinresearchgroup/get_num_replies.js' + query + '"></' + 'script>');
  })();
  </script>

  </body>
</html>






<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="/js/git.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
     $("#my-github-projects").loadRepositories("jkitchin");
    });
</script>



