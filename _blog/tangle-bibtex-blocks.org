
#+BEGIN_SRC emacs-lisp
(defun extract-bibtex-blocks (bibfile)
  "Extract all bibtex blocks in buffer to BIBFILE.
If BIBFILE exists, append, unless you use a prefix arg (C-u), which
will clobber the file."
  (interactive
   (list (ido-read-file-name "Bibfile: " nil nil nil
			     (file-name-nondirectory
			      (concat (file-name-sans-extension
				       (buffer-file-name))
				      ".bib")))))

  (let ((contents ""))
    (when (and (file-exists-p bibfile)
	       (not current-prefix-arg))
      (setq contents (with-temp-buffer
		       (insert-file-contents bibfile)
		       (buffer-string))))

    (save-excursion
      (goto-char (point-min))
      (while (re-search-forward "#\\+BEGIN_SRC bibtex" nil t)
	(setq contents
	      (concat
	       contents
	       (org-element-property :value (org-element-at-point))))))

    (with-temp-file bibfile
      (insert contents))))
#+END_SRC

#+RESULTS:
: extract-bibtex-blocks



#+BEGIN_SRC bibtex
@article{xu-2014-probin-cover,
  author =	 {Zhongnan Xu and John R. Kitchin},
  title =	 {Probing the Coverage Dependence of Site and Adsorbate
                  Configurational Correlations on (111) Surfaces of Late
                  Transition Metals},
  journal =	 {J. Phys. Chem. C},
  volume =	 118,
  number =	 44,
  pages =	 {25597-25602},
  year =	 2014,
  doi =		 {10.1021/jp508805h},
  url =		 {http://dx.doi.org/10.1021/jp508805h},
  keywords =	 {DESC0004031, early-career, orgmode, },
}
#+END_SRC


#+BEGIN_SRC bibtex
@article{xu-2015-accur-u,
  author =	 "Xu, Zhongnan and Joshi, Yogesh V. and Raman, Sumathy and
                  Kitchin, John R.",
  title =	 {Accurate Electronic and Chemical Properties of 3d Transition
                  Metal Oxides Using a Calculated Linear Response {U} and a {DFT
                  + U(V)} Method},
  journal =	 "The Journal of Chemical Physics",
  volume =	 142,
  number =	 14,
  pages =	 144701,
  year =	 2015,
  doi =		 {10.1063/1.4916823},
  url =
                  "http://scitation.aip.org/content/aip/journal/jcp/142/14/10.1063/1.4916823",
  keywords =	 {DESC0004031, c orgmode},
  eid =		 144701,
}


#+END_SRC
