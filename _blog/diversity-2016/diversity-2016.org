* A look at gender diversity in engineering
  :PROPERTIES:
  :categories: diversity,python,chemicalengineering
  :END:

The National Science Foundation maintains databases of statistics (National Science Foundation, National Center for Science and Engineering Statistics. 2015. Women, Minorities, and Persons with Disabilities in Science and Engineering: 2015. Special Report NSF 15-311. Arlington, VA. Available at http://www.nsf.gov/statistics/wmpd/.) about women, minorities and persons with disabilities in the STEM fields. This data is provided in a series of tables you can download as Excel files. We are going to work our way through a few of them, using some shell and python scripts to get the data and make some plots. In this post I focus exclusively on gender.

** Undergraduate enrollment in engineering from 2003 to 2013

This [[http://www.nsf.gov/statistics/2015/nsf15311/tables/tab2-9-updated-2016-08.xlsx][table]] contains data on undergraduate enrollment in engineering programs, by enrollment status, sex, race or ethnicity, and citizenship for the years of 2003–13 for all the students. Here we focus only on the gender of engineering students over this time frame. First, we get the Excel sheet, then make a graph.

#+BEGIN_SRC sh :results silent
if [ ! -f tab2-9-updated-2016-08.xlsx ]; then wget http://www.nsf.gov/statistics/2015/nsf15311/tables/tab2-9-updated-2016-08.xlsx; fi
#+END_SRC

This script pulls out the data, and makes a plot.

#+BEGIN_SRC python :results output org drawer
import xlrd
import matplotlib.pyplot as plt
import pycse.orgmode as org

wb = xlrd.open_workbook('tab2-9-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

years = [int(c.value) for c in sh1.col_slice(0, 4, 15) if c.value is not '']
all =  [int(c.value) for c in sh1.col_slice(1, 4, 15) if c.value is not '']
female =  [int(c.value) for c in sh1.col_slice(2, 4, 15) if c.value is not '']

plt.figure()
plt.subplot(1, 2, 1)
plt.plot(years, all, label='All students')
plt.xlabel('Year')
plt.ylabel('number of students enrolled')

plt.subplot(1, 2, 2)
plt.plot(years, [f / float(a) * 100 for f, a in zip(female, all)], label='Female students')
plt.xlabel('Year')
plt.ylabel('%Female enrolled')

plt.tight_layout()
org.figure(plt.savefig('percent-female-enrolled.png', dpi=300),
           label='fig-gender-enrolled-ugrad',
           caption='On the left, the total enrollment of students in engineering. On the right, the %female enrollment.')
#+END_SRC

#+RESULTS:
:RESULTS:

#+CAPTION: On the left, the total enrollment of students in engineering. On the right, the %female enrollment.
#+LABEL: fig-gender-enrolled-ugrad
#+attr_org: :width 200
[[file:percent-female-enrolled.png]]
:END:

Figure ref:fig-gender-enrolled-ugrad shows over this time period the overall growth of women in the undergraduate engineering population has very slowly increased over the past decade, and appears to continue to grow. From 2007 to 2013, the fraction went from about 17.2 to 19.2%. So... at this rate, and assuming the rate stays constant, we could reach gender parity in this many years:

#+BEGIN_SRC python :results output org drawer
rate = (19.2 - 17.2) / (2013 - 2007)
print((50 - 19.2) / rate)
#+END_SRC

#+RESULTS:
:RESULTS:
92.4
:END:

The assumption of constant rate is a terrible one; I would expect the rate to slow down as we approach gender parity, so the actual time to reach it is likely to be even longer than the estimate above.


** Undergraduate BS awarded in engineering
Enrollment isn't the same as awarded degrees. This [[http://www.nsf.gov/statistics/2015/nsf15311/tables/tab5-13.xlsx][table]] contains data about the number Bachelor's degrees awarded in engineering, by sex, race, ethnicity, and citizenship for the years of 1990–2012.

#+BEGIN_SRC sh :results silent
if [ ! -f tab5-13.xlsx ]; then wget http://www.nsf.gov/statistics/2015/nsf15311/tables/tab5-13.xlsx; fi
#+END_SRC

Here we extract the data, and plot it.
#+BEGIN_SRC python :results output org drawer
import xlrd
import matplotlib.pyplot as plt
import pycse.orgmode as org

wb = xlrd.open_workbook('tab5-13.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

years = [int(c.value) for c in sh1.col_slice(0, 4, 29) if c.value is not '']
all = [int(c.value) for c in sh1.col_slice(1, 4, 29) if c.value is not '']
nfemale = [int(c.value) for c in sh1.col_slice(3, 4, 29) if c.value is not '']

plt.figure()
plt.subplot(1, 2, 1)
plt.plot(years, all)
plt.xlabel('Year')
plt.ylabel('Total number of BS engineering degrees awarded')

plt.subplot(1, 2, 2)
plt.plot(years, [float(n) / a * 100 for n, a in zip(nfemale, all)])
plt.xlabel('Year')
plt.ylabel('% of Bachelor\'s degrees awarded to women')
plt.tight_layout()

org.figure(plt.savefig('percent-female-all-engineering.png', dpi=300),
           label='fig:bs-degrees',
           caption=('On left, total number of awarded BS degrees in engineering.'
                    ' On right the percent of BS degrees in engineering awarded to women.'))
#+END_SRC

#+RESULTS:
:RESULTS:
#+CAPTION: On left, total number of awarded BS degrees in engineering. On right the percent of BS degrees in engineering awarded to women.
#+LABEL: fig:bs-degrees
[[file:percent-female-all-engineering.png]]
:END:

It seems in Figure ref:fig:bs-degrees that the number of engineering degrees rose rapidly from 2000 until now. There was a spike in the fraction of these degrees awarded to women, and then a drop in the fraction. That drop coincided with decreases in the number of women getting engineering degrees. Since 2009, that number has been increasing slowly. Too slowly.


** Engineering PhDs awarded from 2004-2014.

It is not so easy to get the data for gender diversity among PhDs as the data is spread over two tables, and they aren't even aligned! The first [[http://www.nsf.gov/statistics/2015/nsf15311/tables/tab7-1-updated-2016-08.xlsx][table]] lists all Doctoral degrees awarded, by field from 2004–14. The second [[http://www.nsf.gov/statistics/2015/nsf15311/tables/tab7-2-updated-2016-08.xlsx][table]] lists Doctoral degrees awarded to women, by field from 2004–14. First we get the data:

 #+BEGIN_SRC sh :results silent
if [ ! -f tab7-1-updated-2016-08.xlsx ]; then wget http://www.nsf.gov/statistics/2015/nsf15311/tables/tab7-1-updated-2016-08.xlsx; fi
if [ ! -f tab7-2-updated-2016-08.xlsx ]; then wget http://www.nsf.gov/statistics/2015/nsf15311/tables/tab7-2-updated-2016-08.xlsx; fi
 #+END_SRC

Now we make the plots.

 #+BEGIN_SRC python :results output org drawer
import xlrd
import matplotlib.pyplot as plt
import pycse.orgmode as org

wb = xlrd.open_workbook('tab7-1-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

years = [int(c.value) for c in sh1.row_slice(1, 1, 12) if c.value is not '']
all = [int(c.value) for c in sh1.row_slice(28, 1, 12) if c.value is not '']

wb = xlrd.open_workbook('tab7-2-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

female = [int(c.value) for c in sh1.row_slice(29, 1, 12) if c.value is not '']

plt.subplot(1, 2, 1)
plt.plot(years, all)
plt.xlabel('Years')
plt.ylabel('Total engineering PhDs')

plt.subplot(1, 2, 2)
plt.plot(years, [f / float(a) * 100 for f, a in zip(female, all)])
plt.xlabel('Year')
plt.ylabel('%PhDs to women')

plt.tight_layout()

org.figure(plt.savefig('Phd-engineering.png', dpi=300),
           label='fig-phd-engineering',
           caption='On left, total engineering PhDs awarded. On right, the percent awarded to women.')
 #+END_SRC

 #+RESULTS:
 :RESULTS:
 #+CAPTION: On the left, total engineering PhDs awarded. On the right, the percent awarded to women.
 #+LABEL: fig-phd-engineering
 [[file:Phd-engineering.png]]
 :END:

It seems pretty evident in Figure ref:fig-phd-engineering that many fewer PhDs are awarded than BS degrees.  The number of degrees awarded to women increased slowly from 2004 to 2010, but since 2010 has flattened out.

** Chemical engineering PhDs

The gender balance varies in different engineering fields. My field is chemical engineering, so we will take a quick look there. The data comes from the same tables above, so we just pull out the field specific data here.

#+BEGIN_SRC python :results output org drawer
import xlrd
import matplotlib.pyplot as plt
import pycse.orgmode as org

wb = xlrd.open_workbook('tab7-1-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

years = [int(c.value) for c in sh1.row_slice(1, 1, 12) if c.value is not '']
all_cheme = [int(c.value) for c in sh1.row_slice(30, 1, 12) if c.value is not '']

wb = xlrd.open_workbook('tab7-2-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

female = [int(c.value) for c in sh1.row_slice(31, 1, 12) if c.value is not '']


plt.subplot(1, 2, 1)
plt.plot(years, all_cheme)
plt.xlabel('Years')
plt.ylabel('Total chemical engineering PhDs')

plt.subplot(1, 2, 2)
plt.plot(years, [f / float(a) * 100 for f, a in zip(female, all_cheme)])
plt.xlabel('Year')
plt.ylabel('%PhDs to women')

plt.tight_layout()

org.figure(plt.savefig('cheme-phd-engineering.png', dpi=300),
           label='fig-cheme-phd-engineering',
           caption='On left, total chemical engineering PhDs awarded. On right, the percent awarded to women.')
#+END_SRC

 #+RESULTS:
 :RESULTS:
#+CAPTION: On left, total chemical engineering PhDs awarded. On right, the percent awarded to women. label:fig-cheme-phd-engineering
#+attr_org: :width 20%
[[./cheme-phd-engineering.png]]
 :END:

Surprisingly, the number of PhDs has been increasing significantly over the past decade. Given the funding climate today, that surely isn't sustainable! Chemical engineering is just slightly higher in the %PhDs awarded to women than the general engineering field. Figure ref:fig-cheme-phd-engineering suggests significant gains were made from 2004 to about 2012, and then the fraction of PhDs awarded to women began to decline.

Let's assume we can fit a line to the data, and estimate when we might hit gender parity:

#+BEGIN_SRC python :results output org drawer
import xlrd
import matplotlib.pyplot as plt
import pycse.orgmode as org
import numpy as np

wb = xlrd.open_workbook('tab7-1-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

years = [int(c.value) for c in sh1.row_slice(1, 1, 12) if c.value is not '']
all_cheme = [int(c.value) for c in sh1.row_slice(30, 1, 12) if c.value is not '']

wb = xlrd.open_workbook('tab7-2-updated-2016-08.xlsx')
sh1 = wb.sheet_by_name(u'sheet1')

female = [int(c.value) for c in sh1.row_slice(31, 1, 12) if c.value is not '']

percent_female = [f / float(a) * 100 for f, a in zip(female, all_cheme)]

rate, b = np.polyfit(years, percent_female, 1)

print((50 - b) / rate)
 #+END_SRC

#+RESULTS:
:RESULTS:
2050.1387699
:END:

Wow. 2050. Assuming that the recent decrease is some normal fluctuation, and that the rate doesn't slow down as we approach parity, it will be at least 42 years before gender parity is likely without some major changes. Since this is one of our primary sources of women faculty, and [[http://www.nsf.gov/discoveries/disc_summ.jsp?cntn_id=189603&org=NSF&from=news][this research]] suggests that the number of women in faculty positions impacts recruiting and retention of women in the STEM fields, it does not look to me like business as usual will result in significant improvements in gender diversity any time soon.

** Summary thoughts

I have focused on gender parity as an implied goal in engineering. To me this is a logical outcome. Why? The age group of 20-59 in the US is 50.7% female (http://www.census.gov/population/age/data/files/2012/2012gender_table1.xlsx). In the absence of biasing factors, you would expect equal numbers of men and women in engineering. Clearly, that is not the case and it means there must be biasing factors that reduce the number of women in engineering.

The last decade has shown some very modest improvements at recruiting and retaining women in engineering. At the undergraduate level, more women earn BS degrees in engineering than a decade ago, but progress in increasing this has been mixed, the overall numbers are still not high and not close to parity. At the PhD level the same is true, the number of PhDs awarded to women has increased, although the percentage has leveled off in recent years.

Based on this data, it could be decades, perhaps over a century before gender parity is realized in engineering. That means decades where engineering is missing contributions from generations of brilliant, talented women.  It means decades of engineering not being as good as it could be with everyone participating. Not to mention the past century of lost innovation. It is not just engineering losing out here. Engineers impact society with their work. Society is losing out, has been losing out, and will continue to lose out until we eliminate biases that influence women to enter other fields, or to leave engineering. Or we can continue to settle for second best.
