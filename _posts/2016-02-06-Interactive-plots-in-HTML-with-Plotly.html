---
title: Interactive plots in HTML with Plotly
date: 2016/02/06 12:44:53
updated: 2016/02/06 12:44:53
categories: python,plotting,interactive
tags:
---



<p>
Most of the plots in this blog are static. Today, I look at making them interactive. I will use <a href="https://plot.ly">https://plot.ly</a> for this. I want to use some data from a paper we published on the relative stabilities of oxide polymorphs <a class='org-ref-reference' href="#mehta-2015-ident-poten">mehta-2015-ident-poten</a>. We will make an interactive figure showing the relative stabilities of the RuO<sub>2</sub> polymorphs. When you hover on a point, it will show you which polymorph the point refers to. Let's see the figure first here. If you think its interesting read on to see how we made it!
</p>

<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~jkitchin/4.embed" height="525" width="100%"></iframe>


<p>
We get our data source here: <a href="http://pubs.acs.org/doi/suppl/10.1021/am4059149/suppl_file/am4059149_si_001.pdf">http://pubs.acs.org/doi/suppl/10.1021/am4059149/suppl_file/am4059149_si_001.pdf</a> .
</p>

<p>
Now, we extract the data files:
</p>
<div class="org-src-container">

<pre class="src src-sh">pdftk ~/Desktop/am4059149_si_001.pdf  unpack_files
</pre>
</div>

<p>
That extracts a json file called supporting-information.json. We use it as suggested in the SI pdf to plot the equations of state for RuO<sub>2</sub> for several polymorphs.
</p>

<div class="org-src-container">

<pre class="src src-python" id="ruo2-html"><span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">coding=utf-8</span>

<span style="color: #0000FF;">import</span> plotly.plotly <span style="color: #0000FF;">as</span> py
<span style="color: #0000FF;">import</span> plotly.graph_objs <span style="color: #0000FF;">as</span> go
<span style="color: #0000FF;">import</span> plotly.tools <span style="color: #0000FF;">as</span> tls
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">import</span> json
<span style="color: #0000FF;">import</span> matplotlib.pyplot <span style="color: #0000FF;">as</span> plt
<span style="color: #0000FF;">from</span> ase.utils.eos <span style="color: #0000FF;">import</span> EquationOfState
<span style="color: #0000FF;">with</span> <span style="color: #006FE0;">open</span>(<span style="color: #008000;">'supporting-information.json'</span>, <span style="color: #008000;">'rb'</span>) <span style="color: #0000FF;">as</span> f:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">d</span> = json.loads(f.read())

<span style="color: #BA36A5;">BO2</span> = <span style="color: #008000;">'RuO2'</span>
<span style="color: #BA36A5;">xc</span> = <span style="color: #008000;">'PBE'</span>

<span style="color: #BA36A5;">layout</span> = go.Layout(title=<span style="color: #008000;">'Energy vs. Volume for RuO&lt;sub&gt;2&lt;/sub&gt; polymorphs'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  xaxis=<span style="color: #006FE0;">dict</span>(title=<span style="color: #008000;">'Volume (&#197;&lt;sup&gt;3&lt;/sup&gt;)'</span>),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  yaxis=<span style="color: #006FE0;">dict</span>(title=<span style="color: #008000;">'Energy (eV)'</span>))

<span style="color: #BA36A5;">traces</span> = []

<span style="color: #0000FF;">for</span> polymorph <span style="color: #0000FF;">in</span> [<span style="color: #008000;">'rutile'</span>,<span style="color: #008000;">'anatase'</span>,<span style="color: #008000;">'brookite'</span>,<span style="color: #008000;">'columbite'</span>,<span style="color: #008000;">'pyrite'</span>,<span style="color: #008000;">'fluorite'</span>]:

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">number of atoms in the unit cell - used to normalize</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">natoms</span>= <span style="color: #006FE0;">len</span>(d[BO2][polymorph][xc][<span style="color: #008000;">'EOS'</span>][<span style="color: #008000;">'calculations'</span>]
                [0][<span style="color: #008000;">'atoms'</span>][<span style="color: #008000;">'symbols'</span>])
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">volumes</span> = [entry[<span style="color: #008000;">'data'</span>][<span style="color: #008000;">'volume'</span>]*3./natoms <span style="color: #0000FF;">for</span> entry <span style="color: #0000FF;">in</span>
               d[BO2][polymorph][xc][<span style="color: #008000;">'EOS'</span>][<span style="color: #008000;">'calculations'</span>]]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">energies</span> =  [entry[<span style="color: #008000;">'data'</span>][<span style="color: #008000;">'total_energy'</span>]*3./natoms <span style="color: #0000FF;">for</span> entry <span style="color: #0000FF;">in</span>
                 d[BO2][polymorph][xc][<span style="color: #008000;">'EOS'</span>][<span style="color: #008000;">'calculations'</span>]]

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">trace</span> = go.Scatter(x=np.array(volumes),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  y=np.array(energies),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  mode=<span style="color: #008000;">'lines+markers'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  name=polymorph,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  text=polymorph)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">traces</span> += [trace]

<span style="color: #BA36A5;">fig</span> = go.Figure(data=traces, layout=layout)
<span style="color: #BA36A5;">plot_url</span> = py.plot(fig, filename=<span style="color: #008000;">'ruo2-2'</span>)

<span style="color: #0000FF;">print</span> tls.get_embed(plot_url)
</pre>
</div>




<p>
Pretty nice, now we should have an interactive plot in our browser with the data points labeled with tags, zooming, etc&#x2026; That is nice for the blog. It isn't so nice for daily work, as there is no visual version of the plot in my org-file. Of course, I can visit the url to see the plot in my browser, it is just different from what I am used to. For everyone else, this is probably better. It looks like you can actually get the data from the web page, including some minimal analysis like regression, and save your view to an image! That could be pretty nice for some data sets.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Using Plotly yourself</h2>
<div class="outline-text-2" id="text-1">
<p>
First, go to <a href="https://plot.ly">https://plot.ly</a> and sign up for an account. You will want to register your API key like this, which will save it in a file for your convenience. Then you can do things like I did above too.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> plotly.tools <span style="color: #0000FF;">as</span> tls
tls.set_credentials_file(username=<span style="color: #008000;">'jkitchin'</span>, api_key=<span style="color: #008000;">'xxxxxxx'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> References</h2>
<div class="outline-text-2" id="text-2">
<p>
<h1 class='org-ref-bib-h1'>Bibliography</h1>
<ul class='org-ref-bib'><li><a id="mehta-2015-ident-poten">[mehta-2015-ident-poten] Prateek Mehta, Paul Salvador & John Kitchin, Identifying Potential \ceBO2 Oxide Polymorphs for Epitaxial  Growth Candidates, <i>ACS Appl. Mater. Interfaces</i>, <b>6(5)</b>, 3630-3639 (2015). <a href="https://doi.org/10.1021/am4059149">link</a>. <a href="https://doi.org/10.1021/am4059149">doi</a>.</a></li>
</ul></p>
</div>
</div>
<p>Copyright (C) 2016 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2016/02/06/Interactive-plots-in-HTML-with-Plotly.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>
