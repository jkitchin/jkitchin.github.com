---
title: Converting a DOI to other scientific identifiers in Pubmed
date: 2015/06/09 07:29:08
updated: 2015/06/09 07:29:08
categories: orgmode,ref
tags:
---



<p>
Sometimes it is useful to convert a DOI to another type of identifier. For example, in this <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/06/07/Getting-a-Scopus-EID-from-a-DOI/">post</a> we converted a DOI to a Scopus EID, and in this <a href="http://kitchingroup.cheme.cmu.edu/blog/2015/06/08/Getting-a-WOS-Accession-number-from-a-DOI/">one</a> we got the WOS accession number from a DOI. Today, we consider how to get Pubmed identifiers. Pubmed provides an API for this purpose:
</p>

<p>
<a href="http://www.ncbi.nlm.nih.gov/pmc/tools/id-converter-api/">http://www.ncbi.nlm.nih.gov/pmc/tools/id-converter-api/</a>
</p>

<p>
We will use the DOI tool. According to the documentation, we need to form a URL like this:
</p>

<p>
DOI: <a href="http://www.ncbi.nlm.nih.gov/pmc/utils/idconv/v1.0/?tool=my_tool&email=my_email@example.com&ids=10.1093/nar/gks1195">http://www.ncbi.nlm.nih.gov/pmc/utils/idconv/v1.0/?tool=my_tool&email=my_email@example.com&ids=10.1093/nar/gks1195</a>
</p>

<p>
We will call our tool "org-ref" and use the value of user-mail-address. The URL above returns XML, so we can parse it, and then extract the identifiers. This is a simple http GET request, which we can construct using url-retrieve-synchronously. Here is what we get.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let*</span> ((url-request-method <span style="color: #008000;">"GET"</span>)
       (doi<span style="color: #008000;">"10.1093/nar/gks1195"</span>)
       (my-tool <span style="color: #008000;">"org-ref"</span>)
       (url (format <span style="color: #008000;">"http://www.ncbi.nlm.nih.gov/pmc/utils/idconv/v1.0/?tool=%s&amp;email=%s&amp;ids=%s"</span>
                    my-tool
                    user-mail-address
                    doi))
       (xml (<span style="color: #0000FF;">with-current-buffer</span>  (url-retrieve-synchronously url)
                (xml-parse-region url-http-end-of-headers (point-max)))))
xml)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">((pmcids
  ((status . <span style="color: #008000;">"ok"</span>))
  <span style="color: #008000;">"\n"</span>
  (request
   ((idtype . <span style="color: #008000;">"doi"</span>)
    (dois . <span style="color: #008000;">""</span>)
    (versions . <span style="color: #008000;">"yes"</span>)
    (showaiid . <span style="color: #008000;">"no"</span>))
   <span style="color: #008000;">"\n"</span>
   (echo nil <span style="color: #008000;">"tool=org-ref;email=jkitchin%40andrew.cmu.edu;ids=10.1093%2Fnar%2Fgks1195"</span>)
   <span style="color: #008000;">"\n"</span>)
  <span style="color: #008000;">"\n"</span>
  (record
   ((requested-id . <span style="color: #008000;">"10.1093/NAR/GKS1195"</span>)
    (pmcid . <span style="color: #008000;">"PMC3531190"</span>)
    (pmid . <span style="color: #008000;">"23193287"</span>)
    (doi . <span style="color: #008000;">"10.1093/nar/gks1195"</span>))
   (versions nil
             (version
              ((pmcid . <span style="color: #008000;">"PMC3531190.1"</span>)
               (current . <span style="color: #008000;">"true"</span>)))))
  <span style="color: #008000;">"\n"</span>))
</pre>
</div>

<p>
The parsed xml is now just an emacs-lisp data structure. We need to get the record, and then get the attributes of it to extract the identifiers. Next, we create a plist of the identifiers. For fun, we add the Scopus EID and WOS accession number from the previous posts too.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">let*</span> ((url-request-method <span style="color: #008000;">"GET"</span>)
       (doi<span style="color: #008000;">"10.1093/nar/gks1195"</span>)
       (my-tool <span style="color: #008000;">"org-ref"</span>)
       (url (format <span style="color: #008000;">"http://www.ncbi.nlm.nih.gov/pmc/utils/idconv/v1.0/?tool=%s&amp;email=%s&amp;ids=%s"</span>
                    my-tool
                    user-mail-address
                    doi))
       (xml (car (<span style="color: #0000FF;">with-current-buffer</span>  (url-retrieve-synchronously url)
                   (xml-parse-region url-http-end-of-headers (point-max)))))
       (record (first  (xml-get-children xml 'record)))
       (doi (xml-get-attribute record 'doi))
       (pmcid (xml-get-attribute record 'pmcid))
       (pmid (xml-get-attribute record 'pmid)))
  (list <span style="color: #006FE0;">:doi</span> doi <span style="color: #006FE0;">:pmid</span> pmid <span style="color: #006FE0;">:pmcid</span> pmcid <span style="color: #006FE0;">:eid</span> (scopus-doi-to-eid doi) <span style="color: #006FE0;">:wos</span> (wos-doi-to-accession-number doi)))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #006FE0;">:doi</span> <span style="color: #008000;">"10.1093/nar/gks1195"</span> <span style="color: #006FE0;">:pmid</span> <span style="color: #008000;">"23193287"</span> <span style="color: #006FE0;">:pmcid</span> <span style="color: #008000;">"PMC3531190"</span> <span style="color: #006FE0;">:eid</span> <span style="color: #008000;">"2-s2.0-80053651587"</span> <span style="color: #006FE0;">:wos</span> <span style="color: #008000;">"000312893300006"</span>)
</pre>
</div>

<p>
Well, there you have it, four new scientific document ids from one DOI. <i>Of course</i> we have defined org-mode links for each one of these:
</p>

<p>
<a href="https://doi.org/10.1093/nar/gks1195">doi:10.1093/nar/gks1195</a>
</p>

<p>
<a href="http://www.ncbi.nlm.nih.gov/pmc/articles/mid/23193287">pmid:23193287</a>
</p>

<p>
<a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3531190">pmcid:PMC3531190</a>
</p>

<p>
<a href=" http://www.scopus.com/record/display.url?eid=2-s2.0-80053651587&origin=resultslist">eid:2-s2.0-80053651587</a>
</p>

<p>
<a href="http://ws.isiknowledge.com/cps/openurl/service?url_ver=Z39.88-2004&rft_id=info:ut/000312893300006">wos:000312893300006</a>
</p>

<p>
I have not tested this on too many DOIs yet. Not all of them are indexed by Pubmed.
</p>
<p>Copyright (C) 2015 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2015/06/09/Converting-a-DOI-to-other-scientific-identifiers-in-Pubmed.org">org-mode source</a><p><p>Org-mode version = 8.2.10</p>
